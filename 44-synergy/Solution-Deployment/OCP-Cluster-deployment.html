<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Red Hat OpenShift Container Platform Cluster deployment | OpenShift Container Platform 4.4 on Synergy</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-openshift/44-synergy/assets/css/0.styles.848b002a.css" as="style"><link rel="preload" href="/hpe-solutions-openshift/44-synergy/assets/js/app.84b9672e.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/44-synergy/assets/js/2.d6fcc4df.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/44-synergy/assets/js/14.d7e47945.js" as="script"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/10.f785cdcb.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/11.5df395ef.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/12.36a26b0c.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/13.42d926c9.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/15.8b7fdf38.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/16.ff701634.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/17.de74fef4.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/18.35c5f375.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/19.0d580fd7.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/20.1bbdea0b.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/21.9690fb37.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/22.c8934c89.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/23.35084974.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/24.3ee611d1.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/25.f2df1c9b.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/26.fb060f22.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/27.3fac409f.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/28.a76a7ac1.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/29.e80c6a85.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/3.a78e42b0.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/4.08161444.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/5.05b28079.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/6.a0d3fa7b.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/7.72ac9725.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/8.f8891241.js"><link rel="prefetch" href="/hpe-solutions-openshift/44-synergy/assets/js/9.2843fa69.js">
    <link rel="stylesheet" href="/hpe-solutions-openshift/44-synergy/assets/css/0.styles.848b002a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-openshift/44-synergy/" class="home-link router-link-active"><!----> <span class="site-name">OpenShift Container Platform 4.4 on Synergy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-openshift/44-synergy/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-openshift/44-synergy/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Red Hat OpenShift Container Platform 4 on HPE Synergy</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Solution Deployment</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Solution-deployment-flow.html" class="sidebar-link">Solution Deployment Flow</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Preparing-execution-environment.html" class="sidebar-link">Preparing the execution environment</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Server-Profiles.html" class="sidebar-link">Server profiles</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Operating-system-deployment.html" class="sidebar-link">Operating system deployment</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/User-provisioned-DNS-requirements.html" class="sidebar-link">User-provisioned DNS requirements</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Load-Balancer.html" class="sidebar-link">Load Balancer</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Bootstrap-node.html" class="sidebar-link">Bootstrap node</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Physical-node-configuration.html" class="sidebar-link">Physical node configuration</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Virtual-node-configuration.html" class="sidebar-link">Virtual node configuration</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/OCP-Cluster-deployment.html" aria-current="page" class="active sidebar-link">Red Hat OpenShift Container Platform Cluster deployment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/OCP-Cluster-deployment.html#deploying-an-openshift-cluster" class="sidebar-link">Deploying an OpenShift cluster</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/OCP-Cluster-deployment.html#deploying-mongodb-application" class="sidebar-link">Deploying MongoDB application</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/OCP-Cluster-deployment.html#verifying-mongodb-deployment" class="sidebar-link">Verifying MongoDB deployment</a></li></ul></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/OCP-worker-nodes.html" class="sidebar-link">Red Hat OCP worker nodes</a></li><li><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Deploying-OCP-on-VMware-vSphere.html" class="sidebar-link">Deploying OpenShift Container Platform 4.4 on VMware vSphere</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Additional Features and Functionality</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resosurces and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="red-hat-openshift-container-platform-cluster-deployment"><a href="#red-hat-openshift-container-platform-cluster-deployment" class="header-anchor">#</a> Red Hat OpenShift Container Platform Cluster deployment</h1> <p>This section describes the process to deploy Red Hat OpenShift Container Platform 4.</p> <div class="custom-block warning"><p class="custom-block-title">Pre-requisites</p> <ul><li><p>Bootstrap node should be up.</p></li> <li><p>Master nodes should be up and ready.</p></li></ul></div> <h2 id="deploying-an-openshift-cluster"><a href="#deploying-an-openshift-cluster" class="header-anchor">#</a> Deploying an OpenShift cluster</h2> <p>This section covers the steps to deploy a Red Hat OpenShift Container Platform 4 cluster with master nodes and worker nodes running RHCOS. After the operating system is installed on the nodes, verify the installation and then perform the following steps:</p> <ol><li><p>Login to the installer VM as non-root user.</p></li> <li><p>Execute the following command to bootstrap the nodes.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token variable">$BASE_DIR</span>/installer/library/openshift_components/openshift-install wait-for bootstrap-complete --log-level<span class="token operator">=</span>debug
</code></pre></div><p><strong>RESULT</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>DEBUG OpenShift Installer v4.4

DEBUG Built from commit 425e4ff0037487e32571258640b39f56d5ee5572

INFO Waiting up to 30m0s <span class="token keyword">for</span> the Kubernetes API at https://api.ocp.pxelocal.local:6443<span class="token punctuation">..</span>.

INFO API v1.14.4+76aeb0c up

INFO Waiting up to 30m0s <span class="token keyword">for</span> bootstrapping to complete<span class="token punctuation">..</span>.

DEBUG Bootstrap status: complete

INFO It is now safe to remove the bootstrap resources
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>You can shut down or remove the bootstrap node after the completion of step 1 and step 2.</p></div></li> <li><p>Run the following command to append the kubeconfig path to environment variables.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">KUBECONFIG</span><span class="token operator">=</span><span class="token variable">$BASE_DIR</span>/installer/ignitions/auth/kubeconfig
</code></pre></div></li> <li><p>Run the following command to append the oc utility path to environment variables.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$BASE_DIR</span>/installer/library/openshift_components
</code></pre></div></li> <li><p>Provide the PV storage for the registry. Execute the following command to set the image registry storage to an empty directory.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch <span class="token string">'{&quot;spec&quot;:{&quot;storage&quot;:{&quot;emptyDir&quot;:{}}}}'</span> 
</code></pre></div></li> <li><p>Execute the following command to complete the RedHat OpenShift Container Platform 4 cluster installation.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token variable">$BASE_DIR</span>/installer/library/openshift_components/openshift-install wait-for install-complete --log-level<span class="token operator">=</span>debug
</code></pre></div><p>The result should appear like what appears below.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>    DEBUG OpenShift Installer v4.4

DEBUG Built from commit 6ed04f65b0f6a1e11f10afe658465ba8195ac459 

INFO Waiting up to 30m0s <span class="token keyword">for</span> the cluster at https://api.rrocp.pxelocal.local:6443 to initialize<span class="token punctuation">..</span>. 

DEBUG Still waiting <span class="token keyword">for</span> the cluster to initialize: Working towards <span class="token number">4.4</span>: <span class="token number">99</span>% complete 

DEBUG Still waiting <span class="token keyword">for</span> the cluster to initialize: Working towards <span class="token number">4.4</span>: <span class="token number">99</span>% complete, waiting on authentication, console,image-registry 

DEBUG Still waiting <span class="token keyword">for</span> the cluster to initialize: Working towards <span class="token number">4.4</span>: <span class="token number">99</span>% complete 

DEBUG Still waiting <span class="token keyword">for</span> the cluster to initialize: Working towards <span class="token number">4.4</span>: <span class="token number">100</span>% complete, waiting on image-registry 

DEBUG Still waiting <span class="token keyword">for</span> the cluster to initialize: Cluster operator image-registry is still updating 

DEBUG Still waiting <span class="token keyword">for</span> the cluster to initialize: Cluster operator image-registry is still updating 

DEBUG Cluster is initialized 

INFO Waiting up to 10m0s <span class="token keyword">for</span> the openshift-console route to be created<span class="token punctuation">..</span>. 

DEBUG Route found <span class="token keyword">in</span> openshift-console namespace: console 

DEBUG Route found <span class="token keyword">in</span> openshift-console namespace: downloads 

DEBUG OpenShift console route is created 

INFO Install complete<span class="token operator">!</span> 

INFO To access the cluster as the system:admin user when using <span class="token string">'oc'</span>, run <span class="token string">'export KUBECONFIG=/opt/hpe/solutions/ocp/hpe-solutions-openshift/synergy/scalable/installer/library/ignitions/auth/kubeconfig'</span> 

INFO Access the OpenShift web-console here: https://console-openshift-console.apps.ocp.pxelocal.local 

INFO Login to the console with user: kubeadmin, password: a6hKv-okLUA-Q9p3q-UXLc3
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Make a note of the cluster URL and the username for future access.</p> <p>If the password is lost or forgotten, view the file kubeadmin-password located in the installer machine at <em>$BASE_DIR/installer/library/ignitions/auth/.</em></p></div></li></ol> <p><strong>Figure 18</strong> shows the OpenShift Container Platform console view upon successful deployment.</p> <p><img src="/hpe-solutions-openshift/44-synergy/assets/img/figure24.688ca465.png" alt=""></p> <p><strong>Figure 18.</strong> OpenShift Web Console login screen</p> <h1 id="validating-openshift-container-platform-deployment"><a href="#validating-openshift-container-platform-deployment" class="header-anchor">#</a> Validating OpenShift Container Platform deployment</h1> <p>After the cluster is up and running with OpenShift Local Storage Operator, the cluster configuration is validated by deploying a MongoDB pod with persistent volume and Yahoo Cloud Service Benchmarking (YCSB). This section covers the steps to validate the OpenShift Container Platform deployment.</p> <div class="custom-block warning"><p class="custom-block-title">Prerequisites</p> <ol><li><p>OCP 4 cluster must be installed.</p></li> <li><p>Use local storage or OCS to claim persistent volume (PV).</p></li> <li><p>MongoDB instance will only support local file system storage or OCS file system.</p></li></ol></div> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>Block storage is not supported.</p></div> <h2 id="deploying-mongodb-application"><a href="#deploying-mongodb-application" class="header-anchor">#</a> Deploying MongoDB application</h2> <ol><li><p>Login to the installer VM as a non-root user.</p></li> <li><p>Use the following command to download the Red Hat scripts specific to the MongoDB application at <a href="https://github.com/red-hat-storage/SAWORF" target="_blank" rel="noopener noreferrer">https://github.com/red-hat-storage/SAWORF<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">git</span> clone <span class="token operator">&lt;</span>https://github.com/red-hat-storage/SAWORF.git<span class="token operator">&gt;</span>  
</code></pre></div></li> <li><p>From within the red-hat-storage repository, navigate to the folder SAWORF/OCS3/MongoDB/blog2.</p></li> <li><p>Update the <em>create_and_load.sh</em> script with <strong>local storage</strong>, <strong>OCS ,</strong> <strong>Nimble storage,</strong> and <strong>3PAR storage</strong> in place of <strong>glusterfs</strong> content. Example is as follows.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">mongodb_ip</span><span class="token operator">=</span><span class="token punctuation">$(</span>oc get svc -n <span class="token variable">${PROJECT_NAME}</span> <span class="token operator">|</span> <span class="token function">grep</span> -v **local storage** <span class="token operator">|</span> <span class="token function">grep</span> mongodb <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'{print <span class="token variable">$3</span>}'</span>
</code></pre></div></li> <li><p>Create MongoDB and YCSB pods and load the sample data. Update the following command with appropriate values for the command line parameters and execute the command to create the MongoDB and YCSB pods and also to load the sample data.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ./create_and_load_mongodb <span class="token variable">$PROJECT_NAME</span> <span class="token variable">$OCP_TEMPLATE</span> <span class="token variable">$MONGODB_MEMORY_LIMIT</span> <span class="token variable">$PV_SIZE</span> <span class="token variable">$MONGODB_VERSION</span> <span class="token variable">$YCSB_WORKLOAD</span> <span class="token variable">$YCSB_DISTRIBUTION</span> <span class="token variable">$YCSB_RECORDCOUNT</span> <span class="token variable">$YCSB_OPERATIONCOUNT</span> <span class="token variable">$YCSB_THREADS</span> <span class="token variable">$LOG_DIR</span>
</code></pre></div><p>Example command is shown as follows.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ./create_and_load_mongodb dbtest mongodb-persistent 4Gi 10Gi <span class="token number">3.6</span> workloadb uniform <span class="token number">4000</span> <span class="token number">4000</span> <span class="token number">8</span> root /mnt/data/
</code></pre></div><p>The output is as follows.</p> <div class="language- extra-class"><pre><code> &gt; Deploying template &quot;openshift/mongodb-persistent&quot; to project dbtest

    MongoDB

---------

&gt; MongoDB database service, with persistent storage. For more information about using this template, including OpenShift considerations, see documentation in the upstream repository: &lt;https://github.com/sclorg/mongodb-container&gt;.   

The following service(s) have been created in the project: mongodb.

Username: redhat

Password: redhat

Database Name: redhatdb

Connection URL: mongodb://redhat:redhat@mongodb/redhatdb

For more information about using this template, including OpenShift considerations, see documentation in the upstream repository: &lt;https://github.com/sclorg/mongodb-container&gt;.

With parameters:

        * Memory Limit=4Gi

        * Namespace=openshift

        * Database Service Name=mongodb

        * MongoDB Connection Username=redhat

        * MongoDB Connection Password=redhat

        * MongoDB Database Name=redhatdb

        * MongoDB Admin Password=redhat

        * Volume Capacity=10Gi

        * Version of MongoDB Image=3.6

&gt; Creating resources ...

    secret &quot;mongodb&quot; created

    service &quot;mongodb&quot; created

    error: persistentvolumeclaims &quot;mongodb&quot; already exists

    deploymentconfig.apps.openshift.io &quot;mongodb&quot; created

&gt; Failed

pod/ycsb-pod created
</code></pre></div></li></ol> <div class="custom-block tip"><p class="custom-block-title">Note</p> <div class="language- extra-class"><pre><code>    Scaling to more than one replica is not supported. You must have persistent volume available in your cluster to use this template.
</code></pre></div></div> <ol start="6"><li><p>Execute the following command to run the check_db_size script.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ ./check_db_size <span class="token variable">$PROJECT_NAME</span>
</code></pre></div><p>The output is as follows.</p> <div class="language- extra-class"><pre><code>MongoDB shell version v3.6.12

connecting to: mongodb://172.x.x.x:27017/redhatdb?gssapiServiceName=mongodb

Implicit session: session {&quot;id&quot; : UUID(&quot;c0a76ddc-ea0b-4fc-88fd-045d0f98b2&quot;) }

MongoDB server version: 3.6.3

{

              &quot;db&quot; : &quot;redhatdb&quot;,

              &quot;collections&quot; : 1,

              &quot;views&quot; : 0,

              &quot;objects&quot; : 4000,

              &quot;avgObjSize&quot; : 1167.877,

              &quot;dataSize&quot; : 0.004350680857896805,

              &quot;storageSize&quot; : 0.00446319580078125,

              &quot;numExtents&quot; : 0,

              &quot;indexes&quot; : 1,

              &quot;indexSize&quot; : 0.0001068115234375,

              &quot;fsUsedSize&quot; : 1.0311393737792969,

              &quot;fsTotalSize&quot; : 99.951171875,

              &quot;ok&quot; : 1

}
</code></pre></div></li></ol> <h2 id="verifying-mongodb-deployment"><a href="#verifying-mongodb-deployment" class="header-anchor">#</a> Verifying MongoDB deployment</h2> <ol><li><p>Execute the following command to verify the persistent volume associated with MongoDB pods.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ oc get <span class="token function">pv</span><span class="token operator">|</span><span class="token function">grep</span> mongodb
</code></pre></div><p>The output is as follows.</p> <div class="language- extra-class"><pre><code>local-pv-e7f10f65 100Gi RWO Delete Bound dbtest/mongodb local-sc 26h
</code></pre></div></li> <li><p>Execute the following command to verify the persistent volume claim (PVC) associated with MongoDB pods.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ oc get pvc 
</code></pre></div><p>The output is as follows.</p> <div class="language- extra-class"><pre><code>local-pv-e7f10f65 100Gi RWO Delete Bound dbtest/mongodb local-sc 26h
</code></pre></div></li> <li><p>Execute the following command to ensure MongoDB and YCSB pods are up and running.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ oc get pod
</code></pre></div><p>The output is as follows.</p> <div class="language- extra-class"><pre class="language-text"><code>NAME               READY   STATUS      RESTARTS   AGE

mongodb-1-deploy   0/1     Completed   0          3m40s

mongodb-1-skbwq    1/1     Running     0          3m36s

ycsb-pod           1/1     Running     0          3m41s
</code></pre></div></li></ol> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>For more information about deploying MongoDB application along with YCSB, refer to the Red Hat documentation at <a href="https://www.redhat.com/en/blog/multitenant-deployment-mongodb-using-openshift-container-storage-and-using-ycsb-test-performance" target="_blank" rel="noopener noreferrer">https://www.redhat.com/en/blog/multitenant-deployment-mongodb-using-openshift-container-storage-and-using-ycsb-test-performance<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/Virtual-node-configuration.html" class="prev">
        Virtual node configuration
      </a></span> <span class="next"><a href="/hpe-solutions-openshift/44-synergy/Solution-Deployment/OCP-worker-nodes.html">
        Red Hat OCP worker nodes
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-openshift/44-synergy/assets/js/app.84b9672e.js" defer></script><script src="/hpe-solutions-openshift/44-synergy/assets/js/2.d6fcc4df.js" defer></script><script src="/hpe-solutions-openshift/44-synergy/assets/js/14.d7e47945.js" defer></script>
  </body>
</html>
