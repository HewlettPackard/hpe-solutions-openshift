<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenShift Container Platform 4.10 on HPE DL365 Gen10 Plus Servers</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-openshift/4.10-dl/assets/css/0.styles.63fe4194.css" as="style"><link rel="preload" href="/hpe-solutions-openshift/4.10-dl/assets/js/app.f7bd77fb.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/4.10-dl/assets/js/2.7c26c33b.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/4.10-dl/assets/js/3.7a36b079.js" as="script"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/10.b9aac181.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/11.a7f10f64.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/12.4dd9c041.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/13.4a65d88c.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/14.df2fa083.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/15.aa710849.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/16.facc29a4.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/17.15c44ee1.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/18.fcb650a7.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/19.2c3d1323.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/20.58a6ad97.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/21.548533a3.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/22.0fb16ed7.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/23.0f457265.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/24.2c3f4ae7.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/25.c3304277.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/26.ba38ffac.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/4.f1950966.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/5.e7dabacf.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/6.57b774f0.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/7.7351e6ab.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/8.d609138f.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.10-dl/assets/js/9.99fc6a60.js">
    <link rel="stylesheet" href="/hpe-solutions-openshift/4.10-dl/assets/css/0.styles.63fe4194.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-openshift/4.10-dl/" class="home-link router-link-active"><!----> <span class="site-name">OpenShift Container Platform 4.10 on HPE DL365 Gen10 Plus Servers</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-openshift/4.10-dl/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-openshift/4.10-dl/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Red Hat OpenShift Container Platform 4.10 on DL Servers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Additional Features and Functionality</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-openshift/4.10-dl/Additional-Features-and-Functionality/Install-and-Configure-Velero.html" class="sidebar-link">/Additional-Features-and-Functionality/Install-and-Configure-Velero.html</a></li><li><a href="/hpe-solutions-openshift/4.10-dl/Additional-Features-and-Functionality/Securing-OpenShift-Container-Platform-using-Sysdig.html" class="sidebar-link">/Additional-Features-and-Functionality/Securing-OpenShift-Container-Platform-using-Sysdig.html</a></li><li><a href="/hpe-solutions-openshift/4.10-dl/Additional-Features-and-Functionality/Deploying-Wordpress-with-Persistent-Volumes-using-Alletra-Storage.html" class="sidebar-link">/Additional-Features-and-Functionality/Deploying-Wordpress-with-Persistent-Volumes-using-Alletra-Storage.html</a></li><li><a href="/hpe-solutions-openshift/4.10-dl/Additional-Features-and-Functionality/Deploying-sample-application-using-Ephemeral-storage.html" class="sidebar-link">/Additional-Features-and-Functionality/Deploying-sample-application-using-Ephemeral-storage.html</a></li><li><a href="/hpe-solutions-openshift/4.10-dl/Additional-Features-and-Functionality/Deploying-HPE-CSI-Driver-for-Alletra-storage.html" aria-current="page" class="active sidebar-link">/Additional-Features-and-Functionality/Deploying-HPE-CSI-Driver-for-Alletra-storage.html</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Troubleshooing by Using Manual Processes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resosurces and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><strong>Deploying HPE CSI Driver for HPE Alletra storage on RH OCP 4.10</strong></p> <p>This section describes how to deploy HPE CSI Driver for HPE Alletra storage on an existing RH OCP 4.10.</p> <p>Prerequisites:</p> <p>Before configuring the HPE CSI Driver, the following prerequisites must be met:</p> <ol><li>RH OCP 4.10 must be successfully deployed, and console should be accessible.</li> <li>iSCSI interface must be configured on the HPE Alletra Storage array. For more information, see the <a href="https://hpe.sharepoint.com/:b:/s/msteams_40dd8a/ERiwCoHIVKtArjql9ECPvtcBL2elYoXKiCZfEUKbbkxLHg?e=aoDytU" target="_blank" rel="noopener noreferrer">Infrastructure Master Reference Architecture based on HPE Alletra 6000<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Additional iSCSI network interfaces must be configured on physical worker nodes.</li> <li>Deploy scc.yaml file to enable Security Context Constraints (SCC).</li></ol> <p><strong>Configuring iSCSI interface on worker nodes</strong></p> <p>The RH OCP 4.10 cluster comprises the master and physical worker nodes with RHEL 8.5 deployed as the operating system. The iSCSI interface is configured on the host nodes to establish the connection with the HPE Alletra array to the cluster. Apart from the host nodes, additional iSCSI interface needs to be configured on all the worker (physical and virtual) nodes for establishing the connection between the RH OCP cluster and HPE Alletra arrays.</p> <p>To configure iSCSI interface on physical RHEL worker nodes:</p> <ul><li>Configure iSCSI A connection as a storage interface and iSCSI B connection as an additional storage for redundancy.</li></ul> <p>For example, the iSCSI_A and iSCSI_B interface connection is configured on worker1 node, as shown in Figure 9.</p> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f9.f0b50a3a.png" alt=""></p> <p><strong>FIGURE 9.</strong> iSCSI_A and iSCSI_B interface connection</p> <p><strong>Creating namespace</strong></p> <p>To create a namespace, in this case, hpe-csi:</p> <ol><li>Open Red Hat OpenShift Container Platform Console on a supported web browser.</li> <li>Click Administration → Namespaces on the left pane.</li> <li>Click Create Namespaces.</li> <li>On the Create Namespace dialog box, enter hpe-csi.</li> <li>Click Create.</li></ol> <p><strong>Deploying Security Context Constraints (SCC)</strong></p> <p>The HPE CSI Driver needs to run in the privileged mode to get access to the host ports, host network, and to mount the host path volume. Before deploying HPE CSI Driver operator on RH OCP cluster, deploy SCC to allow HPE CSI Driver to run with these privileges.</p> <p>Prerequisites:</p> <ul><li>Ensure that you can access the scc.yaml file from the following GitHub link:</li></ul> <p><a href="https://raw.githubusercontent.com/hpe-storage/co-deployments/master/operators/hpe-csi-operator/deploy/scc.yaml" target="_blank" rel="noopener noreferrer">https://raw.githubusercontent.com/hpe-storage/co-deployments/master/operators/hpe-csi-operator/deploy/scc.yaml<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>To deploy SCC:</p> <ol><li>On the installer VM, download scc.yaml file from the <a href="https://raw.githubusercontent.com/hpe-storage/co-deployments/master/operators/hpe-csi-operator/deploy/scc.yaml" target="_blank" rel="noopener noreferrer">GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> link using the following command:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">curl</span> <span class="token parameter variable">-sL</span> https://raw.githubusercontent.com/hpe-storage/co-deployments/master/operators/hpe-csi-operator/deploy/scc.yaml <span class="token operator">&gt;</span> hpe-csi-scc.yaml 
</code></pre></div><ol start="2"><li>Edit relevant parameters such as project name or namespace in the hpe-csi-scc.yaml file.</li> <li>Change my-hpe-csi-operator to the name of the project (in this case, hpe-csi) where the CSI Operator is being deployed using the following command:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># oc new-project hpe-csi --display-name=”HPE CSI Driver for Kubernetes&quot; </span>

<span class="token comment"># sed -i'' -e 's/my-hpe-csi-driver-operator/hpe-csi/g' hpe-csi-scc.yaml </span>
</code></pre></div><ol start="2"><li>Save the file.</li></ol> <p>The following figure illustrates the parameter that needs to be edited (project name) where the HPE CSI Driver operator is deployed:</p> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f10.382041d4.png" alt=""></p> <p><strong>FIGURE 10.</strong> Editing hpe-cs-scc.yaml file</p> <ol start="3"><li>Deploy SCC using the following command and check the output:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># oc create -f hpe-csi-scc.yaml </span>
</code></pre></div><p>The following output is displayed:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>securitycontextconstraints.security.openshift.io/hpe-csi-scc created 
</code></pre></div><p><strong>Installing and configuring HPE CSI Driver</strong></p> <p><strong>NOTE</strong></p> <p>HPE CSI Driver version 2.2 is used for deploying HPE Alletra Storage on the RH OCP 4.10.</p> <p>Prerequisites:</p> <p>Before installing the HPE CSI Driver from the Red Hat OpenShift Container Platform Console:</p> <ul><li>Create a namespace for HPE CSI Driver.</li> <li>Deploy SCC for the created namespace.</li></ul> <p>Installing HPE CSI Driver Operator using Red Hat OperatorHub</p> <p>To install HPE CSI Driver Operator from the Red Hat OperatorHub:</p> <ol><li>Log in to the Red Hat OpenShift Container Platform Console.</li> <li>Navigate to Operators → OperatorHub.</li> <li>Search for HPE CSI Driver Operator from the list of operators and click HPE CSI Driver Operator.</li> <li>On the HPE CSI Operator for Kubernetes page, click Install.</li></ol> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f11.f3c07a59.png" alt=""></p> <p><strong>FIGURE 11.</strong> HPE CSI Driver Operator search</p> <ol start="5"><li>On the Create Operator Subscription page, select the appropriate options:</li> <li><code></code>Select “A specific namespace on the cluster” in the Installation Mode option.</li> <li>Select the appropriate namespace (in this case, hpe-csi) in the Installed Namespace option.</li> <li>Select “stable” in the Update Channel option.</li> <li>Select “Automatic” in the Approval Strategy option.</li></ol> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f12.3815236b.png" alt=""></p> <p><strong>FIGURE 12.</strong> Create Operator Subscription</p> <ol start="6"><li>Click** Subscribe.</li> <li>The Installed Operators page is displayed with the status of the operator.</li></ol> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f13.97a4f304.png" alt=""></p> <p><strong>FIGURE 13.</strong> Installed Operators</p> <p>Creating HPE CSI Driver</p> <p>The HPE CSI Driver is a multi-vendor and multi-backend driver where each implementation has a Container Storage Provider (CSP). The HPE CSI Driver for Kubernetes uses CSP to perform data management operations on storage resources such as searching for a logical unit number (lun) and so on. The HPE CSI Driver allows any vendor or project to develop its own CSP using the <a href="https://developer.hpe.com/api/hpe-nimble-csp/" target="_blank" rel="noopener noreferrer">CSP specification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. It enables the third parties to integrate their storage solution into Kubernetes and takes care of all the intricacies.</p> <p>To create the HPE CSI Driver:</p> <ol><li>Log in to the Red Hat OpenShift Container Platform Console.</li> <li>Navigate to Operators → Installed Operators on the left pane to view the installed operators.</li> <li>On the Installed Operators page, select HPECSIDriver from the Project drop-down list to switch to the hpe-csi project.</li> <li>On the hpe-csi project, select HPECSIDriver tab.</li> <li>Click Create HPECSIDriver.</li> <li>Click Create.</li></ol> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f14.ece7c8a4.png" alt=""></p> <p><strong>FIGURE 14.</strong> HPE CSI Driver creation</p> <p>Verifying HPECSIDriver configuration</p> <p>After the HPECSIDriver is deployed, the deployment pods such as hpe-csi-controller, hpe-csi-driver, primera3par-csp, and Nimble-csp are displayed on the Pods page.</p> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f15.032fabde.png" alt=""></p> <p><strong>FIGURE 15.</strong> Deployment pods for HPECSIDriver</p> <p><strong>NOTE</strong></p> <p>The Nimble Storage CSP also supports HPE Alletra 6000.</p> <p>To verify the HPE CSI node information:</p> <ol><li>On the installer VM, check HPENodeInfo and network status of worker nodes with the following commands.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># oc get HPENodeInfo </span>

<span class="token comment"># oc get HPENodeInfo/&lt;workernode fqdn&gt; -o yaml </span>
</code></pre></div><p>The following output is displayed:</p> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f16.a370b322.png" alt=""></p> <p><strong>FIGURE 16.</strong> HPENodeInfo on the cluster</p> <p><strong>Creating HPE Alletra StorageClass</strong></p> <p>After HPE CSI Driver is deployed, two additional objects, Secret and StorageClass, must be created to initiate the provisioning of persistent storage.</p> <p>Creating Alletra Secret</p> <p>To create a new Alletra Secret via CLI:</p> <ol><li>Add the name, Namespace, backend username, backend password and the backend IP address in the Alletra-secret.yaml file and save it to be used by the CSP.</li></ol> <p>The following details are provided in the Alletra-secret.yaml file:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1 

<span class="token key atrule">kind</span><span class="token punctuation">:</span> Secret 

<span class="token key atrule">metadata</span><span class="token punctuation">:</span> 

  <span class="token key atrule">name</span><span class="token punctuation">:</span> alletra<span class="token punctuation">-</span>secret 

  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> hpe<span class="token punctuation">-</span>csi 

<span class="token key atrule">stringData</span><span class="token punctuation">:</span> 

  <span class="token key atrule">serviceName</span><span class="token punctuation">:</span> alletra<span class="token punctuation">-</span>csp<span class="token punctuation">-</span>svc 

  <span class="token key atrule">servicePort</span><span class="token punctuation">:</span> “8080&quot; 

  <span class="token key atrule">backend</span><span class="token punctuation">:</span> alletramgmtip      <span class="token comment"># update alletramgmt ip </span>

  <span class="token key atrule">username</span><span class="token punctuation">:</span> admin 

  <span class="token key atrule">password</span><span class="token punctuation">:</span> admin 
</code></pre></div><ol start="2"><li>Create the Alletra-secret.yaml file with the following command:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># oc create -f Alletra-secret.yaml </span>
</code></pre></div><ol start="3"><li>The following output displays the status of the alletra-secret with the “hpe-csi” namespace.</li></ol> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f17.6f0fc1cd.png" alt=""></p> <p><strong>FIGURE 17.</strong> HPE Alletra Secret status</p> <p>Creating StorageClass with HPE Alletra Secret</p> <p>This section describes how to create a new StorageClass using the existing Alletra-secret and the necessary StorageClass parameters.</p> <p>To create a new StorageClass using the Alletra-secret:</p> <ol><li>Edit the following parameters in the Alletra-storageclass.yaml file:</li></ol> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1 

<span class="token key atrule">kind</span><span class="token punctuation">:</span> StorageClass 

<span class="token key atrule">metadata</span><span class="token punctuation">:</span> 

`  `annotations<span class="token punctuation">:</span> 

`    `storageclass.kubernetes.io/is<span class="token punctuation">-</span><span class="token key atrule">default-class</span><span class="token punctuation">:</span> “true” 

`  `name<span class="token punctuation">:</span> Alletra<span class="token punctuation">-</span>storageclass 

<span class="token key atrule">provisioner</span><span class="token punctuation">:</span> csi.hpe.com 

<span class="token key atrule">parameters</span><span class="token punctuation">:</span> 

`  `csi.storage.k8s.io/fstype<span class="token punctuation">:</span> xfs 

`  `csi.storage.k8s.io/controller<span class="token punctuation">-</span><span class="token key atrule">expand-secret-name</span><span class="token punctuation">:</span> alletra<span class="token punctuation">-</span>secret 

`  `csi.storage.k8s.io/controller<span class="token punctuation">-</span><span class="token key atrule">expand-secret-namespace</span><span class="token punctuation">:</span> hpe<span class="token punctuation">-</span>csi 

`  `csi.storage.k8s.io/controller<span class="token punctuation">-</span><span class="token key atrule">publish-secret-name</span><span class="token punctuation">:</span> alletra<span class="token punctuation">-</span>secret 

`  `csi.storage.k8s.io/controller<span class="token punctuation">-</span><span class="token key atrule">publish-secret-namespace</span><span class="token punctuation">:</span> hpe<span class="token punctuation">-</span>csi 

`  `csi.storage.k8s.io/node<span class="token punctuation">-</span><span class="token key atrule">publish-secret-name</span><span class="token punctuation">:</span> alletra<span class="token punctuation">-</span>secret 

`  `csi.storage.k8s.io/node<span class="token punctuation">-</span><span class="token key atrule">publish-secret-namespace</span><span class="token punctuation">:</span> hpe<span class="token punctuation">-</span>csi 

`  `csi.storage.k8s.io/node<span class="token punctuation">-</span><span class="token key atrule">stage-secret-name</span><span class="token punctuation">:</span> alletra<span class="token punctuation">-</span>secret 

`  `csi.storage.k8s.io/node<span class="token punctuation">-</span><span class="token key atrule">stage-secret-namespace</span><span class="token punctuation">:</span> hpe<span class="token punctuation">-</span>csi 

`  `csi.storage.k8s.io/provisioner<span class="token punctuation">-</span><span class="token key atrule">secret-name</span><span class="token punctuation">:</span> alletra<span class="token punctuation">-</span>secret 

`  `csi.storage.k8s.io/provisioner<span class="token punctuation">-</span><span class="token key atrule">secret-namespace</span><span class="token punctuation">:</span> hpe<span class="token punctuation">-</span>csi 

`  `description<span class="token punctuation">:</span> “Volume created by the HPE CSI Driver for Kubernetes” 

<span class="token key atrule">reclaimPolicy</span><span class="token punctuation">:</span> Delete 

<span class="token key atrule">allowVolumeExpansion</span><span class="token punctuation">:</span> true 
</code></pre></div><ol start="2"><li>Create the Alletra-storageclass.yml file with the following command:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">\</span># oc create <span class="token parameter variable">-f</span> Alletra-storageclass.yml 
</code></pre></div><ol start="3"><li>Verify the name of the storage class (in this case, Alletra-storageclass).</li></ol> <p><img src="/hpe-solutions-openshift/4.10-dl/assets/img/f18.83144001.png" alt=""></p> <p><strong>FIGURE 18.</strong> HPE Alletra StorageClass status</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-openshift/4.10-dl/Additional-Features-and-Functionality/Deploying-sample-application-using-Ephemeral-storage.html" class="prev">
        /Additional-Features-and-Functionality/Deploying-sample-application-using-Ephemeral-storage.html
      </a></span> <span class="next"><a href="/hpe-solutions-openshift/4.10-dl/Troubleshooting-Using-Manual-Processes/Preparing-execution-environment.html">
        /Troubleshooting-Using-Manual-Processes/Preparing-execution-environment.html
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-openshift/4.10-dl/assets/js/app.f7bd77fb.js" defer></script><script src="/hpe-solutions-openshift/4.10-dl/assets/js/2.7c26c33b.js" defer></script><script src="/hpe-solutions-openshift/4.10-dl/assets/js/3.7a36b079.js" defer></script>
  </body>
</html>
