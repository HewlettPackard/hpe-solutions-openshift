(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{291:function(t,s,a){t.exports=a.p+"assets/img/f9.2b1a139e.png"},292:function(t,s,a){t.exports=a.p+"assets/img/f10.4a0f860a.png"},293:function(t,s,a){t.exports=a.p+"assets/img/f11.07ef58d4.png"},294:function(t,s,a){t.exports=a.p+"assets/img/f12.aa21676a.png"},317:function(t,s,a){"use strict";a.r(s);var e=a(13),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"deploying-wordpress-and-mysql-with-persistent-volumes-using-hpe-alletra-storage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploying-wordpress-and-mysql-with-persistent-volumes-using-hpe-alletra-storage"}},[t._v("#")]),t._v(" DEPLOYING WORDPRESS AND MYSQL WITH PERSISTENT VOLUMES USING HPE ALLETRA STORAGE")]),t._v(" "),s("p",[t._v("A WordPress and MySQL application is deployed on the existing RHOCP cluster to utilize the volume from HPE Alletra array through HPE CSI Driver. A two-tier application such as WordPress and MySQL are deployed and scheduled on the worker nodes. This chapter describes how to deploy a sample two-tier application on RHOCP 4.10 using HPE Alletra storage.")]),t._v(" "),s("p",[s("strong",[t._v("Deploying WordPress and MySQL application using HPE Alletra storage")]),t._v("**  **")]),t._v(" "),s("p",[t._v("To deploy WordPress and MySQL application using HPE Alletra storage:")]),t._v(" "),s("ol",[s("li",[t._v("Download the MySQL deployment configuration file.")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-LO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("https://k8s.io/examples/application/wordpress/mysql-deployment.yaml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("https://k8s.io/examples/application/wordpress/mysql-deployment.yaml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ol",[s("li",[t._v("Download the WordPress configuration file.")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-LO")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("https://k8s.io/examples/application/wordpress/wordpress-deployment.yaml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("https://k8s.io/examples/application/wordpress/wordpress-deployment.yaml"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("ol",[s("li",[t._v("Edit kustomization.yaml file to add secret and both the deployment configuration.")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@rhel7"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("_installer wordpress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" kustomization.yaml\n\nsecretGenerator:\n\n- name: mysql-pass\n\n  literals:\n\n  - "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mysql\n\nresources:\n\n  - mysql.yaml\n\n  - wordpress.yaml\n")])])]),s("ol",[s("li",[t._v("Run the following command to apply the changes to the kustomization.yaml file.")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ oc apply -k./\n")])])]),s("p",[t._v("The following output is displayed:")]),t._v(" "),s("p",[s("img",{attrs:{src:a(291),alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("FIGURE")]),t._v(" "),s("strong",[t._v("9")]),t._v(" Output of WordPress and MySQL two-tier sample application deployment")]),t._v(" "),s("ol",[s("li",[t._v("Check the status of PVC, PV, and mariadb pod.")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(292),alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("FIGURE")]),t._v(" "),s("strong",[t._v("10")]),t._v(" PV and PVC status for WordPress and MySQL")]),t._v(" "),s("p",[t._v("Figure 21 shows the list of pods that should now be available in the environment.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(293),alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("FIGURE")]),t._v(" "),s("strong",[t._v("11")]),t._v(" Wordpress and MySQL pods for two-tier sample app deployed")]),t._v(" "),s("p",[s("strong",[t._v("Verifying PVC on HPE Alletra array")])]),t._v(" "),s("p",[t._v("The Persistent Volume Claim (PVC) created for the two-tier sample application deployed for WordPress and MySQL can be verified on the HPE Alletra array by searching for the PVC ID displayed on the console or on the CLI.")]),t._v(" "),s("p",[t._v("To verify the PVC on HPE Alletra array:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Log in to the HPE Alletra Console at https://alletramgmtip")])]),t._v(" "),s("li",[s("p",[t._v("Verify WordPress and MySQL PVC ID in the data storage. The details of PVC ID are displayed on the dashboard.")])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(294),alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("FIGURE")]),t._v(" "),s("strong",[t._v("12")]),t._v(" Volume created for the PVC created in HPE Alletra")])])}),[],!1,null,null,null);s.default=r.exports}}]);