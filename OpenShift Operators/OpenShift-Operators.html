<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>OpenShift operators | RED HAT OPENSHIFT CONTAINER PLATFORM 4 ON HPE SYNERGY</title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/hpe-solutions-openshift/assets/css/0.styles.03110986.css" as="style"><link rel="preload" href="/hpe-solutions-openshift/assets/js/app.97ab5217.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/assets/js/2.7869ffdd.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/assets/js/8.7912b669.js" as="script"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/10.eaca1b1f.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/11.e4a910b4.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/12.23c485d1.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/13.1dfc2227.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/14.6cfe7b83.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/15.396fb9b8.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/16.a35ed86c.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/17.821cf572.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/18.861062ec.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/19.790531fa.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/20.77410566.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/21.64fb4b9d.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/22.d1f7b188.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/23.47b1fcea.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/24.5e6bc1df.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/25.739eaeab.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/26.c868f3e2.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/3.df4c1f1d.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/4.4ba88d9e.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/5.bae94e2f.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/6.29d6f4db.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/7.1836f0b8.js"><link rel="prefetch" href="/hpe-solutions-openshift/assets/js/9.9e7c1a91.js">
    <link rel="stylesheet" href="/hpe-solutions-openshift/assets/css/0.styles.03110986.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-openshift/" class="home-link router-link-active"><!----> <span class="site-name">RED HAT OPENSHIFT CONTAINER PLATFORM 4 ON HPE SYNERGY</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-openshift/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-openshift/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/hpe-solutions-openshift/Introduction/Introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/hpe-solutions-openshift/Solution overview/Solution-overview.html" class="sidebar-link">Solution overview</a></li><li><a href="/hpe-solutions-openshift/Solution components/Solution-components.html" class="sidebar-link">Solution components</a></li><li><a href="/hpe-solutions-openshift/Preparing the execution environment/Preparing-the-execution-environment.html" class="sidebar-link">Preparing the execution environment</a></li><li><a href="/hpe-solutions-openshift/Physical environment configuration/Physical-environment-configuration.html" class="sidebar-link">Physical environment configuration</a></li><li><a href="/hpe-solutions-openshift/Physical node configuration/Physical-node-configuration.html" class="sidebar-link">Physical node configuration</a></li><li><a href="/hpe-solutions-openshift/Virtual node configuration/Virtual-node-configuration.html" class="sidebar-link">Virtual node configuration</a></li><li><a href="/hpe-solutions-openshift/vSphere Provisioner/vSphere-Provisioner.html" class="sidebar-link">vSphere Provisioner</a></li><li><a href="/hpe-solutions-openshift/Operating system deployment/Operating-system-deployment.html" class="sidebar-link">Operating system deployment</a></li><li><a href="/hpe-solutions-openshift/Red Hat OpenShift Container Platform deployment/Red-Hat-OpenShift-Container-Platform-deployment.html" class="sidebar-link">Red Hat OpenShift Container Platform deployment</a></li><li><a href="/hpe-solutions-openshift/Red Hat Local Storage Operator/Red-Hat-Local-Storage-Operator.html" class="sidebar-link">Red Hat Local Storage Operator</a></li><li><a href="/hpe-solutions-openshift/Integration of HPE OneView with Prometheus/Integration-of-HPE-OneView-with-Prometheus.html" class="sidebar-link">Integration of HPE OneView with Prometheus</a></li><li><a href="/hpe-solutions-openshift/Storage/Storage.html" class="sidebar-link">Storage</a></li><li><a href="/hpe-solutions-openshift/HPE CSI drivers/HPE-CSI-drivers.html" class="sidebar-link">HPE CSI drivers</a></li><li><a href="/hpe-solutions-openshift/Securing Red Hat OpenShift Container Platform using Sysdig Secure and Sysdig Monitor/Securing-Red-Hat-OpenShift-Container-Platform-using-Sysdig-Secure-and-Sysdig-Monitor.html" class="sidebar-link">Securing Red Hat OpenShift Container Platform using Sysdig Secure and Sysdig Monitor</a></li><li><a href="/hpe-solutions-openshift/Physical worker node labeling in Red Hat OpenShift cluster/Physical-worker-node-labeling-in-Red-Hat-OpenShift-cluster.html" class="sidebar-link">Physical worker node labeling in Red Hat OpenShift cluster</a></li><li><a href="/hpe-solutions-openshift/OpenShift Operators/OpenShift-Operators.html" class="active sidebar-link">OpenShift Operators</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/OpenShift Operators/OpenShift-Operators.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/OpenShift Operators/OpenShift-Operators.html#scripts-for-configuring-the-operators" class="sidebar-link">Scripts for configuring the operators</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/OpenShift Operators/OpenShift-Operators.html#installing-the-operators-on-the-openshift-container-platform-cluster" class="sidebar-link">Installing the operators on the OpenShift Container Platform cluster</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/OpenShift Operators/OpenShift-Operators.html#validation-of-the-operator-installation" class="sidebar-link">Validation of the operator installation</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/OpenShift Operators/OpenShift-Operators.html#launch-kibana-dashboard-from-openshift-cluster" class="sidebar-link">Launch Kibana dashboard  from OpenShift cluster</a></li></ul></li><li><a href="/hpe-solutions-openshift/Validating OpenShift Container Platform deployment/Validating-OpenShift-Container-Platform-deployment.html" class="sidebar-link">Validating OpenShift Container Platform deployment</a></li><li><a href="/hpe-solutions-openshift/Resources and additional links/Resources-and-additional-links.html" class="sidebar-link">Resources and additional links</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="openshift-operators"><a href="#openshift-operators" class="header-anchor">#</a> OpenShift operators</h1> <div class="custom-block warning"><p class="custom-block-title">Prerequisites</p> <ul><li>Red Hat OpenShift Container Platform 4.4.x console</li> <li>Availability of any Storage Class (Nimble, 3PAR, Local Storage, and OCS) in OpenShift Container Platform</li> <li>Python 3.6.x should be available on installer VM</li> <li>'Ansible' and 'Requests' python modules.</li></ul></div> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Operators are pieces of software that ease the operational complexity of running other pieces of software. They act like an extension of the software vendor’s engineering team, watching over a Kubernetes environment (such as OpenShift Container Platform) and using the current state to make decisions in real-time. Any container implementation requires certain operators that need to be enabled for use by the end user. This requirement is satisfied by using a combination of Python and Shell scripts and their execution for automating the installation of these operators.</p> <p>Hewlett Packard Enterprise has deployed the following operators in an automated fashion:</p> <ul><li><p>Kiali Operator</p></li> <li><p>Jaeger Operator</p></li> <li><p>Red Hat OpenShift Service Mesh</p></li> <li><p>Prometheus Operator</p></li> <li><p>Grafana Operator</p></li> <li><p>Elasticsearch Operator</p></li> <li><p>Fluentd Operator (Cluster Logging)</p></li> <li><p>Kibana Operator (Cluster Logging)</p></li></ul> <h2 id="scripts-for-configuring-the-operators"><a href="#scripts-for-configuring-the-operators" class="header-anchor">#</a> Scripts for configuring the operators</h2> <div class="custom-block tip"><p class="custom-block-title">Note</p> <div class="language- extra-class"><pre><code>BASE_DIR is the directory path for all automated scripts and the path is /opt/hpe/solutions/ocp/hpe-solutions-openshift/synergy/scalable
</code></pre></div></div> <p>This section provides details on the scripts developed to automate the installation of operators on the OpenShift Container Platform cluster. The scripts to install operators can be found in the installer VM at <em>BASE_DIR/platform/operator_install</em>.</p> <ul><li><p><strong>deploy_validate_operators.py</strong> : Main python script which installs and validates the required operators.</p></li> <li><p><strong>config.py</strong> : Python script to convert user input values into program variables for usage by the deploy_validate_operators.py script.</p></li> <li><p><strong>userinput.json</strong> : Input json file filled by the installation user.</p></li> <li><p><strong>config_secrets.json</strong> : Encrypted input json file filled by the installer user.</p></li></ul> <h2 id="installing-the-operators-on-the-openshift-container-platform-cluster"><a href="#installing-the-operators-on-the-openshift-container-platform-cluster" class="header-anchor">#</a> Installing the operators on the OpenShift Container Platform cluster</h2> <ol><li><p>Login to the Ansible Installer virtual machine as a non-root user and browse to Python virtual environment.</p></li> <li><p>Update the <em>config_secrets.json</em> file found at <em>$BASE_DIR/platform/operator_install</em> with the following setup configuration details:</p> <div class="language- extra-class"><pre class="language-text"><code># OPENSHIFT_USERNAME: &lt;OpenShift Container Platform cluster username&gt;
# OPENSHIFT_PASSWORD: &lt;OpenShift Container Platform cluster password&gt;

</code></pre></div></li> <li><p>Update the <em>userinput.json</em> file found at <em>$BASE_DIR/platform/operator_install</em> with the following setup configuration details:</p> <div class="language- extra-class"><pre class="language-text"><code># OPENSHIFT_DOMAIN: &lt;OpenShift Server sub domain fqdn (api.domain.base_domain)&gt; 
# OPENSHIFT_PORT: &lt;OpenShift Server port number (OpenShift Container Platform runs on port 6443 by default)&gt;
# OPENSHIFT_OPERATOR_LIST: [&quot;jaeger-product&quot;, &quot;kiali-ossm&quot;, &quot;servicemeshoperator&quot;,&quot;grafana-operator&quot;,&quot;prometheus&quot;,elasticsearch-operator&quot;,&quot;cluster-logging&quot;]
# OPERATOR_CHANNEL_LIST: [&quot;stable&quot;, &quot;stable&quot;, &quot;1.0&quot;,&quot;alpha&quot;,&quot;beta&quot;,&quot;4.4&quot;,&quot;4.4&quot;]
# OPERATOR_SOURCE_LIST: [&quot;redhat-operators&quot;,&quot;redhat-operators&quot;,&quot;redhat-operators&quot;,&quot;community-operators&quot;,&quot;community-operators&quot;,&quot;redhat-operators&quot;,&quot;redhat-operators&quot;]
# OPERATOR_INSTALL_PLAN: [&quot;Automatic&quot;, &quot;Automatic&quot;, &quot;Automatic&quot;,&quot;Automatic&quot;,&quot;Automatic&quot;,&quot;Automatic&quot;,&quot;Automatic&quot;]
# OPENSHIFT_PROJECT_NAME: &lt;OpenShift Project Name&gt;
# OPENSHIFT_CLIENT_PATH: &lt; OpenShift OC client tool path (leave it empty if a path has been set)&gt;
# OPENSHIFT_STORAGE_CLASS_NAME: &lt; provide the storage class name to be used by the cluster logging operator &gt;
   
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Note</p> <p>The operator list, channel details, operator source, and install plans can be used if the user wants to install additional operators. For the default installation of the required operators, the user should not modify these fields.</p></div></li> <li><p>Execute the following command to install the operators discussed in the Introduction section of this document.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> <span class="token variable">$BASE_DIR</span>/platform/operator_install

$ python –W ignore deploy_validate_operators.py
</code></pre></div></li></ol> <p>The output of the command is as follows:</p> <div class="language- extra-class"><pre><code>$ python -W ignore deploy_validate_operators.py
    Enter key for encrypted variables:
    Logging into your OpenShift Cluster
    Successfully logged into the OpenShift Cluster
    Token is generated
    Creating Operators...
    Creating Operator jaeger-product
    Creating Operator kiali-ossm
    Creating Operator servicemeshoperator
    Creating Operator grafana-operator
    Creating Operator prometheus
    Creating Operator elasticsearch-operator
    Creating Operator cluster-logging
    Validating Operators...
    The Required Operators have been Created

    Deploying Service Mesh Control Plane..
    Created Service Mesh Control Plane
    Validating Control Plane Creation...
    Control Plane is present and validated!

    Deploying Service Mesh Member Roll...
    Created Service Mesh Member Roll
    Validating Member Roll Creation...
    Member roll is present and validated!

    Deploying Logging Cluster...
    Created Logging instance
    Validating Cluster Logging Instance Creation...
    Cluster Logging Instance is present and validated!

    AUTOMATION IS COMPLETE...
    $   
</code></pre></div><h2 id="validation-of-the-operator-installation"><a href="#validation-of-the-operator-installation" class="header-anchor">#</a> Validation of the operator installation</h2> <p>The required operators will be created after the execution of the script and they will be reflected in the OpenShift console. This section outlines the steps to verify the operators created through script and are reflected in the GUI:</p> <ol><li><p>Login to the <strong>OpenShift Console</strong> as the user with administrative privileges.</p></li> <li><p>Navigate to <strong>Operators</strong> -&gt; <strong>Installed</strong> <strong>Operators</strong> -&gt; select your project name.</p></li> <li><p>The operators will be displayed in the OpenShift web console as shown in Figure 42.</p></li></ol> <p><img src="/hpe-solutions-openshift/assets/img/figure90.9b316a3c.png" alt=""></p> <p><strong>Figure 42.</strong>  Installed Operators in the selected project.</p> <ol start="4"><li>To view the cluster-logging operator and its instance, navigate to &quot;openshift-logging&quot; project name.
Figure 43 shows the cluster-logging operator in the OpenShift web console.</li></ol> <p><img src="/hpe-solutions-openshift/assets/img/figure91.c15e1cd2.png" alt=""></p> <p><strong>Figure 43.</strong> Cluster-logging operator in OpenShift web console</p> <ol start="5"><li><p>Steps to verify the installation of cluster-logging and EFK pods:</p> <ul><li><p>Navigate to the <strong>Workloads → Pods</strong> page ( inside the <strong>openshift-logging</strong> project).</p></li> <li><p>You should see several pods for cluster logging: Elasticsearch, Fluentd, and Kibana as shown in Figure 44.</p></li></ul></li></ol> <p><img src="/hpe-solutions-openshift/assets/img/figure92.145f77d7.png" alt=""></p> <p><strong>Figure 44.</strong> Cluster-logging and EFK pods in the openshift-logging project.</p> <h2 id="launch-kibana-dashboard-from-openshift-cluster"><a href="#launch-kibana-dashboard-from-openshift-cluster" class="header-anchor">#</a> Launch <strong>Kibana</strong> dashboard  from OpenShift cluster</h2> <ol><li><p>Switch to <strong>Networking</strong>. Select  Routes option , navigate to Location. Click Kibana URL to open a new tab in the browser as shown in Figure 45.</p> <p><img src="/hpe-solutions-openshift/assets/img/figure93.60fc6c80.png" alt=""></p> <p><strong>Figure 45.</strong> Launch Kibana dashboard</p></li> <li><p>Kibana dashboard appears as shown in Figure 46.</p> <p><img src="/hpe-solutions-openshift/assets/img/figure94.5c93e99d.png" alt=""></p> <p><strong>Figure 46.</strong> View of Kibana dashboard</p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-openshift/Physical worker node labeling in Red Hat OpenShift cluster/Physical-worker-node-labeling-in-Red-Hat-OpenShift-cluster.html" class="prev">
        Physical worker node labeling in Red Hat OpenShift cluster
      </a></span> <span class="next"><a href="/hpe-solutions-openshift/Validating OpenShift Container Platform deployment/Validating-OpenShift-Container-Platform-deployment.html">
        Validating OpenShift Container Platform deployment
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-openshift/assets/js/app.97ab5217.js" defer></script><script src="/hpe-solutions-openshift/assets/js/2.7869ffdd.js" defer></script><script src="/hpe-solutions-openshift/assets/js/8.7912b669.js" defer></script>
  </body>
</html>
