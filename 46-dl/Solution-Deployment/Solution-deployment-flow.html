<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Solution Deployment Flow | OpenShift Container Platform 4.4 on Synergy</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-openshift/46-dl/assets/css/0.styles.844fec24.css" as="style"><link rel="preload" href="/hpe-solutions-openshift/46-dl/assets/js/app.24f41459.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/46-dl/assets/js/2.107a18de.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/46-dl/assets/js/20.226cf0f7.js" as="script"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/10.594fdf76.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/11.ae7942b7.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/12.e4227dad.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/13.8341cb7a.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/14.6129d0f4.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/15.e3b1ef6a.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/16.ea60addb.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/17.46fbb84b.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/18.cf00a3df.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/19.f059c72b.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/21.f113da25.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/22.29d43d92.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/23.8a05e804.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/24.2e432adf.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/25.9128709e.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/26.3be0a12d.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/27.897c8bb9.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/28.c8ade06c.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/29.950d81f7.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/3.0fa4b89c.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/30.0bc553f5.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/31.8c3a9a71.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/32.8825d561.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/33.2b8ca19e.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/34.d9f5e8e1.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/4.ae2824f5.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/5.1ce4a5b3.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/6.5c564907.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/7.01e207c3.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/8.ee3c11fb.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-dl/assets/js/9.64efdae7.js">
    <link rel="stylesheet" href="/hpe-solutions-openshift/46-dl/assets/css/0.styles.844fec24.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-openshift/46-dl/" class="home-link router-link-active"><!----> <span class="site-name">OpenShift Container Platform 4.4 on Synergy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-openshift/46-dl/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-openshift/46-dl/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Red Hat OpenShift Container Platform 4 on HPE Synergy</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Solution Deployment</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html" aria-current="page" class="active sidebar-link">Solution Deployment Flow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#setup-ipxe-tftp-and-dhcp-for-rhcos" class="sidebar-link">Setup iPXE, TFTP, and DHCP for RHCOS</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#configure-a-load-balancer-for-red-hat-openshift-4-nodes" class="sidebar-link">Configure a load balancer for Red Hat OpenShift 4 nodes</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#configure-dns" class="sidebar-link">Configure DNS</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#configure-firewall-ports" class="sidebar-link">Configure firewall ports</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#start-red-hat-openshift-container-platform-4-user-provisioned-infrastructure-setup" class="sidebar-link">Start Red Hat OpenShift Container Platform 4 user provisioned infrastructure setup</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#download-red-hat-openshift-container-platform-4-software-version" class="sidebar-link">Download Red Hat OpenShift Container Platform 4 software version</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#create-ignition-config-files" class="sidebar-link">Create ignition config files</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#upload-ignition-config-files-to-the-web" class="sidebar-link">Upload ignition config files to the web</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#bootstrap-node" class="sidebar-link">Bootstrap Node</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#master-node" class="sidebar-link">Master Node</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#create-the-cluster" class="sidebar-link">Create the cluster</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#login-to-the-cluster" class="sidebar-link">Login to the cluster</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#initial-operator-configuration" class="sidebar-link">Initial operator configuration</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#worker-node" class="sidebar-link">Worker node</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#complete-the-installation-of-red-hat-openshift-container-platform-4-and-higher-versions-for-user-provisioned-infrastructure" class="sidebar-link">Complete the installation of Red Hat OpenShift Container Platform 4 and higher versions for user provisioned infrastructure</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#log-in-to-the-red-hat-openshift-container-platform-4-and-higher-versions-of-the-console" class="sidebar-link">Log in to the Red Hat OpenShift Container Platform 4 and higher versions of the console</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Solution-deployment-flow.html#standards-used-in-this-document" class="sidebar-link">Standards used in this document</a></li></ul></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Preparing-execution-environment.html" class="sidebar-link">Preparing the execution environment</a></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Operating-system-deployment.html" class="sidebar-link">Operating system deployment</a></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/User-provisioned-DNS-requirements.html" class="sidebar-link">User-provisioned DNS requirements</a></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Load-Balancer.html" class="sidebar-link">Load Balancer</a></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Bootstrap-node.html" class="sidebar-link">Bootstrap node</a></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Physical-node-configuration.html" class="sidebar-link">Physical node configuration</a></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Virtual-node-configuration.html" class="sidebar-link">Virtual node configuration</a></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/OCP-Cluster-deployment.html" class="sidebar-link">Red Hat OpenShift Container Platform Cluster deployment</a></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/OCP-worker-nodes.html" class="sidebar-link">Red Hat OCP worker nodes</a></li><li><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Deploying-OCP-on-VMware-vSphere.html" class="sidebar-link">Deploying OpenShift Container Platform 4.6 on VMware vSphere</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Additional Features and Functionality</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resosurces and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="solution-deployment-flow"><a href="#solution-deployment-flow" class="header-anchor">#</a> Solution Deployment Flow</h1> <p>Figure 8 shows the flow of the installation process and aligns with this document.</p> <p><img src="/hpe-solutions-openshift/46-dl/assets/img/figure21.1fbae537.png" alt=""></p> <p><strong>Figure 8</strong>: Solution Deployment Flow</p> <h2 id="setup-ipxe-tftp-and-dhcp-for-rhcos"><a href="#setup-ipxe-tftp-and-dhcp-for-rhcos" class="header-anchor">#</a> Setup iPXE, TFTP, and DHCP for RHCOS</h2> <p>In this setup, the machine is booted by leveraging the iPXE server. In this step we prepare the iPXE and TFTP server to able to boot RHCOS. This is the initial stage and DHCP is an integral part of the PXE boot process. So, configuring the DHCP is also important. This configuration can be done using sudo access. The details to configure the iPXE set up is listed in the Deployment guide at
https://github.hpe.com/Solutions/Openshift-Synergy-RA/tree/develop/DL</p> <h2 id="configure-a-load-balancer-for-red-hat-openshift-4-nodes"><a href="#configure-a-load-balancer-for-red-hat-openshift-4-nodes" class="header-anchor">#</a> Configure a load balancer for Red Hat OpenShift 4 nodes</h2> <p>In multi-node cluster deployment of OpenShift, the load balancer is mandatory. Hewlett Packard Enterprise in this solution has leveraged HAProxy load balancing required traffic. This configuration can be done using sudo access. For commercial load balancer such as F5 Big-IP or any other OpenShift Container Platform 4 supported load balancer, you need to visit the manufacture website. For more details on configuring sudo to allow non-root users to execute root level commands and for information on HAProxy configuration, see the HPE solutions for Red Hat OpenShift Container Platform GitHub at https://github.hpe.com/Solutions/Openshift-Synergy-RA/tree/develop/DL</p> <h2 id="configure-dns"><a href="#configure-dns" class="header-anchor">#</a> Configure DNS</h2> <p>In user-provisioned infrastructure (UPI), DNS records are required for each machine. These records must be able to resolve the hostnames of all other machines in a Red Hat OpenShift Container Platform cluster. This component also can be configured using sudo access for Linux-based DNS solution or Windows-based DNS solution. For more information on Role-based access control, see <a href="https://docs.microsoft.com/en-us/windows-server/networking/technologies/ipam/role-based-access-control" target="_blank" rel="noopener noreferrer">Windows Role based Access<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. For third-party DNS solutions, you need to visit the manufacture website. This provides more details to configure the sudo to allow non-root users to execute root level commands. For more information, see section <a href="https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#installation-dns-user-infra_installing-bare-metal" target="_blank" rel="noopener noreferrer">User-provisioned DNS requirements.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="configure-firewall-ports"><a href="#configure-firewall-ports" class="header-anchor">#</a> Configure firewall ports</h2> <p>In user-provisioned infrastructure (UPI), network connectivity between machines allows cluster components to communicate within the Red Hat OpenShift Container Platform cluster. Hence, the required ports must be open between Red Hat OpenShift cluster nodes. This component also can be
configured using sudo access for Linux-based firewall. For third-party firewall solutions, you need to visit the manufacture website. This provides details on configuring sudo to allow non-root users to execute root level commands. For more information, see section <a href="https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#installation-network-user-infra_installing-bare-metal" target="_blank" rel="noopener noreferrer">networking requirements for user-provisioned infrastructure.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="start-red-hat-openshift-container-platform-4-user-provisioned-infrastructure-setup"><a href="#start-red-hat-openshift-container-platform-4-user-provisioned-infrastructure-setup" class="header-anchor">#</a> Start Red Hat OpenShift Container Platform 4 user provisioned infrastructure setup</h2> <p>The user provisioned infrastructure (UPI), begins with installing a bastion host. This setup uses RHEL 7.6 virtual machine as a bastion host. This bastion host is used for deployment and management of the Red Hat OpenShift Container Platform 4 version clusters. The setup and configuration can be completed using sudo user access. For more information, see section <a href="https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#ssh-agent-using_installing-bare-metal" target="_blank" rel="noopener noreferrer">Generating an SSH private key and adding it to the agent.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="download-red-hat-openshift-container-platform-4-software-version"><a href="#download-red-hat-openshift-container-platform-4-software-version" class="header-anchor">#</a> Download Red Hat OpenShift Container Platform 4 software version</h2> <p>Download OpenShift Container Platform 4. Check the access token for your cluster and install it on the bastion host. The bastion host is used for deploying and managing the OpenShift Container Platform 4 version clusters. The setup and configuration can be completed using sudo user
access.</p> <h2 id="create-ignition-config-files"><a href="#create-ignition-config-files" class="header-anchor">#</a> Create ignition config files</h2> <p>This step begins with the creation of the install-config.yaml in a new folder. Use the OpenShift install tool to convert the yaml to the ignition config files required to install the Red Hat OpenShift Container Platform 4. There is no system modification done on the bastion host or the provisioning server. This setup can be completed using sudo access. For more information, see
<a href="https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#installation-initializing-manual_installing-bare-metal" target="_blank" rel="noopener noreferrer">https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#installation-initializing-manual_installing-bare-metal.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="upload-ignition-config-files-to-the-web"><a href="#upload-ignition-config-files-to-the-web" class="header-anchor">#</a> Upload ignition config files to the web</h2> <p>This step involves uploading the ignition config files to an internal website that allows anonymous access to the PXE boot process. Update the PXE default file to point to the website location of the ignition file. The action required in this step can be done using sudo user. For more information, see section <a href="https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#installation-user-infra-machines-pxe_installing-bare-metal" target="_blank" rel="noopener noreferrer">Creating Red Hat Enterprise Linux CoreOS (RHCOS) machines by PXE or iPXE booting.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>In a virtualized setup to deploy OpenShift Container Platform 4, a template for OVA image is created. This template is used for creating nodes on the cluster. The ignition config files are provided on each node while provisioning the VMs. For more information on Create template for OVA Image, see https://docs.openshift.com/container-platform/4.6/installing/installing_vsphere/installing-vsphere.html.</p> <h2 id="bootstrap-node"><a href="#bootstrap-node" class="header-anchor">#</a> Bootstrap Node</h2> <p>The bootstrap node is a temporary node that is used to bring up the OpenShift cluster. After the cluster is up, this machine can be decommissioned, and the hardware will be reused. The iPXE boot process must use bootstrapping information as a part of the iPXE boot parameter to install the RHCOS on this node.</p> <h2 id="master-node"><a href="#master-node" class="header-anchor">#</a> Master Node</h2> <p>The master node uses the iPXE image for RHCOS after the bootstrap node. The iPXE boot process must use the master.ign information as part of the iPXE boot parameter to install the RHCOS on this node. The root user is not active by default in RHCOS. So, root login is not available.
Instead, log in as the core user.</p> <h2 id="create-the-cluster"><a href="#create-the-cluster" class="header-anchor">#</a> Create the cluster</h2> <p>The four nodes, one bootstrap and three master nodes boot up and are available at the login prompt for RHCOS. Use the OpenShift install tool to complete the bootstrap process. For more information, see <a href="https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#installation-installing-bare-metal_installing-bare-metal" target="_blank" rel="noopener noreferrer">Creating the cluster.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This action is taken using the sudo user logged in on the bastion host or provision server.</p> <h2 id="login-to-the-cluster"><a href="#login-to-the-cluster" class="header-anchor">#</a> Login to the cluster</h2> <p>After the bootstrap process has completed successfully, login to the cluster. The kubeconfig file is present in the auth directory where the ignition files are created on the bastion host. Export the cluster kubeconfig file and login to your cluster as a default system user. The kubeconfig file contains information about the cluster that is used by the CLI to connect a client to the correct cluster and API server. The file is specific to a cluster and is created during the Red Hat OpenShift Container Platform installation. After logging in, approve the pending OpenShift CSR for the nodes. For more information, see section
<a href="https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#cli-logging-in-kubeadmin_installing-bare-metal" target="_blank" rel="noopener noreferrer">Logging in to the cluster.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="initial-operator-configuration"><a href="#initial-operator-configuration" class="header-anchor">#</a> Initial operator configuration</h2> <p>After the control plane initializes, you must immediately configure operators that are not available. This ensures their availability (for example image-registry). For more information, see section <a href="https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#installation-operators-config_installing-bare-metal" target="_blank" rel="noopener noreferrer">Initial Operator Configuration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. This action is taken using the sudo user logged in on the bastion host or provision server.</p> <h2 id="worker-node"><a href="#worker-node" class="header-anchor">#</a> Worker node</h2> <p>This step involves decommissioning the bootstrap node.Boot the compute nodes associated with worker node profile that has the second volume for local storage setup using iPXE. The root user is not active by default in RHCOS. So, root login is not available, instead, log in as the core user.</p> <h2 id="complete-the-installation-of-red-hat-openshift-container-platform-4-and-higher-versions-for-user-provisioned-infrastructure"><a href="#complete-the-installation-of-red-hat-openshift-container-platform-4-and-higher-versions-for-user-provisioned-infrastructure" class="header-anchor">#</a> Complete the installation of Red Hat OpenShift Container Platform 4 and higher versions for user provisioned infrastructure</h2> <p>After the worker node boots up successfully, use the oc get nodes from the bastion host. The admin can see the worker nodes as part of the OpenShift cluster. Run the OpenShift install tool to complete the installation. For more information, see section <a href="https://docs.openshift.com/container-platform/4.6/installing/installing_bare_metal/installing-bare-metal.html#installation-complete-user-infra_installing-bare-metal" target="_blank" rel="noopener noreferrer">completing installation on user-provisioned infrastructure.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> After this process is completed, it will provide the URL for the Red Hat OpenShift Container Platform 4 version of the console along with the temporary user kubeadmin and temporary password for login.</p> <h2 id="log-in-to-the-red-hat-openshift-container-platform-4-and-higher-versions-of-the-console"><a href="#log-in-to-the-red-hat-openshift-container-platform-4-and-higher-versions-of-the-console" class="header-anchor">#</a> Log in to the Red Hat OpenShift Container Platform 4 and higher versions of the console</h2> <p>Log in to the OpenShift Container Platform 4 version of the console using the URL, username, and password provided in the complete Red Hat OpenShift Container Platform 4 user-provisioned infrastructure. Set up a new user with the cluster admin privileges. For more information, see
section <a href="https://docs.openshift.com/container-platform/4.6/authentication/understanding-authentication.html" target="_blank" rel="noopener noreferrer">Understanding authentication.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="standards-used-in-this-document"><a href="#standards-used-in-this-document" class="header-anchor">#</a> Standards used in this document</h2> <p>This document makes use of the following standard terms:</p> <ul><li><p><strong>Installation user</strong> -- Individual or individuals responsible for carrying out the installation tasks to produce a functional Red Hat OpenShift Container Platform 4.6 solution on HPE ProLiant DL360 and DL380 Gen10 Servers.</p></li> <li><p><strong>Installer machine</strong> -- The system that is capable of connecting to various components within the solution and is used to run most of the key commands. In this solution, this machine also serves as the Ansible Engine host. For more information, refer to the section <a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Preparing-execution-environment.html#installer-machine">Installer machine</a> in this document for more details.</p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-openshift/46-dl/Solution-Components/Physical-Storage-components.html" class="prev">
        Physical Storage components
      </a></span> <span class="next"><a href="/hpe-solutions-openshift/46-dl/Solution-Deployment/Preparing-execution-environment.html">
        Preparing the execution environment
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-openshift/46-dl/assets/js/app.24f41459.js" defer></script><script src="/hpe-solutions-openshift/46-dl/assets/js/2.107a18de.js" defer></script><script src="/hpe-solutions-openshift/46-dl/assets/js/20.226cf0f7.js" defer></script>
  </body>
</html>
