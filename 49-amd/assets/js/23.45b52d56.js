(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{512:function(t,e,s){t.exports=s.p+"assets/img/figure23.c7c8acec.png"},547:function(t,e,s){"use strict";s.r(e);var a=s(54),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"red-hat-openshift-container-platform-cluster-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#red-hat-openshift-container-platform-cluster-deployment"}},[t._v("#")]),t._v(" Red Hat OpenShift Container Platform Cluster deployment")]),t._v(" "),a("p",[t._v("This section describes the process to deploy Red Hat OpenShift Container Platform 4.")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("Pre-requisites")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Bootstrap node should be up.")])]),t._v(" "),a("li",[a("p",[t._v("Master nodes should be up and ready.")])])])]),t._v(" "),a("h2",{attrs:{id:"deploying-an-openshift-cluster"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-an-openshift-cluster"}},[t._v("#")]),t._v(" Deploying an OpenShift cluster")]),t._v(" "),a("p",[t._v("This section covers the steps to deploy a Red Hat OpenShift Container Platform 4 cluster with master nodes and worker nodes running RHCOS. After the operating system is installed on the nodes, verify the installation and then perform the following steps:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Login to the installer VM as non-root user.")])]),t._v(" "),a("li",[a("p",[t._v("Execute the following command to bootstrap the nodes.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BASE_DIR")]),t._v("/installer/library/openshift_components/openshift-install wait-for bootstrap-complete --log-level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("debug\n")])])]),a("p",[a("strong",[t._v("RESULT")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("DEBUG OpenShift Installer v4.9\n\nDEBUG Built from commit 425e4ff0037487e32571258640b39f56d5ee5572\n\nINFO Waiting up to 30m0s "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the Kubernetes API at https://api.ocp.pxelocal.local:6443"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\nINFO API v1.14.6+76aeb0c up\n\nINFO Waiting up to 30m0s "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" bootstrapping to complete"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\nDEBUG Bootstrap status: complete\n\nINFO It is now safe to remove the bootstrap resources\n\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),a("p",[t._v("You can shut down or remove the bootstrap node after the completion of step 1 and step 2.")])])]),t._v(" "),a("li",[a("p",[t._v("Run the following command to append the kubeconfig path to environment variables.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("KUBECONFIG")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BASE_DIR")]),t._v("/installer/ignitions/auth/kubeconfig\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Run the following command to append the oc utility path to environment variables.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BASE_DIR")]),t._v("/installer/library/openshift_components\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Provide the PV storage for the registry. Execute the following command to set the image registry storage to an empty directory.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"spec":{"storage":{"emptyDir":{}}}}\'')]),t._v(" \n")])])])]),t._v(" "),a("li",[a("p",[t._v("Execute the following command to complete the RedHat OpenShift Container Platform 4 cluster installation.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$BASE_DIR")]),t._v("/installer/library/openshift_components/openshift-install wait-for install-complete --log-level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("debug\n")])])]),a("p",[t._v("The result should appear like what appears below.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("DEBUG OpenShift Installer v4.9\n\nDEBUG Built from commit 6ed04f65b0f6a1e11f10afe658465ba8195ac459 \n\nINFO Waiting up to 30m0s "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the cluster at https://api.rrocp.pxelocal.local:6443 to initialize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". \n\nDEBUG Still waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the cluster to initialize: Working towards "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.9")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v("% complete \n\nDEBUG Still waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the cluster to initialize: Working towards "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.9")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v("% complete, waiting on authentication, console,image-registry \n\nDEBUG Still waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the cluster to initialize: Working towards "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.9")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v("% complete \n\nDEBUG Still waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the cluster to initialize: Working towards "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.9")]),t._v(": "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("% complete, waiting on image-registry \n\nDEBUG Still waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the cluster to initialize: Cluster operator image-registry is still updating \n\nDEBUG Still waiting "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the cluster to initialize: Cluster operator image-registry is still updating \n\nDEBUG Cluster is initialized \n\nINFO Waiting up to 10m0s "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" the openshift-console route to be created"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". \n\nDEBUG Route found "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" openshift-console namespace: console \n\nDEBUG Route found "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" openshift-console namespace: downloads \n\nDEBUG OpenShift console route is created \n\nINFO Install complete"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" \n\nINFO To access the cluster as the system:admin user when using "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'oc'")]),t._v(", run "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'export KUBECONFIG=/opt/hpe/solutions/ocp/hpe-solutions-openshift/DL/scalable/installer/library/ignitions/auth/kubeconfig'")]),t._v(" \n\nINFO Access the OpenShift web-console here: https://console-openshift-console.apps.ocp.pxelocal.local \n\nINFO Login to the console with user: kubeadmin, password: a6hKv-okLUA-Q9p3q-UXLc3 \n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),a("p",[t._v("Make a note of the cluster URL and the username for future access.")]),t._v(" "),a("p",[t._v("If the password is lost or forgotten, view the fileÂ kubeadmin-password located in the installer machine at "),a("em",[t._v("$BASE_DIR/installer/library/ignitions/auth/.")])])])])]),t._v(" "),a("p",[a("strong",[t._v("Figure 9")]),t._v(" shows the OpenShift Container Platform console view upon successful deployment.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(512),alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("Figure 9.")]),t._v(" OpenShift Web Console login screen")])])}),[],!1,null,null,null);e.default=n.exports}}]);