<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migration Toolkit for Virtualization | OpenShift Container Platform 4.15 on HPE ProLiant INTEL Gen11 Servers</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/css/0.styles.ffcd331b.css" as="style"><link rel="preload" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/app.af35a740.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/2.4730e0ba.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/1.981e8460.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/17.3a1e01f1.js" as="script"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/10.fe0504e8.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/11.5190110a.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/12.79125345.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/13.657a1ce5.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/14.e9d66914.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/15.b1a9be16.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/16.c9d7617f.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/18.7d69d950.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/19.53db1622.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/20.727625f1.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/21.ffab7a62.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/22.e1bbcad7.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/23.014a5934.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/24.34605eef.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/25.86cef385.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/26.d7f24c22.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/27.f46349fa.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/28.a5cdf7a8.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/29.0d1c1b77.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/3.8ca25f86.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/30.b306080d.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/31.6cfa0c39.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/32.15e89a98.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/33.a69424ac.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/34.ad5e2ce9.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/35.d516443b.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/36.b1a0ae4c.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/37.d8287cc7.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/38.9bed8397.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/39.529a5a19.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/4.0cae26ea.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/40.c6a28bb4.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/5.33541771.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/6.daf8ff5d.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/7.849fdb19.js"><link rel="prefetch" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/vendors~docsearch.c632dcce.js">
    <link rel="stylesheet" href="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/css/0.styles.ffcd331b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-openshift/4.15-INTEL-LTI/" class="home-link router-link-active"><!----> <span class="site-name">OpenShift Container Platform 4.15 on HPE ProLiant INTEL Gen11 Servers</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Red Hat OpenShift Container Platform 4.15 on HPE DL360 &amp; DL380 Gen11 Servers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>OpenShift Virtualization</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Virtualization/Virtualization.html" class="sidebar-link">Install and configure OpenShift Virtualization</a></li><li><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Virtualization/Virt-Live-migration.html" class="sidebar-link">Live migration</a></li><li><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Virtualization/MTV.html" aria-current="page" class="active sidebar-link">Migration Toolkit for Virtualization</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Virtualization/MTV.html#introduction" class="sidebar-link">Introduction</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Virtualization/MTV.html#installing-mtv-operator" class="sidebar-link">Installing MTV Operator</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Virtualization/MTV.html#migration-of-virtual-machines" class="sidebar-link">Migration of Virtual Machines</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Virtualization/MTV.html#migration-plan-creation" class="sidebar-link">Migration plan creation</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Virtualization/MTV.html#running-a-migration-plan" class="sidebar-link">Running a migration plan</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Additional Features and Functionality</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resources and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="migration-toolkit-for-virtualization"><a href="#migration-toolkit-for-virtualization" class="header-anchor">#</a> Migration Toolkit for Virtualization</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>The Migration Toolkit for Virtualization (MTV) enables you to migrate virtual machines from VMware vSphere, Red Hat Virtualization,
or OpenStack to OpenShift Virtualization running on Red Hat OpenShift Virtualization platform.</p> <p><img src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/img/figure-virt19.3abf13a0.png" alt=""> <strong>FIGURE 39</strong> Migration Toolkit for Virtualization supported providers</p> <p>MTV simplifies the migration process, allowing you to seamlessly move VM workloads to OpenShift Virtualization</p> <p>MTV supports Cold migration which is the default migration type. The source virtual machines are shutdown while the data is copied.
Cold migration from</p> <ul><li><p>VMware vSphere</p></li> <li><p>Red Hat Virtualization (RHV)</p></li> <li><p>OpenStack</p></li> <li><p>Remote OpenShift Virtualization clusters</p></li></ul> <p>MTV supports warm migration from VMware vSphere and from RHV. In warm migration most of the data is copied during the pre-copy stage
while the source virtual machines (VMs) are running. Then the VMs are shut down and the remaining data is copied during the cutover stage</p> <h2 id="installing-mtv-operator"><a href="#installing-mtv-operator" class="header-anchor">#</a> Installing MTV Operator</h2> <p>You can install MTV operator using web console and CLI</p> <h3 id="installing-mtv-operator-using-web-console"><a href="#installing-mtv-operator-using-web-console" class="header-anchor">#</a> Installing MTV Operator using web console</h3> <ol><li>In the web console, navigate to Operators → OperatorHub.</li> <li>Use the Filter by keyword field to search for mtv-operator.</li> <li>Click the Migration Toolkit for Virtualization Operator tile and then click Install.</li></ol> <p><img src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/img/figure-virt21.5127a356.png" alt=""> <strong>FIGURE 40</strong> Migration Toolkit Operator deployment</p> <ol start="4"><li>After the Migration Toolkit for Virtualization Operator is installed successfully create ForkliftController Instance.</li></ol> <p><img src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/img/figure-virt22.5f5d4ea3.png" alt=""> <strong>FIGURE 41</strong> ForliftController Instance creation</p> <h3 id="installing-mtv-operator-using-cli"><a href="#installing-mtv-operator-using-cli" class="header-anchor">#</a> Installing MTV Operator using CLI</h3> <ol><li>Create the openshift-mtv project:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> oc apply <span class="token parameter variable">-f</span> -</span>
apiVersion: project.openshift.io/v1
kind: Project
metadata:
  name: openshift-mtv
EOF</span>
</code></pre></div><ol start="2"><li>Create an OperatorGroup CR called migration:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> oc apply <span class="token parameter variable">-f</span> -</span>
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: migration
  namespace: openshift-mtv
spec:
  targetNamespaces:
    - openshift-mtv
EOF</span>
</code></pre></div><ol start="3"><li>Create a Subscription CR for the Operator:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> oc apply <span class="token parameter variable">-f</span> -</span>
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: mtv-operator
  namespace: openshift-mtv
spec:
  channel: release-v2.6
  installPlanApproval: Automatic
  name: mtv-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: &quot;mtv-operator.v2.6.1&quot;
EOF</span>
</code></pre></div><ol start="4"><li>Create a ForkliftController CR:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> oc apply <span class="token parameter variable">-f</span> -</span>
apiVersion: forklift.konveyor.io/v1beta1
kind: ForkliftController
metadata:
  name: forklift-controller
  namespace: openshift-mtv
spec:
  olm_managed: true
EOF</span>
</code></pre></div><h2 id="migration-of-virtual-machines"><a href="#migration-of-virtual-machines" class="header-anchor">#</a> Migration of Virtual Machines</h2> <p>You can migrate virtual machines to OpenShift Virtualization by using the MTV web console from following providers:</p> <ul><li>VMware vSphere</li> <li>Red Hat Virtualization</li> <li>OpenStack</li> <li>Open Virtual Appliances (OVAs) that were created by VMware vSphere</li> <li>OpenShift Virtualization</li></ul> <h3 id="adding-providers"><a href="#adding-providers" class="header-anchor">#</a> Adding providers</h3> <ol><li><p>In web console, navigate to Migration → Providers of Migration → Create Provider</p></li> <li><p>Select the virtual machine provider (in this example we will go with VMWare)</p></li> <li><p>Specify the required provider details</p></li></ol> <p><img src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/img/figure-virt23.05eb78f0.png" alt=""> <strong>FIGURE 42</strong> Additon of VMWare vSphere</p> <p>Note: Provider the VDDK init image to accelerate migrations.</p> <ol start="4"><li><p>Choose one of the following options for validating CA certificates</p> <ul><li>Custom CA certificate</li> <li>System CA certificate</li> <li>Skip certificate validation</li></ul></li> <li><p>Click Create Provider</p></li></ol> <h3 id="selecting-a-migration-network-for-a-vmware-source-provider"><a href="#selecting-a-migration-network-for-a-vmware-source-provider" class="header-anchor">#</a> Selecting a migration network for a VMware source provider</h3> <ol><li><p>In the web console, navigate to Migration → Providers for virtualization.</p></li> <li><p>Click the host in the Hosts column beside a provider to view a list of hosts.</p></li> <li><p>Select one or more hosts and click Select migration network.</p></li> <li><p>Specify the following fields:</p> <ul><li>Network: Network name</li> <li>ESXi host admin username: For example, root</li> <li>ESXi host admin password: Password</li> <li>Click Save.</li></ul></li> <li><p>Verify that the status of each host is Ready.</p></li></ol> <h2 id="migration-plan-creation"><a href="#migration-plan-creation" class="header-anchor">#</a> Migration plan creation</h2> <h3 id="creating-and-running-a-migration-plan-starting-on-providers-for-virtualization"><a href="#creating-and-running-a-migration-plan-starting-on-providers-for-virtualization" class="header-anchor">#</a> Creating and running a migration plan starting on Providers for virtualization</h3> <ol><li><p>In the web console, navigate to Migration → Providers for virtualization.</p></li> <li><p>In the row of the appropriate source provider. And navigate to Virtual Machines tab.</p></li> <li><p>Select the VMs you want to migrate and click Create migration plan.</p></li> <li><p>Create migration plan displays the source provider's name and suggestions for a target provider and namespace, a network map, and a storage map.</p></li> <li><p>Provide the required details to the editable fields.</p></li> <li><p>Add mapping to edit a suggested network mapping or a storage mapping, or to add one or more additional mappings.</p></li></ol> <p>Mapped storage and network mapping can be viewed in Migration → StorageMaps for virtualization / Migration → NetworkMaps for virtualization</p> <ol start="7"><li>Create migration plan.</li></ol> <p>You can create the migration plan for the Source provider as well.</p> <h2 id="running-a-migration-plan"><a href="#running-a-migration-plan" class="header-anchor">#</a> Running a migration plan</h2> <ol><li><p>In the web console, navigate to Migration → Plans for virtualization.</p></li> <li><p>You can see the list of migration plans created for source and target providers, the number of virtual machines (VMs) being migrated,
the status, and the description of each plan.</p></li> <li><p>Click Start beside a migration plan to start the migration.</p></li> <li><p>Click Start in the confirmation window that opens.</p></li></ol> <p>The Migration details by VM screen opens, displaying the migration's progress
Warm migration only:
The pre-copy stage starts.
Click Cutover to complete the migration.</p> <ol start="5"><li><p>Click a migration's Status to view the details of the migration.</p></li> <li><p>The Migration details by VM screen opens, displaying the start and end times of the migration, the amount of data copied for each VM being migrated.</p></li></ol> <h3 id="warm-migration"><a href="#warm-migration" class="header-anchor">#</a> Warm Migration</h3> <p>Warm migration copies most of the data during the precopy stage. Then the VMs are shut down and the remaining data is copied during the cutover stage.
Results of a sample ubuntu virtual machine migration with 10GB OS disk and 10GB data disk.</p> <p><img src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/img/figure-virt24.246d6419.png" alt=""> <strong>FIGURE 43</strong> Warm Migration output</p> <h4 id="cold-migration"><a href="#cold-migration" class="header-anchor">#</a> Cold Migration</h4> <p>During Cold migration the Virtual Machines (VMs) are shut down while the data is copied. Results of a sample ubuntu virtual machine migration with 10GB OS disk and 10GB data disk.</p> <p><img src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/img/figure-virt25.0380f731.png" alt=""> <strong>FIGURE 44</strong> Cold Migration output</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Virtualization/Virt-Live-migration.html" class="prev">
        Live migration
      </a></span> <span class="next"><a href="/hpe-solutions-openshift/4.15-INTEL-LTI/Additional-Features-and-Functionality/Install-and-Configure-Velero.html">
        INSTALL AND CONFIGURE VELERO
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/app.af35a740.js" defer></script><script src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/2.4730e0ba.js" defer></script><script src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/1.981e8460.js" defer></script><script src="/hpe-solutions-openshift/4.15-INTEL-LTI/assets/js/17.3a1e01f1.js" defer></script>
  </body>
</html>
