(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{267:function(i,e){i.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAATCAYAAACp65zuAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFiUAABYlAUlSJPAAAAE2SURBVDhPY/wPBAxEACYoTRCgmPj02XOG3Xv2M/Dy8TB4ubsycHJyQmWQFL55+5ahpb2b4ffvP2AJGWkphsqyIjAbBOBWv3jxCq4IBJ48fcbw798/KA9JoZKiAgMHBweUx8Cgqa7GwMSE8AKKG1+8fMmwfeceBn5+PrAbkTViBM/r128YuLi5GLi5uKAiEABXCHLPoiUrGE6fPQe2Mjw0iMHGygKsCATgjrh56zZYEQiANK1as54B2TK4Qi40q1hZWbErlJeTZbCGWgWyOjI8GLev8QEUhceOn2TYsn0nAx8vL0NURCiDnKwMVAbJ6oePHjMsXbGa4ePHTwyPnzxlmDxtJlQGAuAKv337BmVBwLdv3xn+/P0L5SEpBEWhsJAQlMfAYGpsxMDCzAzlkeAZhP/xAgYGABivf09+EIdPAAAAAElFTkSuQmCC"},304:function(i,e,t){i.exports=t.p+"assets/img/figure-virt18.35317028.png"},370:function(i,e,t){"use strict";t.r(e);var a=t(14),n=Object(a.a)({},(function(){var i=this,e=i._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":i.$parent.slotKey}},[e("h1",{attrs:{id:"live-migration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#live-migration"}},[i._v("#")]),i._v(" Live migration")]),i._v(" "),e("h2",{attrs:{id:"introduction"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[i._v("#")]),i._v(" Introduction")]),i._v(" "),e("p",[i._v("Live migration is the process of moving a running virtual machine (VM) to another node in the cluster without interrupting\nthe virtual workload. By default, live migration traffic is encrypted using Transport Layer Security (TLS).")]),i._v(" "),e("p",[i._v("An enhanced web console provides a graphical portal to manage these virtualized resources alongside the OpenShift Container\nPlatform cluster containers and infrastructure.")]),i._v(" "),e("h2",{attrs:{id:"requirements-of-live-migration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requirements-of-live-migration"}},[i._v("#")]),i._v(" Requirements of Live migration")]),i._v(" "),e("ul",[e("li",[e("p",[i._v("A dedicated Multus network for live migration is highly recommended.")])]),i._v(" "),e("li",[e("p",[i._v("Persistent Volume Claim (Storage) must have ReadWriteMany (RWX) access mode.")])]),i._v(" "),e("li",[e("p",[i._v("All CPU in cluster which hosts Virtual machines must support the host model.")])])]),i._v(" "),e("h2",{attrs:{id:"configuring-live-migration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuring-live-migration"}},[i._v("#")]),i._v(" Configuring live migration")]),i._v(" "),e("p",[i._v("You can configure the following live migration settings to ensure the migration process do not saturate the cluster.")]),i._v(" "),e("ul",[e("li",[e("p",[i._v("Limits and timeouts")])]),i._v(" "),e("li",[e("p",[i._v("Maximum number of migrations per node or cluster")])])]),i._v(" "),e("p",[i._v("Edit the HyperConverged CR and add the necessary live migration parameters:")]),i._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[i._v("oc edit hyperconverged kubevirt-hyperconverged "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[i._v("-n")]),i._v(" openshift-cnv\n")])])]),e("p",[i._v("sample configuration parameters")]),i._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[i._v("apiVersion: hco.kubevirt.io/v1beta1\nkind: HyperConverged\nmetadata:\n  name: kubevirt-hyperconverged\n  namespace: openshift-cnv\nspec:\n  liveMigrationConfig:\n    bandwidthPerMigration: 64Mi \n    completionTimeoutPerGiB: "),e("span",{pre:!0,attrs:{class:"token number"}},[i._v("800")]),i._v(" \n    parallelMigrationsPerCluster: "),e("span",{pre:!0,attrs:{class:"token number"}},[i._v("5")]),i._v(" \n    parallelOutboundMigrationsPerNode: "),e("span",{pre:!0,attrs:{class:"token number"}},[i._v("2")]),i._v(" \n    progressTimeout: "),e("span",{pre:!0,attrs:{class:"token number"}},[i._v("150")]),i._v(" \n")])])]),e("h3",{attrs:{id:"initiating-live-migration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#initiating-live-migration"}},[i._v("#")]),i._v(" Initiating Live Migration")]),i._v(" "),e("p",[i._v("Live migration of virtual machines can be done using web console or CLI.\nprerequisites must be met for the live migration of any virtual machines.")]),i._v(" "),e("h4",{attrs:{id:"initiating-live-migration-using-web-console"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#initiating-live-migration-using-web-console"}},[i._v("#")]),i._v(" Initiating Live Migration using web console")]),i._v(" "),e("ol",[e("li",[e("p",[i._v("Navigate to Virtualization â†’ VirtualMachines in the web console.")])]),i._v(" "),e("li",[e("p",[i._v("Select Migrate from the Options menu "),e("img",{attrs:{src:t(267),alt:""}}),i._v(" beside a VM.")])])]),i._v(" "),e("p",[e("img",{attrs:{src:t(304),alt:""}})]),i._v(" "),e("p",[e("strong",[i._v("FIGURE 38")]),i._v(" Live Migration between nodes")]),i._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[i._v("Click Migrate.")])]),i._v(" "),e("h4",{attrs:{id:"initiating-live-migration-using-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#initiating-live-migration-using-cli"}},[i._v("#")]),i._v(" Initiating Live Migration using CLI")]),i._v(" "),e("ol",[e("li",[i._v("Create and apply the VirtualMachineInstanceMigration manifest for the VM")])]),i._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[i._v("apiVersion: kubevirt.io/v1\nkind: VirtualMachineInstanceMigration\nmetadata:\n  name: "),e("span",{pre:!0,attrs:{class:"token operator"}},[i._v("<")]),i._v(" migration_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[i._v(">")]),i._v("\nspec:\n  vmiName: "),e("span",{pre:!0,attrs:{class:"token operator"}},[i._v("<")]),i._v(" vm_name "),e("span",{pre:!0,attrs:{class:"token operator"}},[i._v(">")]),i._v("\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);