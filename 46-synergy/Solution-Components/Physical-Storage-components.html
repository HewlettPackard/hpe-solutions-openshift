<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Physical Storage components | OpenShift Container Platform 4.6 on Synergy</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-openshift/46-synergy/assets/css/0.styles.55697aca.css" as="style"><link rel="preload" href="/hpe-solutions-openshift/46-synergy/assets/js/app.85d70ec5.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/46-synergy/assets/js/2.fa142977.js" as="script"><link rel="preload" href="/hpe-solutions-openshift/46-synergy/assets/js/7.2bd79bc4.js" as="script"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/10.08281fa0.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/11.62169700.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/12.a384883b.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/13.14b1c483.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/14.e2ed2b94.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/15.6b7b2986.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/16.2812ef60.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/17.1e86af0b.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/18.1b39e9d9.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/19.73feff90.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/20.c807ba2f.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/21.ea4d33a2.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/22.be8f0d0d.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/23.7bab011f.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/24.c8c1d21d.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/25.60976ff9.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/26.31b8fa12.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/27.479e0913.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/28.9f8648b2.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/29.36b22707.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/3.21f3bfd2.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/30.b6d944bc.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/31.eac5b504.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/32.f5577221.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/33.b81dadd0.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/34.1418d906.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/35.df4061e1.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/36.ae0cc03f.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/37.29980f90.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/4.4a1835ae.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/5.5a3beac7.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/6.eee306da.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/8.49e62253.js"><link rel="prefetch" href="/hpe-solutions-openshift/46-synergy/assets/js/9.4b7c9b75.js">
    <link rel="stylesheet" href="/hpe-solutions-openshift/46-synergy/assets/css/0.styles.55697aca.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-openshift/46-synergy/" class="home-link router-link-active"><!----> <span class="site-name">OpenShift Container Platform 4.6 on Synergy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-openshift/46-synergy/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-openshift/46-synergy/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Red Hat OpenShift Container Platform 4.6 on HPE Synergy</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Solution Components</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-openshift/46-synergy/Solution-Components/Solution-Physical-components.html" class="sidebar-link">Solution Physical components</a></li><li><a href="/hpe-solutions-openshift/46-synergy/Solution-Components/Physical-Environment-components.html" class="sidebar-link">Physical Environment components</a></li><li><a href="/hpe-solutions-openshift/46-synergy/Solution-Components/Physical-Storage-components.html" aria-current="page" class="active sidebar-link">Physical Storage components</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-synergy/Solution-Components/Physical-Storage-components.html#hpe-3par-fibre-channel" class="sidebar-link">HPE 3PAR Fibre Channel</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-synergy/Solution-Components/Physical-Storage-components.html#configure-hpe-oneview-for-synergy-to-manage-hpe-3par-storeserv-resources" class="sidebar-link">Configure HPE OneView for Synergy to manage HPE 3PAR StoreServ resources</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-synergy/Solution-Components/Physical-Storage-components.html#hpe-3par-iscsi" class="sidebar-link">HPE 3PAR iSCSI</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-openshift/46-synergy/Solution-Components/Physical-Storage-components.html#hpe-nimble-iscsi" class="sidebar-link">HPE Nimble iSCSI</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Additional Features and Functionality</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resosurces and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="physical-storage-components"><a href="#physical-storage-components" class="header-anchor">#</a> Physical Storage components</h1> <h2 id="hpe-3par-fibre-channel"><a href="#hpe-3par-fibre-channel" class="header-anchor">#</a> HPE 3PAR Fibre Channel</h2> <h3 id="initializing-the-hpe-3par-storeserv-8440-storage"><a href="#initializing-the-hpe-3par-storeserv-8440-storage" class="header-anchor">#</a> Initializing the HPE 3PAR StoreServ 8440 Storage</h3> <p>This section assumes that the HPE 3PAR StoreServ 8440 Storage was
ordered with a physical service processor or with a Virtual Service
Processor. VM is installed and functioning within the environment and is
available on the same network as HPE Synergy Composer. It also assumes
that a DHCP server is present on the network. The user should have the
serial number of the storage that is being installed.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Ensure that information such as user credentials, network access details
and serial numbers referenced are securely recorded for current and
future reference.</p></div> <h3 id="service-processor-networking"><a href="#service-processor-networking" class="header-anchor">#</a> Service Processor networking</h3> <p>To configure the Service Processor networking, use the following steps:</p> <ol><li>Login to a physical Service Processor (SP) or access the console of
a Virtual Service Processor via the virtual console.</li> <li>Log on as <strong>setupusr</strong> without a password.</li> <li>When you configure the network, type <strong>Y</strong> and press <strong>Enter</strong>.</li> <li>Confirm the network parameters that were handed to the Service
Processor by your DHCP server and if correct, type Y and then press
<strong>Enter</strong>. Ensure you note the IP address.</li> <li>When prompted, press <strong>Enter</strong> to exit. You will now configure the
Service Processor. Connect to the SP using the address
<a href="https://3par_ssmc_ip/sp/SpSetupWizard.html" target="_blank" rel="noopener noreferrer">https://3par_ssmc_ip/sp/SpSetupWizard.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and log on with the user
setupusr and no password.</li> <li>At the Welcome screen click <strong>Next</strong>.</li> <li>Enter the serial number of your HPE 3PAR StoreServ storage and
select <strong>Generate SP ID</strong>. Click <strong>Next</strong> when done.</li> <li>On the Configure Service Processor Networking screen give the SP a
hostname, check <strong>Enable DNS Support</strong> and enter the domain name and
DNS server IP. Click <strong>Next</strong>.</li> <li>Enter any proxy information for <em>Remote Support</em> and click <strong>Next</strong>.</li> <li>Enter the appropriate information in the <em>System Support
Information</em> screen and click <strong>Next</strong>.</li> <li>At the <em>Time and Region</em> screen, select <strong>Automatic</strong> and enter the
<strong>IP address</strong> of your NTP server. Choose the appropriate Time Zone
and click <strong>Next</strong>.</li> <li>When prompted, change the password and click <strong>Next</strong>.</li> <li>Click <strong>Next</strong> at the summary screen after validating all
information.</li> <li>Remote connectivity will be tested. In the event of a failed test,
ensure that the SP can speak outbound via HTTPS and that the proxy
information entered is correct.</li></ol> <h3 id="storage-system"><a href="#storage-system" class="header-anchor">#</a> Storage system</h3> <p>Use the following steps to configure the storage system.</p> <ol><li><p>From the SP, select <strong>Launch</strong> adjacent to the <strong>Storage System
Setup Wizard</strong> and accept the EULA. Click <strong>Next</strong>.</p></li> <li><p>Confirm the serial number of your array and click <strong>Next</strong>.</p></li> <li><p>At the <em>Configure Networking</em> screen you will need to enter a name
and network information for the array. Click <strong>Next</strong>.</p></li> <li><p>Select <strong>Copy time options from the Service Processor</strong> and click
<strong>Next</strong>.</p></li> <li><p>Create a password for the 3paradm user and click <strong>Next</strong>.</p></li> <li><p>Verify the configuration information and click <strong>Next</strong>. This will
initialize and test the array and then add it to the SP. This process
can take an extended amount of time. After all tests have passed, click
<strong>Finish</strong>.</p></li></ol> <p>After completion, configure the Web services API and Common Information
Module (CIM).</p> <ol><li><p>Log onto the array via SSH as the 3paradm user.</p></li> <li><p>Run the following command to generate a self-signed certificate.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> createcert unified-server -selfsigned -keysize <span class="token number">2048</span> -days <span class="token number">1095</span> -CN <span class="token operator">&lt;</span>fqdn of 3PAR<span class="token operator">&gt;</span> -SAN <span class="token string">&quot;DNS:&lt;fqdn of 3PAR&gt;, IP:&lt;management IP of 3PAR&gt;&quot;</span>
</code></pre></div></li> <li><p>Answer <strong>Yes</strong> when prompted to continue creating the certificate.</p></li> <li><p>Issue the following commands to start the WSAPI and CIM services.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> setcim -https <span class="token builtin class-name">enable</span>
<span class="token operator">&gt;</span> startcim
<span class="token operator">&gt;</span> startwsapi
</code></pre></div></li> <li><p>You can verify that the services are enabled and running by typing
the following commands.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> showcim
<span class="token operator">&gt;</span> showwsapi
</code></pre></div></li></ol> <h3 id="san-switch-configuration"><a href="#san-switch-configuration" class="header-anchor">#</a> SAN Switch configuration</h3> <p>The following steps should be repeated on each SAN switch:</p> <ol><li><p>Connect via the serial port to the first SAN switch and open a
terminal session using <strong>9600</strong>, <strong>8</strong>, <strong>N</strong> and <strong>1</strong> with <strong>no flow
control</strong>.</p></li> <li><p>Logon as <strong>admin</strong> with the default password of ' <strong>password</strong>'.
Change the passwords for admin and user as prompted.</p></li> <li><p>At the command line, run the following commands to configure IP
addressing for the switch.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> switchname <span class="token operator">&lt;</span>hostname of switch<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> ipaddrset
</code></pre></div></li> <li><p>When prompted, turn off DHCP and configure date and time information
for the switch.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> tstimezone <span class="token comment">##</span>
<span class="token operator">&gt;</span> <span class="token function">date</span> MMddhhmmyy
</code></pre></div></li></ol> <p>Here ## is the difference in the local time zone from GMT and MM is
the 2-digit month, day is the 2-digit date, hh is the 2-digit hour
(24-hour format), mm is the 2-digit minute and yy is the year.</p> <ol start="5"><li>Configure the NTP Server with the following command.<div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> tsclockserver <span class="token operator">&lt;</span>ip address<span class="token operator">&gt;</span>
</code></pre></div></li></ol> <h3 id="configure-the-fabric-and-licensing"><a href="#configure-the-fabric-and-licensing" class="header-anchor">#</a> Configure the fabric and licensing</h3> <p>The user will need to configure fabric and licensing in the environment.</p> <ol><li><p>Run the following command to configure the fabric name.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> fabricname --set <span class="token operator">&lt;</span>san_a_fabricname<span class="token operator">&gt;</span>
</code></pre></div></li> <li><p>Add any licenses by running the following command.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> licenseadd
</code></pre></div></li> <li><p>Verify all ports that will be used have been enabled. If you have
not enabled, then run the following command.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> licenseport -reserve
</code></pre></div></li> <li><p>Configure the Domain ID by typing the following.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> switchdisable
<span class="token operator">&gt;</span> configure
</code></pre></div></li> <li><p>When prompted enter <strong>yes</strong> for Fabric parameters and assign a
Domain ID. Once entered, press <strong>Control-D</strong> to exit.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> switchenable
</code></pre></div></li> <li><p>Reboot the switch to apply changes and repeat these steps on the
second switch.</p></li></ol> <h3 id="isl-trunk-the-fibre-channel-switches"><a href="#isl-trunk-the-fibre-channel-switches" class="header-anchor">#</a> ISL Trunk the Fibre Channel switches</h3> <ol><li>Log in to each switch via SSH and use the <strong>licenseshow</strong> command to
verify that the trunk license has been applied.</li> <li>On switch 1 and switch 2, run the <strong>portcfgpersistentdisable</strong> to
disable the ports that will be used for ISL trunks.</li> <li>Run the <strong>portcfgislmode</strong> command and set the ports to mode 1 to
make them ready for ISL traffic.</li> <li>Enable the ISL trunk ports on the switches by running the
<strong>portcfgpersistentenable</strong> command.</li> <li>Run the <strong>trunkshow</strong> and <strong>fabricshow</strong> commands to verify that the
trunk ports are configured and that both switches display the
correct partner switch.</li></ol> <h3 id="configure-an-active-zone-set"><a href="#configure-an-active-zone-set" class="header-anchor">#</a> Configure an active zone set</h3> <p>To allow HPE OneView for Synergy to manage the SAN fabric, the user must
create an active zone set.</p> <ol><li><p>To create a zone using the WWPN of node 0, slot 0, port 1 on the HPE
3PAR StoreServ 8440, obtain the WWPN by typing <strong>switchshow</strong> and check
the information on the switch port that 3PAR port N0:S0:P1 is connected.</p></li> <li><p>Run the following commands to create the zone for this port.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> zonecreate <span class="token operator">&lt;</span>3PAR_<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>_N0S0P1, <span class="token string">&quot;wwpn&quot;</span>
<span class="token operator">&gt;</span> cfgcreate solution_cfg, <span class="token string">&quot;&lt;3PAR_1&gt;_N0S0P1&quot;</span>
<span class="token operator">&gt;</span> cfgenable solution_cfg
</code></pre></div></li></ol> <p>3.Follow the prompts to enable the solution configuration.</p> <p>4.Repeat these steps for the remaining SAN fabrics using the WWPN of
each 3PAR node, slot, and port.</p> <h3 id="install-and-configure-the-hpe-3par-ssmc"><a href="#install-and-configure-the-hpe-3par-ssmc" class="header-anchor">#</a> Install and configure the HPE 3PAR SSMC</h3> <ol><li>From within the Windows management station, install the HPE 3PAR
StoreServ Management Console by copying the media to the station and
running the <em>HPESSMC-</em>-win64.exe* user. Follow the onscreen
prompts.</li> <li>Use a web browser to connect to <strong>https://3par_ssmc_ip:8443</strong>.</li> <li>Select <strong>Set credential</strong> and enter the <strong>username</strong> and
<strong>password</strong>. Select <strong>Set</strong>.</li> <li>Install the HPE 3PAR Admin Tools by copying the media to the
management server, mounting it and executing <em>cli.exe</em>. Follow the
prompts to install. The user will need to add each array in the
solution to the SSMC Administrator Console.</li> <li>Logon to the console and select <strong>Actions</strong> and then <strong>Add</strong>.</li> <li>Under System DNS names or IP addresses, <strong>enter the IP or name</strong> of
the 3PAR array. The username will be <strong>3paradm</strong> and the password is
the one the user created earlier. Select <strong>Add</strong>.</li> <li>After the array appears in the <strong>NotConnected</strong> state, select it and
select <strong>Actions</strong> and then <strong>AcceptCertificate</strong>. Select <strong>Accept
and cache</strong>. After a moment, the array will appear in the
<strong>Connected</strong> state.</li> <li>Repeat these steps for any additional arrays within the solution.</li></ol> <h3 id="create-common-provisioning-groups-cpgs"><a href="#create-common-provisioning-groups-cpgs" class="header-anchor">#</a> Create Common Provisioning Groups (CPGs)</h3> <p>CPGs are required within this solution. By default, HPE 3PAR StoreServ
arrays create a default set of CPGs.</p> <ol><li><p>Logon to the array as the 3PAR admin user using the SSMC.</p></li> <li><p>Select <strong>3PAR StoreServ -&gt; Show all -&gt; Common Provisioning
Groups</strong>. Select <strong>Create CPG</strong>. Provide a descriptive name and use
RAID6. The remaining default parameters are acceptable for this
solution.</p></li> <li><p>Create a second CPG for snapshots.</p></li></ol> <h2 id="configure-hpe-oneview-for-synergy-to-manage-hpe-3par-storeserv-resources"><a href="#configure-hpe-oneview-for-synergy-to-manage-hpe-3par-storeserv-resources" class="header-anchor">#</a> Configure HPE OneView for Synergy to manage HPE 3PAR StoreServ resources</h2> <h3 id="add-a-san-manager-to-hpe-oneview-for-synergy"><a href="#add-a-san-manager-to-hpe-oneview-for-synergy" class="header-anchor">#</a> Add a SAN Manager to HPE OneView for Synergy</h3> <ol><li>From the HPE OneView for Synergy interface, select <strong>OneView</strong> and
then <strong>SAN manager</strong>.</li> <li>Select <strong>Add SAN manager</strong> and use the following values when prompted. Select <strong>Add</strong> when the values have been filled in.
<ul><li>SAN manager type: <strong>Brocade Network Advisor</strong></li> <li>IP address of hostname: <strong>&lt;mgmt._vm_fqdn&gt;</strong></li> <li>Port: 5989</li> <li>User name: Administrator</li> <li>Password:</li></ul></li> <li>Select <strong>OneView</strong> and then select <strong>SANs</strong>.</li> <li>Select the <strong>SAN switch hostname</strong>, hover over <strong>Zoning Policy</strong> and
select Edit. Click OK when done. For zoning parameters, use the
following values.
<ul><li>Automate zoning: <strong>Yes</strong></li> <li>Zone layout: <strong>Single initiator / single storage system</strong></li> <li>Zone name format: <strong>server profiles _ server profile connection
_ storage system _ storage system port group</strong></li> <li>Check <strong>Update zone names as referenced resources are renamed</strong></li> <li>Create aliases: <strong>Yes</strong></li> <li>Manage pre-existing aliases: <strong>No</strong></li> <li>Initiator alias format: <strong>Initiator _ server profile _ server
profile connection</strong></li> <li>Check <strong>Update initiator</strong> aliases as referenced resources are
renamed.</li> <li>Target alias format: <strong>Target _ storage system _ storage</strong>
system port</li> <li>Check <strong>Update target aliases and target group aliases as
referenced resources are renamed</strong>.</li> <li>Create target group aliases: <strong>Yes</strong></li></ul></li> <li>Target group alias format: <strong>TargetGroup _ storage system _
storage system port group</strong></li> <li>Repeat the steps for each SAN in OneView.</li></ol> <h3 id="associate-san-networks-with-fabrics"><a href="#associate-san-networks-with-fabrics" class="header-anchor">#</a> Associate SAN networks with fabrics</h3> <ol><li>Select <strong>OneView</strong> and then <strong>Networks</strong>.</li> <li>Select <strong>SAN_A</strong> and then choose <strong>Actions -&gt; Edit</strong>.</li> <li>In the Associated SAN field select the hostname of <strong>SAN switch 1</strong>
and click <strong>OK</strong>.</li> <li>Repeat these steps for SAN_B and associate it with the <strong>hostname</strong>
of the second switch.</li> <li>Verify that the Expected Network is set to the correct SAN network
for each port on the HPE 3PAR StoreServ storage. In the event of an
error, check the wiring and previously entered settings and correct
them.</li> <li>Enter the Port Group name and assign every pair of peer persistence
ports to the same Port Group.</li></ol> <h3 id="import-and-configure-the-hpe-3par-storeserv-storage"><a href="#import-and-configure-the-hpe-3par-storeserv-storage" class="header-anchor">#</a> Import and configure the HPE 3PAR StoreServ Storage</h3> <ol><li>Select <strong>OneView</strong> and then choose <strong>Storage Systems</strong>.</li> <li>Choose <strong>Add Storage Systems</strong> and enter the information for your
array. Select <strong>Connect</strong> and ensure the storage shows up correctly.</li> <li>If needed, select a domain under the Storage domain dropdown.</li> <li>For Storage Pools, select the <strong>Manage</strong> checkbox for all of your
previously created CPGs. Select <strong>Add</strong>.</li></ol> <h2 id="hpe-3par-iscsi"><a href="#hpe-3par-iscsi" class="header-anchor">#</a> HPE 3PAR iSCSI</h2> <h3 id="configure-the-management-server"><a href="#configure-the-management-server" class="header-anchor">#</a> Configure the management server</h3> <p>This section assumes that a physical or virtual management server
running Microsoft Windows Server 2012 R2 is available and able to
communicate on the same network as the HPE 3PAR StoreServ storage. If it
is not, the user should create this management VM with the following: -
Microsoft Windows Server 2012 R2 - 2 vCPU - 8GB RAM - 1x 100GB HDD for
OS and applications - 1x 200GB HDD for Media - One (1) Network Interface
connected to the management network where the storage resides</p> <p>The management VM should have Microsoft IIS configured with the web
server role and WebDAV publishing with basic authentication enabled.
After the role is installed, perform the following steps.</p> <ol><li><p>In Server Manager select Tools and then Internet Information
Services (IIS) Manager.</p></li> <li><p>Select the server name and double-select MIME Types.</p></li> <li><p>Select Add and enter the filename extension .vib as type
application/octet stream.</p></li> <li><p>Click OK.</p></li> <li><p>Repeat this process but substitute the filename extension .iso for
.vib.</p></li> <li><p>Close the IIS Manager window.</p></li></ol> <p>Next the user will need to create a repository to house the Service Pack
for ProLiant (SPP) and HPE Synergy Release Set hotfix update files
associated with the HPE CA750 recipe.</p> <ol><li><p>From File Explorer navigate to the second HDD and create a folder
named Media</p></li> <li><p>Within the media folder, create a folder named SPP.</p></li> <li><p>Copy the SPP and HPE Synergy release set files to this folder.</p></li> <li><p>Create a folder under SPP and name the folder Hotfixes. Copy the SPP
and/or HPE Synergy release set hotfix update files to this folder.</p></li> <li><p>In Server Manager, relaunch Internet Information Services manager as
in Step 1.</p></li> <li><p>Expand the hostname and then expand Sites.</p></li> <li><p>Right-click the default web site and select add virtual directory.
Enter Media in the Alias field and select the media folder on the second
drive for the physical path. Click OK twice when done.</p></li> <li><p>From within IIS Manager ensure that the folders exist under default
web site.</p></li> <li><p>Select the Media folder and then double-select directory browsing
and ensure it is Enabled.</p></li> <li><p>Select default web site and double-click theWebDAV Authoring Rules
icon. Select Enable WebDAV in the Actions Pane and then select Add
Authoring Rule.</p></li> <li><p>Select All content and All users radio button and then check the
Read box under permissions. Click OK to commit.</p></li> <li><p>WebDAV setting in the Actions pane and in the Property Behavior
section, ensure that the Allow Anonymous Property Queries and Allow
Property Queries of Infinite Depth are both set to True. Select Apply.</p></li> <li><p>Select the Media directory in the left pane and in the right pane,
double-click the HTTP Response Headers icon.</p></li> <li><p>Select Add in the Actions pane and in the 'name' field enter
MaxRepoSize. In the value field, enter the size of the drive that the
Media folder was created on. In the case of this document you would
enter 200G. Click OK when done.</p></li> <li><p>Select the server name in the left pane and then in the Actions
pane select Restart to restart the web server.</p></li> <li><p>The next step is to create an external HPE OneView for Synergy
repository. Follow the steps below:</p> <p>a) Using Google Chrome, log on to the HPE Synergy Composer and navigate to OneView -&gt; Settings</p> <p>b) Select Repository and then select '+' to add repository.</p> <p>c) Name the repo OneView Repo and in the web server address field enter http:///media/SPP</p> <p>d) Uncheck the Requires Authentication checkbox and select Add.</p></li></ol> <h3 id="install-and-configure-the-hpe-3par-ssmc-2"><a href="#install-and-configure-the-hpe-3par-ssmc-2" class="header-anchor">#</a> Install and configure the HPE 3PAR SSMC</h3> <ol><li>From within the Windows management station, install the HPE 3PAR
StoreServ Management Console by copying the media to the station and
running the HPESSMC-*-win64.exe installer. Follow the onscreen
prompts.</li> <li>Use a web browser to connect to https://3par_ssmc_ip:8443.</li> <li>Select Set credential and enter the username and password. Select
Set when done.</li> <li>Install the HPE 3PAR admin tools by copying the media to the
management server, mounting it and executing cli.exe. Follow the
prompts to install. The user will need to add each array in the
solution to the SSMC Administrator Console.</li> <li>Log on to the console and select Actions and then Add.</li> <li>Under System DNS names or IP addresses enter the IP or name of the
3PAR array. The username will be 3paradm and the password is the one
the user created earlier. Select Add.</li> <li>After the array appears in the Not Connected state, select it and
select Actions and then Accept Certificate. Select Accept and cache.
After a moment the array will show in the Connected state.</li> <li>Repeat these steps for any additional arrays within the solution.</li></ol> <h3 id="create-common-provisioning-groups-cpgs-2"><a href="#create-common-provisioning-groups-cpgs-2" class="header-anchor">#</a> Create Common Provisioning Groups (CPGs)</h3> <p>CPGs are required within this solution. By default, HPE 3PAR StoreServ
Storage Arrays create a default set of CPGs.</p> <ol><li><p>Log on to the array as the 3PAR admin user using the SSMC.</p></li> <li><p>Select 3PAR StoreServ -&gt; Show all -&gt; Common Provisioning Groups.</p></li> <li><p>Select Create CPG. Provide a descriptive name and use RAID6. The
remaining default parameters are acceptable for this solution.</p></li> <li><p>Create a second CPG for snapshots.</p></li></ol> <h3 id="integrate-hpe-3par-storeserv-storage-to-vsphere-hosts"><a href="#integrate-hpe-3par-storeserv-storage-to-vsphere-hosts" class="header-anchor">#</a> Integrate HPE 3PAR StoreServ Storage to vSphere hosts</h3> <p>This section describes the process of creating hosts and storage volumes
for the virtualization hosts. The steps below describes overview of the
tasks.</p> <ol><li><p>Create hosts HPE 3PAR StoreServ Storage Management Console.</p></li> <li><p>Create virtual volume for the vSphere hosts.</p></li></ol> <h3 id="creating-hosts"><a href="#creating-hosts" class="header-anchor">#</a> Creating hosts</h3> <ol><li>Login to the 3PAR StoreServ Management Console. Select Hosts from
the dropdown menu as shown.</li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure13.3ed375fb.png" alt=""></p> <ol start="2"><li><p>On the Hosts page, click <strong>Create Hosts</strong>.</p></li> <li><p>In the Create Host page, provide appropriate values for the
variables.</p> <ul><li>Name: &lt;&gt;</li> <li>System: &lt;&lt;3PAR storage system name&gt;&gt;</li> <li>Domain: None</li> <li>Host Set: NA</li> <li>Host OS: VMware (ESXi)</li></ul></li> <li><p>In the Paths section, click Add iSCSI. On the Add iSCSI page,
provide the vSphere hostnames and IQN and then click Add. Repeat this
step for all the vSphere hosts to permit all the vSphere hosts with
access to the volume.</p></li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure14.c4b648ea.png" alt=""></p> <ol start="5"><li>After all values have been filled in, click <strong>Create</strong>.</li></ol> <h3 id="creating-virtual-volume"><a href="#creating-virtual-volume" class="header-anchor">#</a> Creating virtual volume</h3> <ol><li>Login to the 3PAR StoreServ Management Console. From the dropdown
menu, navigate to Virtual Volumes as shown.</li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure15.76ae91bb.png" alt=""></p> <ol start="2"><li>Click <strong>Create virtual volumes</strong>.</li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure16.b075407e.png" alt=""></p> <ol start="3"><li><p>From the Create Virtual Volume page, provide values for the
following fields and click <strong>Create</strong>.</p> <ul><li>Name:</li> <li>System: &lt;3PAR storage system name&gt;</li> <li>Domain: None</li> <li>Provisioning: Thin Provisioned</li> <li>Dedup: No</li> <li>Compression: No</li> <li>CPG:</li> <li>Size: 3TB</li> <li>Volume Set: NA</li></ul></li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure17.c7021700.png" alt=""></p> <ol start="4"><li>After the Virtual volume has been created, select the Export option
in the Actions drop down menu.</li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure18.3a0c97ea.png" alt=""></p> <ol start="5"><li>From the Export Virtual Volumes page, click <strong>Add</strong>.</li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure19.e425f7d3.png" alt=""></p> <ol start="6"><li><p>From the Add page, select the host to which the virtual volume needs
to be exported and click Add.</p></li> <li><p>After adding the host, select the LUN Auto check box and then click
Export.</p></li></ol> <h2 id="hpe-nimble-iscsi"><a href="#hpe-nimble-iscsi" class="header-anchor">#</a> HPE Nimble iSCSI</h2> <h3 id="integrate-hpe-nimble-storage-with-vsphere-hosts"><a href="#integrate-hpe-nimble-storage-with-vsphere-hosts" class="header-anchor">#</a> Integrate HPE Nimble Storage with vSphere hosts</h3> <ol><li>Create initiator groups in the HPE Nimble Storage management
console.</li> <li>Create a volume for the ESXi hosts.</li></ol> <h3 id="create-initiator-groups-in-the-hpe-nimble-storage-management-console"><a href="#create-initiator-groups-in-the-hpe-nimble-storage-management-console" class="header-anchor">#</a> Create initiator groups in the HPE Nimble Storage management console</h3> <p>The initiator group allows connecting volumes directly to the IQNs of
the iSCSI adapters. From the HPE Nimble Storage management console,
initiator groups should be created with the IQNs of each of the ESXi
hosts. Initiator groups can be created by following the steps outlined
as follows:</p> <ol><li><p>Log in to the HPE Nimble Storage management console.</p></li> <li><p>Navigate to Manage -&gt; Data Access.</p></li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure20.2dc663a0.png" alt=""></p> <ol start="3"><li>On the Create Initiator Group page, enter the details for the
following parameters.
<ul><li>Name: &lt; Name of the initiator group &gt;</li> <li>Subnets: From the drop-down menu, select Use selected subnets and add the selected data subnets.</li> <li>Initiators: Add the name and IQNs of all the initiators (vSphere hosts), and click Create.</li></ul></li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure21.8d184fbc.png" alt=""></p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>IQNs can be found in the Server Profile of the ESXi hosts in
HPE OneView. If hosts are already added into the cluster of vCenter,
IQNs can be found at Host &gt; Configuration &gt; Storage Adapter &gt;
Highlight your iSCSI Software Adapter &gt; Details.</p></div> <h3 id="create-a-volume-for-the-esxi-hosts-in-hpe-nimble-storage-management-console"><a href="#create-a-volume-for-the-esxi-hosts-in-hpe-nimble-storage-management-console" class="header-anchor">#</a> Create a volume for the ESXi hosts in HPE Nimble Storage management console</h3> <p>After the initiator group is created, perform the following to provision
a new volume to store the management virtual machines. A minimum volume
size of 3TB is recommended to host the management nodes.</p> <ol><li>From the HPE Nimble Storage management console, navigate to MANAGE
-&gt; DATA STORAGE.</li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure22.b6b4d1d3.png" alt=""></p> <ol start="2"><li>Click &quot;+&quot; icon to create a new volume.</li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure23.ecad295a.png" alt=""></p> <ol start="3"><li>Provide the values to the following parameters for creating a
volume. Sample values for the parameters are listed as follows.
<ul><li>Name: &lt; Name for the Volume &gt;</li> <li>Location: &lt; Desired location of the Volume &gt;</li> <li>Performance policy: &lt; Assign a performance policy for the volume&gt;</li> <li>Size: As per the need of user environment ( 3TB recommended).</li> <li>Protection policy: Assign a protection policy as required.</li> <li>Access: Assign the initiator group for the vSphere hosts created earlier.</li> <li>CHAP Account: Assign the CHAP account and select the Allow Multiple Initiator access box.</li></ul></li></ol> <p><img src="/hpe-solutions-openshift/46-synergy/assets/img/Figure24.68828f34.png" alt=""></p> <ol start="4"><li>Click <strong>Create</strong> to complete the volume creation.</li></ol> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>If you utilize virtual worker nodes, it is recommended to create another volume with a size based on the installation environment. 1TB is the minimum recommended size.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-openshift/46-synergy/Solution-Components/Physical-Environment-components.html" class="prev">
        Physical Environment components
      </a></span> <span class="next"><a href="/hpe-solutions-openshift/46-synergy/Solution-Deployment/Solution-Deployment-Flow.html">
        Solution Deployment Flow
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-openshift/46-synergy/assets/js/app.85d70ec5.js" defer></script><script src="/hpe-solutions-openshift/46-synergy/assets/js/2.fa142977.js" defer></script><script src="/hpe-solutions-openshift/46-synergy/assets/js/7.2bd79bc4.js" defer></script>
  </body>
</html>
