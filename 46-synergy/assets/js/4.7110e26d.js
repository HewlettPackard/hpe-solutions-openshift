(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{355:function(t,s,a){t.exports=a.p+"assets/img/Figure136.d5153167.png"},356:function(t,s,a){t.exports=a.p+"assets/img/Figure137.86067227.png"},357:function(t,s,a){t.exports=a.p+"assets/img/Figure138.b96511c9.png"},358:function(t,s,a){t.exports=a.p+"assets/img/Figure139.a71c9c5c.png"},359:function(t,s,a){t.exports=a.p+"assets/img/Figure140.4af77b35.png"},360:function(t,s,a){t.exports=a.p+"assets/img/Figure141.d487aa5a.png"},361:function(t,s,a){t.exports=a.p+"assets/img/Figure142.31b26988.png"},362:function(t,s,a){t.exports=a.p+"assets/img/Figure143.d55fb6d4.png"},363:function(t,s,a){t.exports=a.p+"assets/img/Figure144.363704c4.png"},364:function(t,s,a){t.exports=a.p+"assets/img/Figure145.1075c5b4.png"},365:function(t,s,a){t.exports=a.p+"assets/img/Figure146.fa68ba6d.png"},366:function(t,s,a){t.exports=a.p+"assets/img/Figure147.620ef719.png"},367:function(t,s,a){t.exports=a.p+"assets/img/Figure148.776cb331.png"},368:function(t,s,a){t.exports=a.p+"assets/img/Figure149.820dad61.png"},369:function(t,s,a){t.exports=a.p+"assets/img/Figure150.da0ac770.png"},370:function(t,s,a){t.exports=a.p+"assets/img/Figure151.1acaa0e0.png"},371:function(t,s,a){t.exports=a.p+"assets/img/Figure152.e7335ece.png"},372:function(t,s,a){t.exports=a.p+"assets/img/Figure153.6e3114aa.png"},373:function(t,s,a){t.exports=a.p+"assets/img/Figure154.ee463715.png"},374:function(t,s,a){t.exports=a.p+"assets/img/Figure155.6c45a503.png"},523:function(t,s,a){"use strict";a.r(s);var e=a(42),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"red-hat-ceph-storage-4-setup-in-external-mode-with-ocs-integration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#red-hat-ceph-storage-4-setup-in-external-mode-with-ocs-integration"}},[t._v("#")]),t._v(" Red Hat Ceph Storage 4 Setup in External mode with OCS Integration")]),t._v(" "),e("h2",{attrs:{id:"introduction"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),e("p",[t._v("Ceph is a Software Defined Storage (SDS) Solution. It is distributed\nstorage Solution. It is a free and open source. It provides unified\nstorage i.e. a single Ceph cluster can provide Object / Block / File\nstorage options.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(355),alt:""}})]),t._v(" "),e("p",[e("strong",[t._v("Figure 136.")]),t._v(" Red Hat Ceph Storage 4 Setup Solution Layout")]),t._v(" "),e("h2",{attrs:{id:"logical-diagram"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#logical-diagram"}},[t._v("#")]),t._v(" Logical Diagram")]),t._v(" "),e("p",[e("img",{attrs:{src:a(356),alt:""}})]),t._v(" "),e("p",[e("strong",[t._v("Figure 137.")]),t._v(" Red Hat Ceph Storage 4 Solution Flow Diagram")]),t._v(" "),e("h2",{attrs:{id:"hardware-requirement"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hardware-requirement"}},[t._v("#")]),t._v(" Hardware Requirement")]),t._v(" "),e("p",[e("img",{attrs:{src:a(357),alt:""}})]),t._v(" "),e("p",[e("strong",[t._v("MON, OSD, MSD & MGR daemons are running on the MON/OSD node.")])]),t._v(" "),e("h2",{attrs:{id:"installation-process"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation-process"}},[t._v("#")]),t._v(" Installation Process")]),t._v(" "),e("ul",[e("li",[t._v("Enable subscriptions on the following nodes.")])]),t._v(" "),e("p",[e("strong",[t._v("ADMIN node:")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('# subscription-manager register\n# subscription-manager refresh\n# subscription-manager list --available --all\n--matches="*Ceph*"\n# subscription-manager attach --pool=<POOL_ID>\n\n# subscription-manager repos --disable=*\n# subscription-manager repos --enable=rhel-7-server-rpms\n# subscription-manager repos --enable=rhel-7-server-extras-rpms\n# subscription-manager repos\n--enable=rhel-7-server-rhceph-4-tools-rpms\n--enable=rhel-7-server-ansible-2.8-rpms\n\n# yum --y update\n# yum install yum-utils vim -y\n# yum-config-manager --disable epel\n')])])]),e("p",[e("strong",[t._v("MON/OSD nodes:")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('# subscription-manager register\n# subscription-manager refresh\n# subscription-manager list --available --all\n--matches="*Ceph*"\n# subscription-manager attach --pool=<POOL_ID>\n\n# subscription-manager repos --disable=*\n# subscription-manager repos --enable=rhel-7-server-rpms\n# subscription-manager repos --enable=rhel-7-server-extras-rpms\n\n#subscription-manager repos\n--enable=rhel-7-server-rhceph-4-osd-rpms\n#subscription-manager repos\n--enable=rhel-7-server-rhceph-4-mon-rpms\n# subscription-manager repos\n--enable=rhel-7-server-rhceph-4-tools-rpms\n\n# yum --y update\n# yum install yum-utils vim -y\n# yum-config-manager --disable epel\n')])])]),e("ul",[e("li",[t._v("Execute the following steps on "),e("strong",[t._v("Admin Node")])])]),t._v(" "),e("ol",[e("li",[t._v("Install ceph-ansible package")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y ceph-ansible\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/share/ceph-ansible\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Create ansible host inventory file for MON, OSD & GRAFANA as shown\nbelow")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" hosts\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[mons]\n<mon-1.fqdn>\n<mon-2.fqdn>\n<mon-3.fqdn>\n\n[osds]\n<osd-1.fqdn>\n<osd-2.fqdn>\n<osd-3.fqdn>\n\n[grafana-server]\n<grafana_server.fqdn>\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/share/ceph-ansible\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" group_vars/all.yml.sample group_vars/all.yml\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" group_vars/osds.yml.sample group_vars/osds.yml\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" site.yml.sample site.yml\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("Create Red Hat Ceph Docker Registry username and password using the\nbelow information.")])]),t._v(" "),e("p",[t._v("If you do not have a Red Hat Registry Service Account, create one\nusing the "),e("a",{attrs:{href:"https://access.redhat.com/login?redirectTo=https://access.redhat.com/terms-based-registry",target:"_blank",rel:"noopener noreferrer"}},[t._v("Registry Service Account\nwebpage"),e("OutboundLink")],1),t._v(".\nSee the "),e("a",{attrs:{href:"https://access.redhat.com/RegistryAuthentication",target:"_blank",rel:"noopener noreferrer"}},[t._v("Red Hat Container Registry\nAuthentication"),e("OutboundLink")],1),t._v("\nKnowledgebase article for details on how to create and manage tokens.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(358),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("Edit group_vars/all.yml as shown below:")])]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fetch_directory")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/ceph"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ansible"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("keys\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_origin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" repository\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_repository")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" rhcs\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_repository_type")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cdn\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_rhcs_version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("monitor_interface")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" eno3 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" Port interface where IP is configured\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("public_network")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10.0.18.0/16 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" IP address range starting from 1st\nnode\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_docker_registry")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_docker_registry_auth")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_docker_registry_username")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" SERVICE_ACCOUNT_USER_NAME\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_docker_registry_password")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" TOKEN\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dashboard_admin_user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <customised username"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dashboard_admin_password")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <customised password"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_exporter_container_image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io/openshift4/ose"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prometheus"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("exporter"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("v4.1\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grafana_server_group_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" grafana"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grafana_admin_user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grafana_admin_password")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mon_group_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mons\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("osd_group_name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" osds\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grafana_container_image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io/rhceph/rhceph"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("4"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dashboard"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rhel8"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prometheus_container_image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io/openshift4/ose"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prometheus"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.1")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("alertmanager_container_image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io/openshift4/ose"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prometheus"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("alertmanager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.1")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("configure_firewall")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("True")]),t._v("\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[t._v("Edit group_vars/osds.yml as shown below:")])]),t._v(" "),e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("osd_auto_discovery")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" False*\ndevices"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("*\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/sdb*\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/sdc*\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v("If "),e("strong",[t._v("osd_auto_discovery")]),t._v(" is set to True, all the empty\ndisks will be used by the system to create OSD.")])]),t._v(" "),e("ol",{attrs:{start:"6"}},[e("li",[t._v("Create an ansible user with sudo access on all nodes.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" adduser ansible-user\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwd")]),t._v(" ansible-user\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" EOF "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/etc/sudoers.d/ansible-user\n ansible-user ALL "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" NOPASSWD:ALL\n EOF\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" 0440 /etc/sudoers.d/ansible-user\n")])])]),e("ol",{attrs:{start:"7"}},[e("li",[t._v("Generate SSH keys as the ansible user and copy the key to MON & OSD\nnodes.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ssh-keygen\n\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ssh-copy-id ansible-user@"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mon-osd-ip"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("ol",{attrs:{start:"8"}},[e("li",[t._v("Create ~/.ssh/config file and set values for the Hostname and User\noptions for each node in the storage cluster")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" ~/.ssh/config\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Host node1\n  Hostname <mon-1.fqdn>\n  User ansible-user*\n...\n...\nHost node4\n  Hostname <osd-1.fqdn>\n  User ansible-user*\n")])])]),e("ol",{attrs:{start:"9"}},[e("li",[t._v("Run the Ansible playbook for creating Ceph storage and Ceph cluster.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ansible-playbook site.yml -i hosts\n")])])]),e("p",[t._v("Created Ceph storage on any one of OSD nodes.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(359),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"10"}},[e("li",[t._v("Run Ansible playbook for creating Ceph cluster dashboard.")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ansible-playbook dashboard.yml -i hosts\n")])])]),e("p",[e("img",{attrs:{src:a(360),alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("Open Ceph cluster web UI and enter credentials to login")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(361),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"11"}},[e("li",[e("strong",[t._v("Ceph Dash board:")]),t._v(" Cretae rdb pool in Ceph cluster.")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Ceph pool on Ceph cluster dash board: Dash board -> Pools -> Create\nPool")])]),t._v(" "),e("li",[e("p",[t._v("Created Ceph pool on Dash board.")])])]),t._v(" "),e("p",[e("img",{attrs:{src:a(362),alt:""}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(363),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"12"}},[e("li",[t._v("Create openshift-storage namespace. (Dashboard -> Administration ->\nNamespace -> Create Namespace).")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(364),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"13"}},[e("li",[t._v("Create OpenShift Container Storage 4.5 operator. (Dashboard ->\nOperators -> OperatorHub -> openshift-storage (namespace) -> search for\n(OpenShift Container Storage) -> Install).")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v("Select the below options to create OpenShift Container\nStorage operator")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(365),alt:""}})]),t._v(" "),e("p",[e("img",{attrs:{src:a(366),alt:""}})]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Update Channel as stable-4.5")])]),t._v(" "),e("li",[e("p",[t._v("Installation Mode as A specific namespace on the cluster")])]),t._v(" "),e("li",[e("p",[t._v("Installed Namespace as Operator recommended namespace PR\nopenshift-storage. If Namespace openshift-storage does not exist, it\nwill be created during the operator installation.")])]),t._v(" "),e("li",[e("p",[t._v("Enable operator recommended cluster monitoring on this namespace\ncheckbox is selected. This is required for cluster monitoring.")])]),t._v(" "),e("li",[e("p",[t._v("Approval Strategy as Automatic")])])]),t._v(" "),e("ol",{attrs:{start:"14"}},[e("li",[t._v('Create Overview -> openshift-storage (namespace) -> Operator Hub ->\nInstalled Operators -> OpenShift Container Storage (operator) ->\n"Storage Cluster" -> "Create OCS Cluster Service"')])]),t._v(" "),e("p",[e("img",{attrs:{src:a(367),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"15"}},[e("li",[t._v('Select "External" storage mode to integrate external ceph storage\nfor creating ocs cluster by default it shows internal')])]),t._v(" "),e("p",[e("img",{attrs:{src:a(368),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"16"}},[e("li",[t._v('Download "ceph-external-cluster-details-exporter.py" file and place\non any one of OSD nodes.')])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),e("p",[t._v('Python version should be "python 3.x".')])]),t._v(" "),e("ol",{attrs:{start:"17"}},[e("li",[e("p",[t._v("Check the python script")]),t._v(" "),e("p",[e("strong",[t._v("ceph-external-cluster-details-exporter.py")]),t._v(" arguments.")])])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" python3 ceph-external-cluster-details-exporter.py --help\n")])])]),e("ol",{attrs:{start:"18"}},[e("li",[t._v("Execute the below script for integrating Ceph cluster rbd pool into\nOCP cluster for creating OCS cluster.")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("> python3 ceph-external-cluster-details-exporter.py --rbd-pool-name <rbd_pool_name_created_on_ceph_cluster>\n")])])]),e("p",[t._v("Script output as shown below in JSON format.")]),t._v(" "),e("p",[e("img",{attrs:{src:a(369),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"19"}},[e("li",[e("p",[t._v("Save the above command output in a json file.")])]),t._v(" "),e("li",[e("p",[t._v("Click "),e("strong",[t._v("External cluster metadata -> Browse")]),t._v(" to select and upload\nthe json file.")])]),t._v(" "),e("li",[e("p",[t._v("Click on "),e("strong",[t._v("Create")]),t._v(" for integrating external Ceph storage for\ncreating OCS cluster.")])])]),t._v(" "),e("p",[e("img",{attrs:{src:a(370),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"22"}},[e("li",[t._v("Validating OCS cluster by deploying two-tier application WordPress.")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Create wordpress namespace.")])]),t._v(" "),e("li",[e("p",[t._v("Deploy WordPress application under wordpress namespace.")])])]),t._v(" "),e("p",[e("img",{attrs:{src:a(371),alt:""}})]),t._v(" "),e("ol",{attrs:{start:"23"}},[e("li",[t._v("Check all OCS cluster and WordPress application's pods, pv, pvc and\nsc.")])]),t._v(" "),e("ul",[e("li",[t._v("Check sc,pv &pvc of openshift-storage namespace.")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(372),alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("Check pods of openshift-storage namespace.")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(373),alt:""}})]),t._v(" "),e("ul",[e("li",[t._v("Check pvc and pods of wordpess namespace.")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(374),alt:""}})])])}),[],!1,null,null,null);s.default=r.exports}}]);