(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{373:function(t,s,e){t.exports=e.p+"assets/img/Figure136.d5153167.png"},374:function(t,s,e){t.exports=e.p+"assets/img/Figure137.86067227.png"},375:function(t,s,e){t.exports=e.p+"assets/img/Figure139.a71c9c5c.png"},376:function(t,s,e){t.exports=e.p+"assets/img/Figure140.4af77b35.png"},377:function(t,s,e){t.exports=e.p+"assets/img/Figure141.d487aa5a.png"},378:function(t,s,e){t.exports=e.p+"assets/img/Figure142.31b26988.png"},379:function(t,s,e){t.exports=e.p+"assets/img/Figure143.d55fb6d4.png"},380:function(t,s,e){t.exports=e.p+"assets/img/Figure144.363704c4.png"},381:function(t,s,e){t.exports=e.p+"assets/img/Figure145.1075c5b4.png"},382:function(t,s,e){t.exports=e.p+"assets/img/Figure146.fa68ba6d.png"},383:function(t,s,e){t.exports=e.p+"assets/img/Figure147.620ef719.png"},384:function(t,s,e){t.exports=e.p+"assets/img/Figure148.776cb331.png"},385:function(t,s,e){t.exports=e.p+"assets/img/Figure149.820dad61.png"},386:function(t,s,e){t.exports=e.p+"assets/img/Figure150.da0ac770.png"},387:function(t,s,e){t.exports=e.p+"assets/img/Figure151.1acaa0e0.png"},388:function(t,s,e){t.exports=e.p+"assets/img/Figure152.e7335ece.png"},389:function(t,s,e){t.exports=e.p+"assets/img/Figure153.6e3114aa.png"},390:function(t,s,e){t.exports=e.p+"assets/img/Figure154.ee463715.png"},391:function(t,s,e){t.exports=e.p+"assets/img/Figure155.6c45a503.png"},524:function(t,s,e){"use strict";e.r(s);var a=e(42),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"red-hat-ceph-storage-4-setup-in-external-mode-with-ocs-integration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#red-hat-ceph-storage-4-setup-in-external-mode-with-ocs-integration"}},[t._v("#")]),t._v(" Red Hat Ceph Storage 4 Setup in External mode with OCS Integration")]),t._v(" "),a("h2",{attrs:{id:"introduction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[t._v("#")]),t._v(" Introduction")]),t._v(" "),a("p",[t._v("Red Hat OpenShift Container Storage can use an externally hosted Red Hat Ceph Storage cluster as the storage provider. Red Hat Ceph Storage is designed for cloud infrastructure and web-scale object storage. Red Hat Ceph Storage is a scalable, open, software-defined storage platform that combines an enterprise-hardened version of the Ceph storage system with a Ceph management platform, deployment utilities, and support services.")]),t._v(" "),a("p",[t._v("Setting up the Red Hat OpenShift Container Storage in external mode allows an enterprise to disintegrate container setup platform from container compute platform. The disintegration allows on-demand independent growth of storage and compute clusters. Prior to configuring the Red Hat OpenShift Container Storage in external mode the Red hat Ceph Storage pool must be setup and configured appropriately.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(373),alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("Figure 136.")]),t._v(" Red Hat Ceph Storage 4 Setup Solution Layout")]),t._v(" "),a("h2",{attrs:{id:"logical-diagram"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logical-diagram"}},[t._v("#")]),t._v(" Logical Diagram")]),t._v(" "),a("p",[a("img",{attrs:{src:e(374),alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("Figure 137.")]),t._v(" Red Hat Ceph Storage 4 Solution Flow Diagram")]),t._v(" "),a("h2",{attrs:{id:"hardware-requirement"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hardware-requirement"}},[t._v("#")]),t._v(" Hardware Requirement")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("NODE ROLE")]),t._v(" "),a("th",[t._v("QUANTITY")]),t._v(" "),a("th",[t._v("PLATFORM")]),t._v(" "),a("th",[t._v("OS")]),t._v(" "),a("th",[t._v("HARD DISK")]),t._v(" "),a("th",[t._v("CPU")]),t._v(" "),a("th",[t._v("MEM")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("MON")]),t._v(" "),a("td",[t._v("3")]),t._v(" "),a("td",[t._v("Synergy")]),t._v(" "),a("td",[t._v("RHEL 7.7")]),t._v(" "),a("td",[t._v("/dev/sdb – mon")]),t._v(" "),a("td",[t._v("4")]),t._v(" "),a("td",[t._v("16")])]),t._v(" "),a("tr",[a("td",[t._v("OSD")]),t._v(" "),a("td",[t._v("3")]),t._v(" "),a("td",[t._v("Synergy")]),t._v(" "),a("td",[t._v("RHEL 7.7")]),t._v(" "),a("td",[t._v("/dev/sdc – osd")]),t._v(" "),a("td",[t._v("4")]),t._v(" "),a("td",[t._v("16")])]),t._v(" "),a("tr",[a("td",[t._v("ADMIN")]),t._v(" "),a("td",[t._v("1")]),t._v(" "),a("td",[t._v("VM")]),t._v(" "),a("td",[t._v("RHEL 7.7")]),t._v(" "),a("td",[t._v("/dev/sda – os volume")]),t._v(" "),a("td",[t._v("4")]),t._v(" "),a("td",[t._v("16")])])])]),t._v(" "),a("p",[a("strong",[t._v("MON, OSD, MSD & MGR daemons are running on the MON/OSD node.")])]),t._v(" "),a("h2",{attrs:{id:"installation-process"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation-process"}},[t._v("#")]),t._v(" Installation Process")]),t._v(" "),a("ul",[a("li",[t._v("Enable subscriptions on the following nodes.")])]),t._v(" "),a("p",[a("strong",[t._v("ADMIN node:")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('# subscription-manager register\n# subscription-manager refresh\n# subscription-manager list --available --all\n--matches="*Ceph*"\n# subscription-manager attach --pool=<POOL_ID>\n\n# subscription-manager repos --disable=*\n# subscription-manager repos --enable=rhel-7-server-rpms\n# subscription-manager repos --enable=rhel-7-server-extras-rpms\n# subscription-manager repos\n--enable=rhel-7-server-rhceph-4-tools-rpms\n--enable=rhel-7-server-ansible-2.8-rpms\n\n# yum --y update\n# yum install yum-utils vim -y\n# yum-config-manager --disable epel\n')])])]),a("p",[a("strong",[t._v("MON/OSD nodes:")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('# subscription-manager register\n# subscription-manager refresh\n# subscription-manager list --available --all\n--matches="*Ceph*"\n# subscription-manager attach --pool=<POOL_ID>\n\n# subscription-manager repos --disable=*\n# subscription-manager repos --enable=rhel-7-server-rpms\n# subscription-manager repos --enable=rhel-7-server-extras-rpms\n\n#subscription-manager repos\n--enable=rhel-7-server-rhceph-4-osd-rpms\n#subscription-manager repos\n--enable=rhel-7-server-rhceph-4-mon-rpms\n# subscription-manager repos\n--enable=rhel-7-server-rhceph-4-tools-rpms\n\n# yum --y update\n# yum install yum-utils vim -y\n# yum-config-manager --disable epel\n')])])]),a("ul",[a("li",[t._v("Execute the following steps on "),a("strong",[t._v("Admin Node")])])]),t._v(" "),a("ol",[a("li",[t._v("Install ceph-ansible package")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y ceph-ansible\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/share/ceph-ansible\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Create ansible host inventory file for MON, OSD & GRAFANA as shown\nbelow")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" hosts\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[mons]\n<mon-1.fqdn>\n<mon-2.fqdn>\n<mon-3.fqdn>\n\n[osds]\n<osd-1.fqdn>\n<osd-2.fqdn>\n<osd-3.fqdn>\n\n[grafana-server]\n<grafana_server.fqdn>\n")])])]),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /usr/share/ceph-ansible\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" group_vars/all.yml.sample group_vars/all.yml\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" group_vars/osds.yml.sample group_vars/osds.yml\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" site.yml.sample site.yml\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("Create Red Hat Ceph Docker Registry username and password using the\nbelow information.")])]),t._v(" "),a("p",[t._v("If you do not have a Red Hat Registry Service Account, create one\nusing the "),a("a",{attrs:{href:"https://access.redhat.com/login?redirectTo=https://access.redhat.com/terms-based-registry",target:"_blank",rel:"noopener noreferrer"}},[t._v("Registry Service Account\nwebpage"),a("OutboundLink")],1),t._v(".\nSee the "),a("a",{attrs:{href:"https://access.redhat.com/RegistryAuthentication",target:"_blank",rel:"noopener noreferrer"}},[t._v("Red Hat Container Registry\nAuthentication"),a("OutboundLink")],1),t._v("\nKnowledgebase article for details on how to create and manage tokens.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(375),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("Edit group_vars/all.yml as shown below:")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fetch_directory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ~/ceph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("ansible"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("keys\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_origin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" repository\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_repository")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" rhcs\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_repository_type")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cdn\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_rhcs_version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("monitor_interface")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" eno3 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" Port interface where IP is configured\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("public_network")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 10.0.18.0/16 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v(" IP address range starting from 1st\nnode\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_docker_registry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_docker_registry_auth")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_docker_registry_username")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" SERVICE_ACCOUNT_USER_NAME\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ceph_docker_registry_password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" TOKEN\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dashboard_admin_user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <customised username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dashboard_admin_password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <customised password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_exporter_container_image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io/openshift4/ose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("exporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("v4.1\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grafana_server_group_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" grafana"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grafana_admin_user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grafana_admin_password")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mon_group_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mons\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("osd_group_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" osds\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grafana_container_image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io/rhceph/rhceph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("4"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("dashboard"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rhel8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prometheus_container_image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io/openshift4/ose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.1")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("alertmanager_container_image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" registry.redhat.io/openshift4/ose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("alertmanager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.1")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("configure_firewall")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("True")]),t._v("\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("Edit group_vars/osds.yml as shown below:")])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("osd_auto_discovery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" False*\ndevices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("*\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/sdb*\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /dev/sdc*\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),a("p",[t._v("If "),a("strong",[t._v("osd_auto_discovery")]),t._v(" is set to True, all the empty\ndisks will be used by the system to create OSD.")])]),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[t._v("Create an ansible user with sudo access on all nodes.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" adduser ansible-user\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwd")]),t._v(" ansible-user\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v(" EOF "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/etc/sudoers.d/ansible-user\n ansible-user ALL "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" NOPASSWD:ALL\n EOF\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" 0440 /etc/sudoers.d/ansible-user\n")])])]),a("ol",{attrs:{start:"7"}},[a("li",[t._v("Generate SSH keys as the ansible user and copy the key to MON & OSD\nnodes.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ssh-keygen\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ssh-copy-id ansible-user@"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mon-osd-ip"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("ol",{attrs:{start:"8"}},[a("li",[t._v("Create ~/.ssh/config file and set values for the Hostname and User\noptions for each node in the storage cluster")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" ~/.ssh/config\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Host node1\n  Hostname <mon-1.fqdn>\n  User ansible-user*\n...\n...\nHost node4\n  Hostname <osd-1.fqdn>\n  User ansible-user*\n")])])]),a("ol",{attrs:{start:"9"}},[a("li",[t._v("Run the Ansible playbook for creating Ceph storage and Ceph cluster.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ansible-playbook site.yml -i hosts\n")])])]),a("p",[t._v("Created Ceph storage on any one of OSD nodes.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(376),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"10"}},[a("li",[t._v("Run Ansible playbook for creating Ceph cluster dashboard.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ansible-playbook dashboard.yml -i hosts\n")])])]),a("p",[a("img",{attrs:{src:e(377),alt:""}})]),t._v(" "),a("ul",[a("li",[t._v("Open Ceph cluster web UI and enter credentials to login")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(378),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"11"}},[a("li",[a("strong",[t._v("Ceph Dash board:")]),t._v(" Cretae rdb pool in Ceph cluster.")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Ceph pool on Ceph cluster dash board: Dash board -> Pools -> Create\nPool")])]),t._v(" "),a("li",[a("p",[t._v("Created Ceph pool on Dash board.")])])]),t._v(" "),a("p",[a("img",{attrs:{src:e(379),alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:e(380),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"12"}},[a("li",[t._v("Create openshift-storage namespace. (Dashboard -> Administration ->\nNamespace -> Create Namespace).")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(381),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"13"}},[a("li",[t._v("Create OpenShift Container Storage 4.5 operator. (Dashboard ->\nOperators -> OperatorHub -> openshift-storage (namespace) -> search for\n(OpenShift Container Storage) -> Install).")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),a("p",[t._v("Select the below options to create OpenShift Container\nStorage operator")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(382),alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:e(383),alt:""}})]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Update Channel as stable-4.5")])]),t._v(" "),a("li",[a("p",[t._v("Installation Mode as A specific namespace on the cluster")])]),t._v(" "),a("li",[a("p",[t._v("Installed Namespace as Operator recommended namespace PR\nopenshift-storage. If Namespace openshift-storage does not exist, it\nwill be created during the operator installation.")])]),t._v(" "),a("li",[a("p",[t._v("Enable operator recommended cluster monitoring on this namespace\ncheckbox is selected. This is required for cluster monitoring.")])]),t._v(" "),a("li",[a("p",[t._v("Approval Strategy as Automatic")])])]),t._v(" "),a("ol",{attrs:{start:"14"}},[a("li",[t._v('Create Overview -> openshift-storage (namespace) -> Operator Hub ->\nInstalled Operators -> OpenShift Container Storage (operator) ->\n"Storage Cluster" -> "Create OCS Cluster Service"')])]),t._v(" "),a("p",[a("img",{attrs:{src:e(384),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"15"}},[a("li",[t._v('Select "External" storage mode to integrate external ceph storage\nfor creating ocs cluster by default it shows internal')])]),t._v(" "),a("p",[a("img",{attrs:{src:e(385),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"16"}},[a("li",[t._v('Download "ceph-external-cluster-details-exporter.py" file and place\non any one of OSD nodes.')])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),a("p",[t._v('Python version should be "python 3.x".')])]),t._v(" "),a("ol",{attrs:{start:"17"}},[a("li",[a("p",[t._v("Check the python script")]),t._v(" "),a("p",[a("strong",[t._v("ceph-external-cluster-details-exporter.py")]),t._v(" arguments.")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" python3 ceph-external-cluster-details-exporter.py --help\n")])])]),a("ol",{attrs:{start:"18"}},[a("li",[t._v("Execute the below script for integrating Ceph cluster rbd pool into\nOCP cluster for creating OCS cluster.")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> python3 ceph-external-cluster-details-exporter.py --rbd-pool-name <rbd_pool_name_created_on_ceph_cluster>\n")])])]),a("p",[t._v("Script output as shown below in JSON format.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(386),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"19"}},[a("li",[a("p",[t._v("Save the above command output in a json file.")])]),t._v(" "),a("li",[a("p",[t._v("Click "),a("strong",[t._v("External cluster metadata -> Browse")]),t._v(" to select and upload\nthe json file.")])]),t._v(" "),a("li",[a("p",[t._v("Click on "),a("strong",[t._v("Create")]),t._v(" for integrating external Ceph storage for\ncreating OCS cluster.")])])]),t._v(" "),a("p",[a("img",{attrs:{src:e(387),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"22"}},[a("li",[t._v("Validating OCS cluster by deploying two-tier application WordPress.")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Create wordpress namespace.")])]),t._v(" "),a("li",[a("p",[t._v("Deploy WordPress application under wordpress namespace.")])])]),t._v(" "),a("p",[a("img",{attrs:{src:e(388),alt:""}})]),t._v(" "),a("ol",{attrs:{start:"23"}},[a("li",[t._v("Check all OCS cluster and WordPress application's pods, pv, pvc and\nsc.")])]),t._v(" "),a("ul",[a("li",[t._v("Check sc,pv &pvc of openshift-storage namespace.")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(389),alt:""}})]),t._v(" "),a("ul",[a("li",[t._v("Check pods of openshift-storage namespace.")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(390),alt:""}})]),t._v(" "),a("ul",[a("li",[t._v("Check pvc and pods of wordpess namespace.")])]),t._v(" "),a("p",[a("img",{attrs:{src:e(391),alt:""}})])])}),[],!1,null,null,null);s.default=r.exports}}]);