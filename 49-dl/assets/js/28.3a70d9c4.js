(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{532:function(e,o,c){"use strict";c.r(o);var r=c(54),a=Object(r.a)({},(function(){var e=this,o=e.$createElement,c=e._self._c||o;return c("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[c("h1",{attrs:{id:"load-balancer"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#load-balancer"}},[e._v("#")]),e._v(" Load Balancer")]),e._v(" "),c("p",[e._v("Red Hat OpenShift Container Platform 4.9 uses an external load balancer to communicate from outside the cluster with services running inside the cluster. This section assumes that there is a load balancer available within the deployment environment and is available for use. This solution was developed using "),c("strong",[e._v("HA Proxy")]),e._v(", an open source solution with one (1) virtual machine for load balancing functionality.")]),e._v(" "),c("p",[e._v("This section covers its configuration. In a production environment, Hewlett Packard Enterprise recommends the use of enterprise load balancing such as F5 Networks Big-IP and its associated products.")]),e._v(" "),c("h4",{attrs:{id:"install-and-configure-haproxy"}},[c("a",{staticClass:"header-anchor",attrs:{href:"#install-and-configure-haproxy"}},[e._v("#")]),e._v(" Install and Configure HAProxy")]),e._v(" "),c("p",[e._v("Run below command for installing haproxy")]),e._v(" "),c("p",[e._v("$ yum -y install haproxy")]),e._v(" "),c("p",[e._v("The following entries are made in the haproxy.cfg file.")]),e._v(" "),c("p",[e._v("Sample haproxy.cfg file")]),e._v(" "),c("p",[e._v("#---------------------------------------------------------------------\n# static backend for serving up images, stylesheets and such\n#---------------------------------------------------------------------\n#backend static\n# balance roundrobin\n# server static 127.0.0.1:4331 check\n#---------------------------------------------------------------------\n# round robin balancing between the various backends\n#---------------------------------------------------------------------")]),e._v(" "),c("p",[e._v("frontend ocp4-kubernetes-api-server")]),e._v(" "),c("p",[c("code"),e._v("bind *:6443")]),e._v(" "),c("p",[c("code"),e._v("default_backend ocp4-kubernetes-api-server")]),e._v(" "),c("p",[c("code"),e._v("mode tcp")]),e._v(" "),c("p",[c("code"),e._v("option tcplog")]),e._v(" "),c("p",[e._v("backend ocp4-kubernetes-api-server\n"),c("code"),e._v("mode tcp\n"),c("code"),e._v("balance source\n"),c("code"),e._v("server bootstrap bootstrap.ocp.pxelocal.local:6443 check\n"),c("code"),e._v("server master01 master01.ocp.pxelocal.local:6443 check\n"),c("code"),e._v("server master02 master02.ocp.pxelocal.local:6443 check\n"),c("code"),e._v("server master03 master03.ocp.pxelocal.local:6443 check")]),e._v(" "),c("p",[e._v("frontend ocp4-machine-config-server68")]),e._v(" "),c("p",[c("code"),e._v("bind *:22623")]),e._v(" "),c("p",[c("code"),e._v("default_backend ocp4-machine-config-server")]),e._v(" "),c("p",[c("code"),e._v("mode tcp")]),e._v(" "),c("p",[c("code"),e._v("option tcplog")]),e._v(" "),c("p",[e._v("backend ocp4-machine-config-server\n"),c("code"),e._v("balance source\n"),c("code"),e._v("mode tcp\n"),c("code"),e._v("server bootstrap bootstrap.ocp.pxelocal.local:22623 check\n"),c("code"),e._v("server master01 master01.ocp.pxelocal.local:22623 check\n"),c("code"),e._v("server master02 master02.ocp.pxelocal.local:22623 check\n"),c("code"),e._v("server master03 master03.ocp.pxelocal.local:22623 check")]),e._v(" "),c("p",[e._v("frontend ocp4-router-http")]),e._v(" "),c("p",[c("code"),e._v("bind *:80")]),e._v(" "),c("p",[c("code"),e._v("default_backend ocp4-router-http")]),e._v(" "),c("p",[c("code"),e._v("mode tcp")]),e._v(" "),c("p",[c("code"),e._v("option tcplog")]),e._v(" "),c("p",[e._v("backend ocp4-router-http\n"),c("code"),e._v("balance source\n"),c("code"),e._v("mode tcp\n"),c("code"),e._v("server worker03 worker03.ocp.pxelocal.local:80 check\n"),c("code"),e._v("server worker04 worker04.ocp.pxelocal.local:80 check\n"),c("code"),e._v("server worker01 worker01.ocp.pxelocal.local:80 check\n"),c("code"),e._v("server worker02 worker02.ocp.pxelocal.local:80 check")]),e._v(" "),c("p",[e._v("# if creating a cluster with only master nodes to begin with and later adding the worker nodes, master nodes should be added in this section instead of worker nodes. Once all the worker nodes are added into the cluster, this configuration needs to be updated with the worker nodes.\n"),c("code"),e._v("# server master01 master01.ocp.pxelocal.local:80 check\n"),c("code"),e._v("# server master02 master02.ocp.pxelocal.local:80 check\n"),c("code"),e._v("# server master03 master03.ocp.pxelocal.local:80 check")]),e._v(" "),c("p",[e._v("frontend ocp4-router-https")]),e._v(" "),c("p",[c("code"),e._v("bind *:443")]),e._v(" "),c("p",[c("code"),e._v("default_backend ocp4-router-https")]),e._v(" "),c("p",[c("code"),e._v("mode tcp")]),e._v(" "),c("p",[c("code"),e._v("option tcplog")]),e._v(" "),c("p",[c("code"),e._v("backend ocp4-router-https\n"),c("code"),e._v("balance source\n"),c("code"),e._v("mode tcp\n"),c("code"),e._v("server worker03 worker03.ocp.pxelocal.local:443 check\n"),c("code"),e._v("server worker04 worker04.ocp.pxelocal.local:443 check\n"),c("code"),e._v("server worker01 worker01.ocp.pxelocal.local:443 check\n"),c("code"),e._v("server worker01 worker02.ocp.pxelocal.local:443 check")]),e._v(" "),c("p",[e._v("# if creating a cluster with only master nodes to begin with and later adding the worker nodes, master nodes should be added in this section instead of worker nodes. Once all the worker nodes are added into the cluster, this configuration needs to be updated with the worker nodes.\n"),c("code"),e._v("# server master01 master01.ocp.pxelocal.local:443 check\n"),c("code"),e._v("# server master02 master02.ocp.pxelocal.local:443 check\n"),c("code"),e._v("# server master03 master03.ocp.pxelocal.local:443 check")]),e._v(" "),c("p",[c("strong",[e._v("NOTE")])]),e._v(" "),c("p",[e._v("The load balancer configuration should contain values that are aligned to the installation environment.")])])}),[],!1,null,null,null);o.default=a.exports}}]);