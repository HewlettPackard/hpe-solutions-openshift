(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{504:function(t,e,o){t.exports=o.p+"assets/img/figure161.f6142613.png"},534:function(t,e,o){"use strict";o.r(e);var i=o(54),s=Object(i.a)({},(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[i("h1",{attrs:{id:"red-hat-openshift-container-platform-cluster-deployment"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#red-hat-openshift-container-platform-cluster-deployment"}},[t._v("#")]),t._v(" Red Hat OpenShift Container Platform Cluster deployment")]),t._v(" "),i("p",[t._v("This section describes the process to deploy Red Hat OpenShift Container Platform 4.")]),t._v(" "),i("h1",{attrs:{id:"pre-requisites"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisites"}},[t._v("#")]),t._v(" Pre-requisites")]),t._v(" "),i("ul",[i("li",[t._v("Bootstrap node should be up.")]),t._v(" "),i("li",[t._v("Master nodes should be up and ready.")])]),t._v(" "),i("h1",{attrs:{id:"deploying-an-openshift-cluster"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#deploying-an-openshift-cluster"}},[t._v("#")]),t._v(" Deploying an OpenShift cluster")]),t._v(" "),i("p",[t._v("This section covers the steps to deploy a Red Hat OpenShift Container Platform 4 cluster with master nodes and worker nodes running RHCOS. After the operating system is installed on the nodes, verify the installation and then perform the following steps:")]),t._v(" "),i("ol",[i("li",[t._v("Login to the installer VM as non-root user.")]),t._v(" "),i("li",[t._v("Execute the following command to bootstrap the nodes.")])]),t._v(" "),i("p",[t._v("$ $BASE_DIR/installer/library/openshift_components/openshift-install wait-for bootstrap-complete --log-level=debug")]),t._v(" "),i("p",[i("strong",[t._v("RESULT")])]),t._v(" "),i("p",[t._v("DEBUG OpenShift Installer v4.9")]),t._v(" "),i("p",[t._v("DEBUG Built from commit 425e4ff0037487e32571258640b39f56d5ee5572")]),t._v(" "),i("p",[t._v("INFO Waiting up to 30m0s for the Kubernetes API at https://api.ocp.pxelocal.local:6443...")]),t._v(" "),i("p",[t._v("INFO API v1.14.6+76aeb0c up")]),t._v(" "),i("p",[t._v("INFO Waiting up to 30m0s for bootstrapping to complete...")]),t._v(" "),i("p",[t._v("DEBUG Bootstrap status: complete")]),t._v(" "),i("p",[t._v("INFO It is now safe to remove the bootstrap resources")]),t._v(" "),i("p",[i("strong",[t._v("NOTE")])]),t._v(" "),i("p",[t._v("You can shut down or remove the bootstrap node after the completion of step 1 and step 2.")]),t._v(" "),i("ol",[i("li",[t._v("Run the following command to append the kubeconfig path to environment variables.")])]),t._v(" "),i("p",[t._v("$ export KUBECONFIG=$BASE_DIR/installer/ignitions/auth/kubeconfig")]),t._v(" "),i("ol",[i("li",[t._v("Run the following command to append the oc utility path to environment variables.")])]),t._v(" "),i("p",[t._v("$ export PATH=$PATH:$BASE_DIR/installer/library/openshift_components")]),t._v(" "),i("ol",[i("li",[t._v("Provide the PV storage for the registry. Execute the following command to set the image registry storage to an empty directory.")])]),t._v(" "),i("p",[t._v('$ oc patch configs.imageregistry.operator.openshift.io cluster --type merge --patch \'{"spec":{"storage":{"emptyDir":{}}}}\'')]),t._v(" "),i("ol",[i("li",[i("p",[t._v("Execute the following command to complete the RedHat OpenShift Container Platform 4 cluster installation.")]),t._v(" "),i("p",[t._v("$ $BASE_DIR/installer/library/openshift_components/openshift-install wait-for install-complete --log-level=debug")]),t._v(" "),i("p",[t._v("The result should appear like what appears below.")]),t._v(" "),i("p",[t._v("DEBUG OpenShift Installer v4.9")]),t._v(" "),i("p",[t._v("DEBUG Built from commit 6ed04f65b0f6a1e11f10afe658465ba8195ac459")]),t._v(" "),i("p",[t._v("INFO Waiting up to 30m0s for the cluster at https://api.rrocp.pxelocal.local:6443 to initialize...")]),t._v(" "),i("p",[t._v("DEBUG Still waiting for the cluster to initialize: Working towards 4.9: 99% complete")]),t._v(" "),i("p",[t._v("DEBUG Still waiting for the cluster to initialize: Working towards 4.9: 99% complete, waiting on authentication, console,image-registry")]),t._v(" "),i("p",[t._v("DEBUG Still waiting for the cluster to initialize: Working towards 4.9: 99% complete")]),t._v(" "),i("p",[t._v("DEBUG Still waiting for the cluster to initialize: Working towards 4.9: 100% complete, waiting on image-registry")]),t._v(" "),i("p",[t._v("DEBUG Still waiting for the cluster to initialize: Cluster operator image-registry is still updating")]),t._v(" "),i("p",[t._v("DEBUG Still waiting for the cluster to initialize: Cluster operator image-registry is still updating")]),t._v(" "),i("p",[t._v("DEBUG Cluster is initialized")]),t._v(" "),i("p",[t._v("INFO Waiting up to 10m0s for the openshift-console route to be created...")]),t._v(" "),i("p",[t._v("DEBUG Route found in openshift-console namespace: console")]),t._v(" "),i("p",[t._v("DEBUG Route found in openshift-console namespace: downloads")]),t._v(" "),i("p",[t._v("DEBUG OpenShift console route is created")]),t._v(" "),i("p",[t._v("INFO Install complete!")]),t._v(" "),i("p",[t._v("INFO To access the cluster as the system:admin user when using 'oc', run 'export KUBECONFIG=/opt/hpe/solutions/ocp/hpe-solutions-openshift/DL/scalable/installer/library/ignitions/auth/kubeconfig'")]),t._v(" "),i("p",[t._v("INFO Access the OpenShift web-console here: https://console-openshift-console.apps.ocp.pxelocal.local")]),t._v(" "),i("p",[t._v("INFO Login to the console with user: kubeadmin, password: a6hKv-okLUA-Q9p3q-UXLc3")]),t._v(" "),i("p",[i("strong",[t._v("NOTE")])]),t._v(" "),i("p",[t._v("Make a note of the cluster URL and the username for future access.")]),t._v(" "),i("p",[t._v("If the password is lost or forgotten, view the file kubeadmin-password located in the installer machine at "),i("em",[t._v("$BASE_DIR/installer/library/ignitions/auth/.")])])])]),t._v(" "),i("p",[i("strong",[t._v("Figure 13")]),t._v(" shows the OpenShift Container Platform console view upon successful deployment.")]),t._v(" "),i("p",[i("img",{attrs:{src:o(504),alt:""}}),t._v(" "),i("strong",[t._v("Figure 13.")]),t._v(" OpenShift Web Console login screen")])])}),[],!1,null,null,null);e.default=s.exports}}]);