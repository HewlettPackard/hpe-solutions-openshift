(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{353:function(e,t,r){e.exports=r.p+"assets/img/figure7.f87d199e.png"},354:function(e,t,r){e.exports=r.p+"assets/img/figure8.8601f6e8.png"},355:function(e,t,r){e.exports=r.p+"assets/img/figure9.f87d199e.png"},356:function(e,t,r){e.exports=r.p+"assets/img/figure10.0be72d8b.png"},357:function(e,t,r){e.exports=r.p+"assets/img/figure11.a124e3ac.png"},358:function(e,t,r){e.exports=r.p+"assets/img/figure12.2926a866.png"},359:function(e,t,r){e.exports=r.p+"assets/img/figure13.80530807.png"},360:function(e,t,r){e.exports=r.p+"assets/img/figure95.d3f7de83.png"},361:function(e,t,r){e.exports=r.p+"assets/img/figure96.bf0308b6.png"},362:function(e,t,r){e.exports=r.p+"assets/img/figure14.0b0e0d7d.png"},363:function(e,t,r){e.exports=r.p+"assets/img/figure15.3406502d.png"},364:function(e,t,r){e.exports=r.p+"assets/img/figure16.f1b27963.png"},365:function(e,t,r){e.exports=r.p+"assets/img/figure17.bbbf3e86.png"},366:function(e,t,r){e.exports=r.p+"assets/img/figure18.454cc20d.png"},367:function(e,t,r){e.exports=r.p+"assets/img/figure19.38e44941.png"},368:function(e,t,r){e.exports=r.p+"assets/img/figure20.31c93c34.png"},369:function(e,t,r){e.exports=r.p+"assets/img/figure21.7e5abf6b.png"},370:function(e,t,r){e.exports=r.p+"assets/img/figure22.2cd2f198.png"},381:function(e,t,r){"use strict";r.r(t);var a=r(28),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"cabling-the-hpe-synergy-12000-frame-and-hpe-virtual-connect-40gb-se-f8-modules-for-hpe-synergy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cabling-the-hpe-synergy-12000-frame-and-hpe-virtual-connect-40gb-se-f8-modules-for-hpe-synergy"}},[e._v("#")]),e._v(" Cabling the HPE Synergy 12000 Frame and HPE Virtual Connect 40Gb SE F8 Modules for HPE Synergy")]),e._v(" "),a("p",[e._v("This section shows the physical cabling between frames, Virtual Connect modules and solution switching. It is intended to provide an understanding of how the infrastructure was interconnected during testing and to serve as a guide on which the installation user can base their configuration.")]),e._v(" "),a("p",[e._v("Figure 7 describes the cabling configuration of the three (3) HPE Synergy 12000 Frames as well as the HPE FlexFabric 5945 Switches and Intelligent Resilient Fabric (IRF) within the context of this solution. These cables carry frame management, inter-frame and interconnect traffic between frames.")]),e._v(" "),a("p",[a("img",{attrs:{src:r(353),alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("Figure 7.")]),e._v(" Frame and switch cabling within the solution")]),e._v(" "),a("h2",{attrs:{id:"cabling-the-hpe-synergy-12000-frame-to-fibre-channel-5945-switch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cabling-the-hpe-synergy-12000-frame-to-fibre-channel-5945-switch"}},[e._v("#")]),e._v(" Cabling the HPE Synergy 12000 Frame to Fibre Channel 5945 switch")]),e._v(" "),a("p",[e._v("HPE 3PAR StoreServ 8440 Storage provides shared and dedicated storage for a variety of purposes within this solution including housing virtual machines and persistent volume. Figure 8 shows the cabling of the HPE Synergy 12000 frames to the HPE Fibre Channel switching utilized in this solution.")]),e._v(" "),a("p",[a("img",{attrs:{src:r(354),alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("Figure 8.")]),e._v(" Cabling of HPE Synergy interconnects and HPE SN6600B switching")]),e._v(" "),a("p",[e._v("Table 10 describes the cabling from the HPE Synergy 12000 Frames to the HPE SN6600B Fibre Channel switches.")]),e._v(" "),a("p",[a("strong",[e._v("Table 10.")]),e._v(" Cabling between HPE Synergy and HPE SN6600B switching")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("| Source Port (Frame) | Destination Port (Switch)  |\n| --------------------------- | --------------------------- |\n| Frame 1, ICM 2, Port 1 | SAN Switch A, Port 10|\n| Frame 1, ICM 2, Port 2 | SAN Switch A, Port 11|\n| Frame 1, ICM 2, Port 3 | SAN Switch A, Port 16|\n| Frame 1, ICM 2, Port 4 | SAN Switch A, Port 17|\n| Frame 1, ICM 5, Port 1 | SAN Switch B, Port 10|\n| Frame 1, ICM 5, Port 2 | SAN Switch B, Port 11|\n| Frame 1, ICM 5, Port 3 | SAN Switch B, Port 16|\n| Frame 1, ICM 5, Port 4 | SAN Switch B, Port 17|\n| Frame 2, ICM 2, Port 1 | SAN Switch A, Port 14|\n| Frame 2, ICM 2, Port 2 | SAN Switch A, Port 15|\n| Frame 2, ICM 2, Port 3 | SAN Switch A, Port 20|\n| Frame 2, ICM 2, Port 4 | SAN Switch A, Port 21|\n| Frame 2, ICM 5, Port 1 | SAN Switch B, Port 14|\n| Frame 2, ICM 5, Port 2 | SAN Switch B, Port 15|\n| Frame 2, ICM 5, Port 3 | SAN Switch B, Port 20|\n| Frame 2, ICM 5, Port 4 | SAN Switch B, Port 21|\n| Frame 3, ICM 2, Port 1 | SAN Switch A, Port 18|\n| Frame 3, ICM 2, Port 2 | SAN Switch A, Port 19|\n| Frame 3, ICM 2, Port 3 | SAN Switch A, Port 22|\n| Frame 3, ICM 2, Port 4 | SAN Switch A, Port 23|\n| Frame 3, ICM 2, Port 4 | SAN Switch A, Port 23|\n| Frame 3, ICM 5, Port 1 | SAN Switch B, Port 18|\n| Frame 3, ICM 5, Port 2 | SAN Switch B, Port 19|\n| Frame 3, ICM 5, Port 3 | SAN Switch B, Port 22|\n| Frame 3, ICM 5, Port 4 | SAN Switch B, Port 23|\n")])])]),a("p",[e._v("Table 11 describes the connectivity of the HPE 3PAR StoreServ 8440 controllers to the HPE SN6600B SAN switching.")]),e._v(" "),a("p",[a("strong",[e._v("Table 11.")]),e._v(" HPE 3PAR StoreServ 8440 Controller to SAN")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("| Source Port (HPE 3PAR)| Destination Port (Switch)  |\n| --------------------------- | --------------------------- |\n| Node 0, S2P1 | SAN Switch A, Port 8 |\n| Node 0, S2P2 | SAN Switch B, Port 8 |\n| Node 1, S2P1 | SAN Switch A, Port 12|\n| Node 1, S2P2 | SAN Switch B, Port 12|\n| Node 2, S2P1 | SAN Switch A, Port 9 |\n| Node 2, S2P2 | SAN Switch B, Port 9 |\n| Node 3, S2P1 | SAN Switch A, Port 13|\n| Node 3, S2P2 | SAN Switch B, Port 13|\n")])])]),a("h2",{attrs:{id:"cabling-between-hpe-synergy-12000-frame-to-3par-5945-switch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cabling-between-hpe-synergy-12000-frame-to-3par-5945-switch"}},[e._v("#")]),e._v(" Cabling between HPE Synergy 12000 Frame to 3PAR 5945 switch")]),e._v(" "),a("p",[e._v("The HPE 3PAR StoreServ 8440 Storage used in this solution provides shared and dedicated storage for a variety of purposes within this solution including virtual machine hosting, registry storage, and persistent volume for containers.")]),e._v(" "),a("h3",{attrs:{id:"hpe-nimble-iscsi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hpe-nimble-iscsi"}},[e._v("#")]),e._v(" HPE Nimble iSCSI")]),e._v(" "),a("p",[e._v("A HPE Nimble Storage AF40 array provides shared and dedicated storage for a variety of purposes within this solution.")]),e._v(" "),a("p",[e._v("Figure 9 describes the cabling configuration of the three (3) HPE Synergy 12000 Frames as well as the HPE FlexFabric 5945 Switches and Intelligent Resilient Fabric (IRF) within the context of this solution. These cables carry frame management, inter-frame and interconnect traffic between frames.")]),e._v(" "),a("p",[a("img",{attrs:{src:r(355),alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("Figure 9.")]),e._v(" Frame and switch cabling within the solution")]),e._v(" "),a("p",[e._v("Figure 10 shows the cabling of HPE Synergy Frames to the network switches. At the lowest level, there are four (4) 40GbE connections dedicated to carrying redundant, production network traffic to the first layer switch where it is further distributed.\niSCSI traffic is separated into two (2) VLANs and is carried to the first network switch pair over two (2) 40GbE links per VLAN. Unlike the Ethernet traffic which is distributed between the switches, each iSCSI VLAN is sent directly to one switch configured with a pair of access ports.")]),e._v(" "),a("p",[a("img",{attrs:{src:r(356),alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("Figure 10.")]),e._v(" Cabling of the HPE Synergy interconnects to the HPE FlexFabric 5945 switches")]),e._v(" "),a("p",[e._v("Figure 11 shows the cabling of the HPE Nimble Storage AF40 to the HPE switching utilized in this solution. Note that this diagram shows the storage and switching in the same rack to provide clarity. As implemented for this solution, the switching resided in the HPE Synergy rack. The orange and purple wires in the figure represent the separate iSCSI VLANs.")]),e._v(" "),a("p",[a("img",{attrs:{src:r(357),alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("Figure 11.")]),e._v(" Cabling of the HPE Nimble Storage arrays to the HPE FF 5940 switches")]),e._v(" "),a("h3",{attrs:{id:"networking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#networking"}},[e._v("#")]),e._v(" Networking")]),e._v(" "),a("p",[e._v("Figure 12 documents the cabling of the solution from the HPE Virtual Connect SE 40 GB modules to the switches. All egressing Ethernet networks are carried on a single bridge-aggregation group (BAGG). Top of rack switching was used in the creation of this solution, but end of row switching is equally effective in HPE Synergy environments and can reduce overall solution costs by reducing the number of physical switches.")]),e._v(" "),a("p",[a("img",{attrs:{src:r(358),alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("Figure 12.")]),e._v(" Network cabling from the HPE Synergy 12000 Frames to the switches")]),e._v(" "),a("p",[e._v("Table 12 describes the configuration of the network as defined within HPE OneView for HPE Synergy and the bandwidth associated with each network. Network is carried outbound on a single BAGG except the Synergy Management network.")]),e._v(" "),a("p",[a("strong",[e._v("Table 12.")]),e._v(" Network defined within HPE OneView for HPE Synergy")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Network Name")]),e._v(" "),a("th",[e._v("Type")]),e._v(" "),a("th",[e._v("VLAN Number")]),e._v(" "),a("th",[e._v("Purpose")]),e._v(" "),a("th",[e._v("Requested Bandwidth (Gb)")]),e._v(" "),a("th",[e._v("Maximum Bandwidth (Gb)")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Management")]),e._v(" "),a("td",[e._v("Ethernet")]),e._v(" "),a("td",[e._v("1193")]),e._v(" "),a("td",[e._v("Solution management")]),e._v(" "),a("td",[e._v("5")]),e._v(" "),a("td",[e._v("20")])]),e._v(" "),a("tr",[a("td",[e._v("Data_Center")]),e._v(" "),a("td",[e._v("Ethernet")]),e._v(" "),a("td",[e._v("2193")]),e._v(" "),a("td",[e._v("Application access and authentication")]),e._v(" "),a("td",[e._v("10")]),e._v(" "),a("td",[e._v("20")])]),e._v(" "),a("tr",[a("td",[e._v("iSCSI_VLAN_A")]),e._v(" "),a("td",[e._v("Ethernet")]),e._v(" "),a("td",[e._v("3193")]),e._v(" "),a("td",[e._v("iSCSI_VLAN_A")]),e._v(" "),a("td",[e._v("10")]),e._v(" "),a("td",[e._v("40")])]),e._v(" "),a("tr",[a("td",[e._v("iSCSI_VLAN_B")]),e._v(" "),a("td",[e._v("Ethernet")]),e._v(" "),a("td",[e._v("3194")]),e._v(" "),a("td",[e._v("iSCSI_VLAN_A")]),e._v(" "),a("td",[e._v("10")]),e._v(" "),a("td",[e._v("40")])])])]),e._v(" "),a("p",[e._v("Table 13 explains the cabling of the Virtual Connect interconnect modules to the HPE FlexFabric 5945 switching.")]),e._v(" "),a("p",[a("strong",[e._v("Table 13.")]),e._v(" Networks used in this solution")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Uplink Set")]),e._v(" "),a("th",[e._v("Synergy Source")]),e._v(" "),a("th",[e._v("Switch Destination")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Network")]),e._v(" "),a("td",[e._v("Enclosure 1 Port Q3")]),e._v(" "),a("td",[e._v("FortyGigE1/1/1")])]),e._v(" "),a("tr",[a("td",[e._v("Enclosure 1 Port Q4")]),e._v(" "),a("td",[e._v("FortyGigE2/1/1")]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("Enclosure 2 Port Q3")]),e._v(" "),a("td",[e._v("FortyGigE1/1/2")]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("Enclosure 2 Port Q4")]),e._v(" "),a("td",[e._v("FortyGigE2/1/2")]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("iSCSI_SAN_A")]),e._v(" "),a("td",[e._v("Enclosure 1 Port Q5")]),e._v(" "),a("td",[e._v("FortyGigE1/1/5")])]),e._v(" "),a("tr",[a("td",[e._v("Enclosure 1 Port Q6")]),e._v(" "),a("td",[e._v("FortyGigE1/1/6")]),e._v(" "),a("td")]),e._v(" "),a("tr",[a("td",[e._v("iSCSI_SAN_B")]),e._v(" "),a("td",[e._v("Enclosure 2 Port Q5")]),e._v(" "),a("td",[e._v("FortyGigE2/1/5")])]),e._v(" "),a("tr",[a("td",[e._v("Enclosure 2 Port Q6")]),e._v(" "),a("td",[e._v("FortyGigE2/1/6")]),e._v(" "),a("td")])])]),e._v(" "),a("p",[e._v("Utilizing HPE Synergy, the network within the solution can traverse the HPE Synergy infrastructure in an east-west fashion across high speed, low latency links both within and between HPE Virtual Connect Modules. The communication between the Red Hat OpenShift Container Platform 4 management pieces remains within the HPE Synergy Frames.")]),e._v(" "),a("h2",{attrs:{id:"configuring-the-solution-switching"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuring-the-solution-switching"}},[e._v("#")]),e._v(" Configuring the solution switching")]),e._v(" "),a("p",[e._v("The solution described in this document utilized HPE FlexFabric 5945 switches. The HPE FlexFabric 5945 switches are configured according to the configuration parameters found later in this section. The switches should be configured with an HPE Intelligent Resilient Framework (IRF). To understand the process of configuring IRF, refer the HPE FlexFabric 5945 Switch Series Installation Guide at "),a("a",{attrs:{href:"https://support.hpe.com/hpsc/doc/public/display?sp4ts.oid=null&docLocale=en_US&docId=emr_na-c05212026",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://support.hpe.com/hpsc/doc/public/display?sp4ts.oid=null&docLocale=en_US&docId=emr_na-c05212026"),a("OutboundLink")],1),e._v(". This guide may also be used to understand the initial installation of switching, creation of user accounts and access methods. The remainder of this section is built with the assumption that the switch has been installed, configured for IRF, hardened, and is accessible over SSH.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("p",[e._v("HPE Synergy facilitates the use of end of row switching to reduce switch and port counts in the context of the solution. If end of row switching is chosen, then this section should be used as guidance for how to route network traffic outside of the HPE Synergy Frames.")])]),e._v(" "),a("h3",{attrs:{id:"physical-cabling"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#physical-cabling"}},[e._v("#")]),e._v(" Physical cabling")]),e._v(" "),a("p",[e._v("Table 14 is a map of source ports to ports on the HPE FlexFabric 5945 switches.")]),e._v(" "),a("p",[a("strong",[e._v("Table 14.")]),e._v(" HPE FlexFabric 5945 port map")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Source Port")]),e._v(" "),a("th",[e._v("Switch Port")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Nimble Management Port Eth1")]),e._v(" "),a("td",[e._v("TenGigE1/2/17")])]),e._v(" "),a("tr",[a("td",[e._v("Nimble Controller A TG1")]),e._v(" "),a("td",[e._v("TenGigE1/2/13")])]),e._v(" "),a("tr",[a("td",[e._v("Nimble Controller A TG2")]),e._v(" "),a("td",[e._v("TenGigE2/2/13")])]),e._v(" "),a("tr",[a("td",[e._v("Nimble Controller B TG1")]),e._v(" "),a("td",[e._v("TenGigE1/2/14")])]),e._v(" "),a("tr",[a("td",[e._v("Nimble Controller B TG2")]),e._v(" "),a("td",[e._v("TenGigE2/2/14")])]),e._v(" "),a("tr",[a("td",[e._v("Nimble Replication Port Eth2")]),e._v(" "),a("td",[e._v("TenGigE1/2/15")])]),e._v(" "),a("tr",[a("td",[e._v("Virtual Connect Frame U30, Q3")]),e._v(" "),a("td",[e._v("FortyGigE1/1/1")])]),e._v(" "),a("tr",[a("td",[e._v("Virtual Connect Frame U30, Q4")]),e._v(" "),a("td",[e._v("FortyGigE2/1/1")])]),e._v(" "),a("tr",[a("td",[e._v("Virtual Connect Frame U30, Q5")]),e._v(" "),a("td",[e._v("FortyGigE1/1/5")])]),e._v(" "),a("tr",[a("td",[e._v("Virtual Connect Frame U30, Q6")]),e._v(" "),a("td",[e._v("FortyGigE1/1/6")])]),e._v(" "),a("tr",[a("td",[e._v("Virtual Connect Frame U40, Q3")]),e._v(" "),a("td",[e._v("FortyGigE1/1/2")])]),e._v(" "),a("tr",[a("td",[e._v("Virtual Connect Frame U40, Q4")]),e._v(" "),a("td",[e._v("FortyGigE2/1/2")])]),e._v(" "),a("tr",[a("td",[e._v("Virtual Connect Frame U40, Q5")]),e._v(" "),a("td",[e._v("FortyGigE2/1/5")])]),e._v(" "),a("tr",[a("td",[e._v("Virtual Connect Frame U40, Q6")]),e._v(" "),a("td",[e._v("FortyGigE2/1/6")])]),e._v(" "),a("tr",[a("td",[e._v("To Upstream Switching")]),e._v(" "),a("td",[e._v("Customer Choice")])])])]),e._v(" "),a("p",[e._v("It is recommended that the installation user logs on to the switch post-configuration and provides a description for each of these ports.")]),e._v(" "),a("h3",{attrs:{id:"network-definition"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-definition"}},[e._v("#")]),e._v(" Network definition")]),e._v(" "),a("p",[e._v("There are multiple networks defined in this solution:")]),e._v(" "),a("ul",[a("li",[a("p",[a("strong",[e._v("Management Network")]),e._v(" : This network facilitates the management of hardware and software interfaced by IT.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("Data Center Network")]),e._v(": This network carries traffic from the overlay network used by the pods to external consumers of pod deployed services.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("iSCSI Network")]),e._v(" : This network consists of two separate network segments that provide a redundant path for iSCSI storage traffic within the solution.")])])]),e._v(" "),a("p",[e._v("Table 15 defines the VLANs configured using HPE Synergy Composer in the creation of this solution. These networks should be defined at both the first layer switch and within Composer. This solution utilizes unique VLANs for the data center and solution management segments. Actual VLANs and network count will be determined by the requirements of your production environment.")]),e._v(" "),a("p",[a("strong",[e._v("Table 15.")]),e._v(" Networks used in this solution")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Network Function")]),e._v(" "),a("th",[e._v("VLAN Number")]),e._v(" "),a("th",[e._v("Bridge Aggregation Group")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Solution_Management")]),e._v(" "),a("td",[e._v("1193")]),e._v(" "),a("td",[e._v("111")])]),e._v(" "),a("tr",[a("td",[e._v("Data_Center")]),e._v(" "),a("td",[e._v("2193")]),e._v(" "),a("td",[e._v("111")])]),e._v(" "),a("tr",[a("td",[e._v("iSCSI_A")]),e._v(" "),a("td",[e._v("3193")]),e._v(" "),a("td",[e._v("112")])]),e._v(" "),a("tr",[a("td",[e._v("iSCSI_B")]),e._v(" "),a("td",[e._v("3194")]),e._v(" "),a("td",[e._v("113")])])])]),e._v(" "),a("ol",[a("li",[a("p",[e._v("To add these networks to the switch, log on to the switch console over SSH and run the following commands.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" sys\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" vlan "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1193")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2193")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3193")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3194")]),e._v("\n")])])])]),e._v(" "),a("li",[a("p",[e._v("For each of these VLANs, perform the following steps.")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" interface vlan-interface "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("####")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" name VLAN Name per table above\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" description Add text that describes the purpose of the VLAN\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" quit\n")])])])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("It is strongly recommended to configure a dummy VLAN on the switches and assign unused ports to that VLAN.\n")])])])]),e._v(" "),a("p",[e._v("The switches should be configured with a bridge aggregation group (BAGG) for the different links to the HPE Synergy Frame connections. To configure the BAGG and ports as described in "),a("strong",[e._v("Table 5")]),e._v(", run the following commands.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v("```bash\n> interface Bridge-Aggregation111\n> link-aggregation mode dynamic\n> description <FrameNameU30>-ICM\n> quit\n\n> interface range name <FrameNameU30>-ICM interface Bridge-Aggregation111\n> quit\n\n> interface range FortyGigE 1/1/1 to FortyGigE 1/1/2 FortyGigE 2/1/1 to FortyGigE 2/1/2\n> port link-aggregation group 111\n> quit\n\n> interface range name <FrameNameU30>-ICM\n> port link-type trunk\n> undo port trunk permit vlan 1\n> port trunk permit vlan 193 1193 2193\n> quit\n```\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[e._v("After the configuration of the switches is complete, save the state and apply it by typing "),a("strong",[e._v("save")]),e._v(" and follow the resulting prompts.")])]),e._v(" "),a("h2",{attrs:{id:"hpe-synergy-480-gen10-compute-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hpe-synergy-480-gen10-compute-modules"}},[e._v("#")]),e._v(" HPE Synergy 480 Gen10 Compute Modules")]),e._v(" "),a("p",[e._v("This section describes the connectivity of the HPE Synergy 480 Gen10 Compute Modules used in the creation of this solution. The HPE Synergy 480 Gen10 Compute Modules, regardless of function, were all configured identically. Table 16 describes the host configuration tested for this solution. Server configuration should be based on customer needs and the configuration used in the creation of this solution might not align with the requirements of any given production implementation.")]),e._v(" "),a("p",[a("strong",[e._v("Table 16.")]),e._v(" Host configuration")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Component")]),e._v(" "),a("th",[e._v("Quantity")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("HPE Synergy 480/660 Gen10 Intel Xeon-Gold 6130 (2.1GHz/16-core/125W) FIO Processor Kit")]),e._v(" "),a("td",[e._v("2 per server")])]),e._v(" "),a("tr",[a("td",[e._v("HPE 8GB (1x 8GB) Single Rank x8 DDR4-2666 CAS-19-19 Registered Smart Memory Kit")]),e._v(" "),a("td",[e._v("20 per server")])]),e._v(" "),a("tr",[a("td",[e._v("HPE 16GB (1x 16GB) Single Rank x4 DDR4-2666 CAS-19-19 Registered Smart Memory Kit")]),e._v(" "),a("td",[e._v("4 per server")])]),e._v(" "),a("tr",[a("td",[e._v("HPE Synergy 3820C 10/20Gb Converged Network Adapter")]),e._v(" "),a("td",[e._v("1 per server")])]),e._v(" "),a("tr",[a("td",[e._v("HPE Smart Array P204i-c SR Gen10 12G SAS controller")]),e._v(" "),a("td",[e._v("1 per server")])]),e._v(" "),a("tr",[a("td",[e._v("HPE 1.92TB SATA 6GB Mixed Use SFF (2.5in) 3yr Warranty Digitally Signed Firmware SSD")]),e._v(" "),a("td",[e._v("2 per management host")])])])]),e._v(" "),a("h2",{attrs:{id:"hpe-synergy-integration-with-cisco-application-centric-infrastructure-aci"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hpe-synergy-integration-with-cisco-application-centric-infrastructure-aci"}},[e._v("#")]),e._v(" HPE Synergy integration with Cisco Application Centric Infrastructure (ACI)")]),e._v(" "),a("h3",{attrs:{id:"what-is-cisco-aci"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-is-cisco-aci"}},[e._v("#")]),e._v(" What is Cisco ACI?")]),e._v(" "),a("p",[e._v("Cisco® Application Centric Infrastructure (Cisco ACI™) is an industry-leading secure, open, and comprehensive Software-Defined Networking (SDN) solution. It radically simplifies, optimizes, and accelerates infrastructure deployment and governance and expedites the application deployment lifecycle.")]),e._v(" "),a("p",[e._v("Cisco ACI delivers an intent-based networking framework to enable agility in the data centre. It captures high-level business and user intent in the form of a policy and translates this intent into the network constructs necessary to dynamically provision the network, security, and infrastructure services. It uses a holistic system-based approach, with tight integration between hardware and software and physical and virtual elements, an open ecosystem model, and innovative Cisco customer Application-Specific Integrated Circuits (ASICs) to enable unique business value for modern data centres. This unique approach uses a common policy-based operating model across the network, drastically reducing the cost and complexity of operating your network.")]),e._v(" "),a("h3",{attrs:{id:"integration-with-hpe-synergy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#integration-with-hpe-synergy"}},[e._v("#")]),e._v(" Integration with HPE Synergy")]),e._v(" "),a("p",[e._v("This section specifies the reference to the technical whitepaper that will help the Data Center administrators to configure both baremetal OS and VMware ESXi hosts running on HPE Synergy compute nodes with Cisco ACI.")]),e._v(" "),a("p",[e._v("The two use cases where HPE Synergy can be integrated with Cisco ACI are:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v(" 1. VMware virtual infrastructure integration with Cisco ACI to provide dynamic network provisioning.\n 2. Bare metal OS installation on HPE Synergy compute nodes integrated with Cisco ACI.\n")])])]),a("p",[e._v("For detailed information on integration of HPE Synergy with Cisco ACI, see "),a("a",{attrs:{href:"https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-a00003736en_us",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://support.hpe.com/hpesc/public/docDisplay?docId=emr_na-a00003736en_us"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"hpe-synergy-composer-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hpe-synergy-composer-2"}},[e._v("#")]),e._v(" HPE Synergy Composer 2")]),e._v(" "),a("p",[e._v("At the core of the management of the HPE Synergy environment is HPE Synergy Composer 2. A pair of HPE Synergy Composers are deployed across frames to provide redundant management of the environment for both initial deployment and changes over the lifecycle of the solution. HPE Synergy Composer 2 is used to configure the environment prior to the deployment of the operating systems and applications.")]),e._v(" "),a("p",[e._v("This section walks the installation user through the process of installing and configuring the HPE Synergy Composer.")]),e._v(" "),a("h3",{attrs:{id:"configure-the-hpe-synergy-composer-via-vnc"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-the-hpe-synergy-composer-via-vnc"}},[e._v("#")]),e._v(" Configure the HPE Synergy Composer via VNC")]),e._v(" "),a("p",[e._v("To configure HPE Synergy Composer with the user laptop, follow these steps:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Configure the laptop Ethernet port to the IP address 192.168.10.2/24. No gateway is required.")])]),e._v(" "),a("li",[a("p",[e._v("Use a CAT5e cable to connect the laptop computer Ethernet port to laptop port on a front panel module of HPE Synergy Composer.")])]),e._v(" "),a("li",[a("p",[e._v("Access the HPE Synergy Console using a web browser. Start a new browser session and enter "),a("a",{attrs:{href:"http://192.168.10.1:5800",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://192.168.10.1:5800"),a("OutboundLink")],1),e._v(".")])]),e._v(" "),a("li",[a("p",[e._v("Click "),a("strong",[e._v("Connect")]),e._v(" to start HPE OneView for Synergy from the HPE Synergy console.")])]),e._v(" "),a("li",[a("p",[e._v("Click "),a("strong",[e._v("Hardware Setup")]),e._v(" to connect with "),a("strong",[e._v("Installation Technician")]),e._v(" user privileges.")])]),e._v(" "),a("li",[a("p",[e._v("In the Appliance Network dialog box, fill in the following information.")]),e._v(" "),a("p",[e._v("a.  Appliance host name: Enter "),a("strong",[e._v("a fully qualified domain name of the HPE Synergy Composer.")])]),e._v(" "),a("p",[e._v("b.  Address assignment: "),a("strong",[e._v("Manual")])]),e._v(" "),a("p",[e._v("c.  IP address: "),a("strong",[e._v("Enter an IP address on the management network")]),e._v(".")]),e._v(" "),a("p",[e._v("d.  Subnet mask or CIDR: "),a("strong",[e._v("Enter the subnet mask of the management network")]),e._v(".")]),e._v(" "),a("p",[e._v("e.  Gateway address: "),a("strong",[e._v("Enter the gateway for the management network")]),e._v(".")]),e._v(" "),a("p",[e._v("f.  Maintenance IP address 1: "),a("strong",[e._v("Enter a maintenance IP address on the management")]),e._v(" "),a("strong",[e._v("network")]),e._v(".")]),e._v(" "),a("p",[e._v("g.  Maintenance IP address 2: "),a("strong",[e._v("Enter a secondary maintenance IP")]),e._v(" "),a("strong",[e._v("address on the management network.")])]),e._v(" "),a("p",[e._v("h.  Preferred DNS server: "),a("strong",[e._v("Enter the DNS server.")])]),e._v(" "),a("p",[e._v("i.  IPv6 Address assignment: "),a("strong",[e._v("Unassign")])])]),e._v(" "),a("li",[a("p",[e._v("Click OK.")])]),e._v(" "),a("li",[a("p",[e._v("When the hardware discovery process is complete, all HPE Synergy hardware including the Frames, Composer modules, Frame Link modules, Interconnect modules, Compute modules, and storage modules must be discovered and claimed by HPE OneView for Synergy.")])]),e._v(" "),a("li",[a("p",[e._v("Review and correct any issues listed in the hardware setup checklist. The HPE Synergy 12000 Frame Setup and Installation Guide available at "),a("a",{attrs:{href:"http://www.hpe.com/info/synergy-docs",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.hpe.com/info/synergy-docs"),a("OutboundLink")],1),e._v(" provides troubleshooting steps for common issues during hardware setup.")])]),e._v(" "),a("li",[a("p",[e._v("Navigate to "),a("strong",[e._v("OneView")]),e._v(" -> "),a("strong",[e._v("Settings")]),e._v(" and then click "),a("strong",[e._v("Appliance")]),e._v(". Verify that the active and standby appliances show a status of "),a("strong",[e._v("Connected")]),e._v(".")])])]),e._v(" "),a("h3",{attrs:{id:"configure-appliance-credentials"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-appliance-credentials"}},[e._v("#")]),e._v(" Configure appliance credentials")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Log in to the HPE OneView for Synergy Web Administration Portal, review and accept the License Agreement.")])]),e._v(" "),a("li",[a("p",[e._v("On the HPE OneView Support Dialog box, verify that Authorized Service has a setting of Enabled. Click OK.")])]),e._v(" "),a("li",[a("p",[e._v("Log in as "),a("strong",[e._v("Administrator")]),e._v(" with default password "),a("strong",[e._v("admin")]),e._v(", set the new password to <<composer_administrator_password>> and click "),a("strong",[e._v("Ok")]),e._v(".")])])]),e._v(" "),a("h3",{attrs:{id:"configure-solution-firmware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-solution-firmware"}},[e._v("#")]),e._v(" Configure solution firmware")]),e._v(" "),a("p",[e._v("This solution adheres to the firmware recipe specified with the HPE Converged Solutions 750 specifications which can be found at CS750 Firmware and Software Compatibility Matrix. The solution used the latest firmware recipe available as of March 2020 including HPE OneView for Synergy 5.0:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Select the "),a("strong",[e._v("OneView menu")]),e._v(" and select "),a("strong",[e._v("Settings.")])])]),e._v(" "),a("li",[a("p",[e._v("Under Appliance, select "),a("strong",[e._v("Update Appliance")]),e._v(" and "),a("strong",[e._v("update Composer.")])])]),e._v(" "),a("li",[a("p",[e._v("After the update process completes, validate that both composer modules are connected and there is a "),a("strong",[e._v("green")]),e._v(" "),a("strong",[e._v("checkmark.")])])])]),e._v(" "),a("h3",{attrs:{id:"solution-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#solution-configuration"}},[e._v("#")]),e._v(" Solution configuration")]),e._v(" "),a("p",[e._v("The installation user should utilize the Synergy Guided Setup to complete the following solution configuration details.")]),e._v(" "),a("h4",{attrs:{id:"create-additional-users"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-additional-users"}},[e._v("#")]),e._v(" Create additional users")]),e._v(" "),a("p",[e._v("It is recommended that you create a read-only user and an administrator account with a different username than administrator.")]),e._v(" "),a("h4",{attrs:{id:"firmware"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#firmware"}},[e._v("#")]),e._v(" Firmware")]),e._v(" "),a("p",[e._v("Upload the latest version of the firmware bundle based on the HPE Converged Solutions 750 recipe. After the bundle starts uploading, proceed to additional steps without disrupting the upload.")]),e._v(" "),a("h4",{attrs:{id:"create-an-ip-pool-on-the-management-network"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-an-ip-pool-on-the-management-network"}},[e._v("#")]),e._v(" Create an IP pool on the management network")]),e._v(" "),a("p",[e._v("Follow the guidance to create an IP pool on the management network. This IP pool will provide IP addresses to management IP’s and HPE device iLOs within the solution. Ensure that the pool is enabled prior to proceeding.")]),e._v(" "),a("h4",{attrs:{id:"configure-ethernet-networks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-ethernet-networks"}},[e._v("#")]),e._v(" Configure Ethernet networks")]),e._v(" "),a("p",[e._v("As explained in the "),a("a",{attrs:{href:"#network-definition"}},[e._v("Network definition")]),e._v(" section of this document, the solution utilizes three (3) network segments. Refer to the Create networks section of the OneView Guided Setup wizard to define the networks shown in Table 17 at a minimum. Your VLAN values will generally differ from those described.")]),e._v(" "),a("p",[a("strong",[e._v("Table 17.")]),e._v(" Network defined within HPE Synergy Composer for this solution")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Network Name")]),e._v(" "),a("th",[e._v("VLAN Number")]),e._v(" "),a("th",[e._v("Purpose")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Management")]),e._v(" "),a("td",[e._v("Ethernet")]),e._v(" "),a("td",[e._v("1193")])]),e._v(" "),a("tr",[a("td",[e._v("Data_Center")]),e._v(" "),a("td",[e._v("Ethernet")]),e._v(" "),a("td",[e._v("2193")])])])]),e._v(" "),a("p",[e._v("The management network should be associated with the management network IP pool, which the user specified in the prior step. The installation user should create any additional required networks for the solution.")]),e._v(" "),a("h4",{attrs:{id:"create-logical-interconnect-groups"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-logical-interconnect-groups"}},[e._v("#")]),e._v(" Create Logical Interconnect Groups")]),e._v(" "),a("p",[e._v("Within Composer, use the Guided Setup to create a Logical Interconnect Group (LIG) with three (3) uplink sets defined. For this solution, the uplink sets are named Network. The uplink sets “Network” carries all other networks defined for the solution. Table 18 defines the ports used to carry the uplink sets.")]),e._v(" "),a("p",[a("strong",[e._v("Table 18.")]),e._v(" Networks used in this solution")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Uplink Set")]),e._v(" "),a("th",[e._v("Synergy Source")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Network")]),e._v(" "),a("td",[e._v("Enclosure 1, Bay 3, Port Q3")])]),e._v(" "),a("tr",[a("td"),e._v(" "),a("td",[e._v("Enclosure 1, Bay 3, Port Q4")])]),e._v(" "),a("tr",[a("td"),e._v(" "),a("td",[e._v("Enclosure 2, Bay 6, Port Q3")])]),e._v(" "),a("tr",[a("td"),e._v(" "),a("td",[e._v("Enclosure 2, Bay 6, Port Q4")])])])]),e._v(" "),a("h4",{attrs:{id:"create-enclosure-group"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-enclosure-group"}},[e._v("#")]),e._v(" Create Enclosure Group")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("From the OneView Guided Setup, select Create "),a("strong",[e._v("enclosure group.")])])]),e._v(" "),a("li",[a("p",[e._v("Provide a "),a("strong",[e._v("name")]),e._v(" and enter the "),a("strong",[e._v("number of frames")]),e._v(".")])]),e._v(" "),a("li",[a("p",[e._v("Select "),a("strong",[e._v("Use address pool")]),e._v(" and utilize the "),a("strong",[e._v("management pool")]),e._v(" defined earlier.")])]),e._v(" "),a("li",[a("p",[e._v("Use the Logical Interconnect Group from the prior step in the creation of the Enclosure Group.")])]),e._v(" "),a("li",[a("p",[e._v("Select "),a("strong",[e._v("Create")]),e._v(" when ready.")])])]),e._v(" "),a("h4",{attrs:{id:"create-logical-enclosure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-logical-enclosure"}},[e._v("#")]),e._v(" Create Logical Enclosure")]),e._v(" "),a("p",[e._v("Use the Guided Setup to create a logical enclosure making use of all three (3) enclosures. Select the firmware you uploaded earlier as a baseline. It can take some time for the firmware to update across the solution stack. Ensure that firmware complies with the baseline by selecting "),a("strong",[e._v("Actions")]),e._v(" and then "),a("strong",[e._v("Update")]),e._v(" "),a("strong",[e._v("Firmware")]),e._v(". Click "),a("strong",[e._v("Cancel")]),e._v(" to exit.")]),e._v(" "),a("h3",{attrs:{id:"configuring-solution-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuring-solution-storage"}},[e._v("#")]),e._v(" Configuring solution storage")]),e._v(" "),a("p",[e._v("The HPE Synergy D3940 Storage Module provides SSDs and optional Hard Disk Drives (HDDs) consumed by the Local Storage Operator, if not utilizing local disks within the HPE Synergy 480 Gen 10 Compute Modules. It can also provide boot volumes. HPE Nimble Storage and HPE 3PAR dynamically provides Persistent Volume (PV) for containers using Dynamic Volume Provisioner which is integrated with the HPE Container Storage Interface Driver.")]),e._v(" "),a("p",[e._v("Figure 13 describes the logical storage layout used in the solution. The HPE Synergy D3940 Storage Module provides SAS volume.")]),e._v(" "),a("p",[a("img",{attrs:{src:r(359),alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("Figure 13.")]),e._v(" Logical storage layout")]),e._v(" "),a("p",[e._v("Table 19 lists all volume used within the solution and highlights what storage provides the capacity and performance of each function.")]),e._v(" "),a("p",[a("strong",[e._v("Table 19.")]),e._v(" Volume used in this solution")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Volume/Disk Function")]),e._v(" "),a("th",[e._v("Qty")]),e._v(" "),a("th",[e._v("Size")]),e._v(" "),a("th",[e._v("Source")]),e._v(" "),a("th",[e._v("Hosts")]),e._v(" "),a("th",[e._v("Shared/Dedicated")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Local volume")]),e._v(" "),a("td",[e._v("3")]),e._v(" "),a("td",[e._v("960GB")]),e._v(" "),a("td",[e._v("HPE Synergy D3940 storage")]),e._v(" "),a("td",[e._v("OpenShift worker nodes")]),e._v(" "),a("td",[e._v("dedicated")])]),e._v(" "),a("tr",[a("td",[e._v("Operating System (optional)")]),e._v(" "),a("td",[e._v("6")]),e._v(" "),a("td",[e._v("300GB")]),e._v(" "),a("td",[e._v("HPE Synergy D3940 storage")]),e._v(" "),a("td",[e._v("All nodes")]),e._v(" "),a("td",[e._v("dedicated")])])])]),e._v(" "),a("h2",{attrs:{id:"bootstrap-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bootstrap-node"}},[e._v("#")]),e._v(" Bootstrap node")]),e._v(" "),a("p",[e._v("A temporary bootstrap node is required for OpenShift cluster creation. This section assumes that a VMware vSphere host is present within the deployment environment and is associated with a VMware vCenter server. The host should be configured with appropriate storage and networking configuration.")]),e._v(" "),a("h3",{attrs:{id:"playbooks-for-creating-the-bootstrap-node"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#playbooks-for-creating-the-bootstrap-node"}},[e._v("#")]),e._v(" Playbooks for creating the bootstrap node")]),e._v(" "),a("ol",[a("li",[e._v("inputs.yml: This file contains input variables to create the bootstrap VM. Some of the variables pertaining to the VM configuration are provided with default values as per the Red Hat guidelines. It is expected that the installation user updates the values to suit their installation environment.")])]),e._v(" "),a("ul",[a("li",[a("p",[a("strong",[e._v("datacenter_name")]),e._v(": Name of the VMware data center.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("cluster_name")]),e._v(": Name of the VMware cluster.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("datastore_name")]),e._v(": Name of the VMware datastore.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("network_name")]),e._v(": Name of the network associated with the vSphere host.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("bootstrap_disk")]),e._v(": Disk size for the bootstrap node.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("bootstrap_cpu")]),e._v(": Number of vCPUs for the bootstrap node.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("bootstrap_name")]),e._v(": Custom name of the bootstrap node.")])])]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[a("strong",[e._v("secret.yml")]),e._v(": This is an Ansible vault file that contains sensitive information such as the VMware vCenter server IP address and credentials.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("playbooks/deploy_vm.yml")]),e._v(": This playbook is used to create the bootstrap VM.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("roles/deploy_vm.yml")]),e._v(": This is the Ansible role file that is required to create the bootstrap VM. Each role is associated with a set of tasks to accomplish the expected output and they are present in the tasks directory within the role.")])])]),e._v(" "),a("p",[e._v("Follow these steps to create the bootstrap node:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Login to the installer VM.")])]),e._v(" "),a("li",[a("p",[e._v("Use the following command to change the directory.")])])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" /opt/hpe/solutions/ocp/hpe-solutions-openshift/synergy/scalable/installer/ignitions\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[e._v("Update the secret.yml to provide the details of the VMware vCenter server using the following command. A sample input is provided and it is expected that the installation user updates the configuration to suit the deployment environment.")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ansible-vault edit secret.yml\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# vcenter hostname/ip address and credentials\nvcenter_hostname: <vcenter hostname>;\nvcenter_username: <vcenter username>;\nvcenter_password: <vcenter password>;\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[e._v("Update the "),a("em",[e._v("input.yml")]),e._v(" file with the data center, cluster, and datastore information that will be used within the VMware vCenter server. This file provides default configuration information for the bootstrap node, if required. The configuration can be updated to suit the environment needs.")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# Variables for creating the bootstrap VM, as per the vSphere host configuration within the vCenter\ndatacenter_name: <name of data center within vcenter>;\ncluster_name: &lt;name of cluster within vcenter>;\ndatastore_name: &lt;name of datastore within vcenter>;\nnetwork_name: <name of the network within vcenter>;\n\n# Default values for creating the bootstrap VM\nbootstrap_disk: 150\nbootstrap_cpu: 4\nbootstrap_memory: 16400\nbootstrap_name: Bootstrap\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[e._v("After the "),a("em",[e._v("input.yml")]),e._v(" and "),a("em",[e._v("secret.yml")]),e._v(" files are updated with appropriate values, execute the playbook with the following command to create the bootstrap VM.")])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ansible-playbook –i hosts playbooks/deploy_vm.yml ––ask-vault-pass\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("p",[e._v("It is essential that all the nodes within the deployment environment are synchronized for time using an NTP server. Failure to do so will result in an installation failure due to mismatches in certificates or other files with time dependencies.")])]),e._v(" "),a("h2",{attrs:{id:"server-profiles"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server-profiles"}},[e._v("#")]),e._v(" Server profiles")]),e._v(" "),a("p",[e._v("Server profiles are used to configure the personality of the compute resources. A server profile allows a set of configuration parameters, including firmware recipe, network and SAN connectivity, BIOS tuning, boot order configuration, local storage configuration, and more to be templatized. These templates are the key to delivering the “infrastructure as code” capabilities of the HPE Synergy platform. For the purpose of this solution, a template is created which can be leveraged for OpenShift master nodes and OpenShift worker nodes.")]),e._v(" "),a("p",[e._v("This section consists of Ansible playbooks developed to automate the tasks such as uploading firmware baseline iso package to OneView, creating server profile template and server profiles in HPE OneView and the scripts to create a virtual machine in VMware vCenter server.")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("Prerequisites")]),e._v(" "),a("ul",[a("li",[e._v("Ansible engine with Ansible 2.9.x and Python 3.6.x")]),e._v(" "),a("li",[e._v("Python module for HPE OneView: hpOneView is the Python SDK for the OneView API that allows you to manage OneView functionalities. Download the python repository at "),a("a",{attrs:{href:"https://github.com/HewlettPackard/oneview-python",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/HewlettPackard/oneview-python"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("li",[e._v("Ansible module for HPE OneView: OneView-ansible is the Ansible Module for HPE OneView which utilizes the python SDK to enable infrastructure as a code. Download the repository at "),a("a",{attrs:{href:"https://github.com/HewlettPackard/oneview-ansible/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/HewlettPackard/oneview-ansible/"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("li",[e._v("Python SDK for VMware vSphere: PyVmomi is the Python SDK for the VMware vSphere API that allows you to manage ESXi and vCenter.")])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("p",[e._v("To run the automation scripts described in this section, it is mandatory to configure the Installer Machine with non-root user access and other prerequisites mentioned in the Installer machine section.")])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("p",[e._v('Some pre and post "server profile template and server profile" creation requirements, that need to be executed manually are as follows:')]),e._v(" "),a("ul",[a("li",[e._v("Before using the profile automation, the user needs to look out if there are any hardware errors or warnings on the compute that will be used for deploying server profile template and server profile. If there are errors or warnings on compute node, the user needs to resolve them or clear them before using the automation scripts.")]),e._v(" "),a("li",[e._v("Before running automation, reset iLO for the corresponding compute, so that any communication issues between OneView and iLO can be resolved.")]),e._v(" "),a("li",[e._v("After applying the profile, if there are local storage or Interconnect errors, then the user needs to perform the steps as stated in error resolution.")])])]),e._v(" "),a("h3",{attrs:{id:"software-requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#software-requirements"}},[e._v("#")]),e._v(" Software requirements")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Software")]),e._v(" "),a("th",[e._v("Version")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("HPE OneView")]),e._v(" "),a("td",[e._v("5")])]),e._v(" "),a("tr",[a("td",[e._v("Red Hat Enterprise Linux Server")]),e._v(" "),a("td",[e._v("7.6")])]),e._v(" "),a("tr",[a("td",[e._v("VMware ESXi")]),e._v(" "),a("td",[e._v("6.7")])]),e._v(" "),a("tr",[a("td",[e._v("VMware vCenter Server Appliance")]),e._v(" "),a("td",[e._v("6.7")])]),e._v(" "),a("tr",[a("td",[e._v("Red Hat CoreOS")]),e._v(" "),a("td",[e._v("4.4")])])])]),e._v(" "),a("h3",{attrs:{id:"upload-firmware-bundle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upload-firmware-bundle"}},[e._v("#")]),e._v(" Upload firmware bundle")]),e._v(" "),a("p",[e._v("This role consists of Ansible playbooks developed to automate the task of uploading the firmware bundle or firmware baseline for Compute Module of HPE Synergy to HPE OneView.")]),e._v(" "),a("h4",{attrs:{id:"input-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#input-files"}},[e._v("#")]),e._v(" Input files")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("It is mandatory to update all the input files (*inputs.yml, hosts, secret.yml, fw_version_inputs.yml) with appropriate values before running any of the playbooks available in this repository.")])]),e._v(" "),a("li",[a("p",[e._v("Input file name: hosts")]),e._v(" "),a("ul",[a("li",[e._v("This file is an inventory of host details.")]),e._v(" "),a("li",[e._v('Variables from "hosts" that are required by playbooks under "infrastructure" directory are listed as follows.')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# [server_profile_template]\n# [server_profile]\n")])])]),a("ul",[a("li",[e._v("Input file name: "),a("em",[e._v("inputs.yml")]),e._v(" "),a("ul",[a("li",[e._v('Variables from "'),a("em",[e._v("inputs.yml")]),e._v('" that are required by playbooks under "infrastructure" directory are listed as follows.')])])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# enclosure_group: <Enclosure group name as per OneView> \n# deployment_network_name: <Deployment network name as per OneView>\n# server_profile_template_name: <Custom name for Server Profile Template>\n# fw_bundle_path: <Firmware Bundle file path>\n# fw_bundle_file_name: <Firmware file name with extension>\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Input file name: "),a("em",[e._v("secret.yml")])]),e._v(" "),a("ul",[a("li",[e._v("This is an Ansible vault file.")]),e._v(" "),a("li",[e._v('Variables from "'),a("em",[e._v("secret.yml")]),e._v('" that are required by playbooks under "infrastructure" directory are listed as follows.')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# oneview_ip: x.x.x.x \n# oneview_username: username\n# oneview_password: password\n# oneview_api_version: 1200\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Input file name: "),a("em",[e._v("fw_version_inputs.yml")])]),e._v(" "),a("ul",[a("li",[e._v("This file contains the version information of the firmware that should be updated on the server hardware.")]),e._v(" "),a("li",[e._v('Variables from "'),a("em",[e._v("fw_version_inputs.yml")]),e._v('" that are required by playbooks under "infrastructure" directory are listed as follows.')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# innovationengine: < INNOVATION_ENGINE_VERSION >\n# systemrombios: < SYSTEM_ROM_VERSION >\n# serverplatformservices: < SERVER_PLATFORM_SERVICES >\n# powermanagementcontroller: < POWER_MANAGEMENT_CONTROLLER >\n# ilo5: < iLO_5_VERSION >\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Execute the following commands on the installer VM to upload the firmware bundle to HPE OneView.")])])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# cd $BASE_DIR/infrastructure")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ansible-playbook -i hosts playbooks/upload_firmware_bundle.yml --ask-vault-pass")]),e._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("p",[e._v("BASE_DIR is defined and set in "),a("RouterLink",{attrs:{to:"/Preparing the execution environment/Preparing-the-execution-environment.html#installer-machine"}},[e._v("Installer machine")]),e._v(" section.")],1)]),e._v(" "),a("p",[e._v("Expected output on installer machine after successful upload of firmware bundle to OneView.")]),e._v(" "),a("p",[a("img",{attrs:{src:r(360),alt:""}})]),e._v(" "),a("p",[e._v("Expected output after Firmware Baseline id uploaded to OneView.")]),e._v(" "),a("p",[a("img",{attrs:{src:r(361),alt:""}})]),e._v(" "),a("h3",{attrs:{id:"create-server-profile-template"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-server-profile-template"}},[e._v("#")]),e._v(" Create server profile template")]),e._v(" "),a("p",[e._v("This section consists of ansible playbooks developed to automate the task of creating and deploying the Server Profile Template along with attaching the firmware baseline (firmware bundle for updating the firmwares on HPE Synergy compute module) with the profile template in HPE OneView and also updating the BIOS and iLO settings.")]),e._v(" "),a("h4",{attrs:{id:"input-files-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#input-files-2"}},[e._v("#")]),e._v(" Input files")]),e._v(" "),a("p",[e._v("It is mandatory to update all the input files (inputs.yml, hosts, secret.yml, fw_version_inputs.yml) with appropriate values before running any of the playbooks available in this repository.")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Input file name: hosts")]),e._v(" "),a("ul",[a("li",[e._v("This file is an inventory of host details.")]),e._v(" "),a("li",[e._v('Variables from "hosts" that are required by playbooks under "infrastructure" directory are as follows.')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# [server_profile_template]\n# [server_profile]\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Input file name: "),a("em",[e._v("inputs.yml")])]),e._v(" "),a("ul",[a("li",[e._v('Variables from "'),a("em",[e._v("inputs.yml")]),e._v('" that are required by playbooks under "infrastructure" directory are listed as follows.')]),e._v(" "),a("li",[e._v('Details about each of the variable is explained in the comments section of "'),a("em",[e._v("input.yml")]),e._v('".')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# os_is_coreos: <true_or_false>\n# enclosure_group: <Enclosure group name as per OneView> \n# deployment_network_name: <Deployment network name as per OneView>\n# server_profile_template_name: <Custom name for SPT>\n# fw_bundle_path: <Firmware Bundle file path>\n# fw_bundle_file_name: <Firmware file name with extension>\n# manageBios: <true_or_false>\n# bioscomplianceControl: <Checked_or_Unchecked>\n# manageilo: <true_or_false>\n# ilocomplianceControl: <Checked_or_Unchecked>\n# managefw: <true_or_false>\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Input file name: "),a("em",[e._v("secret.yml")])]),e._v(" "),a("ul",[a("li",[e._v("This is an ansible vault file.")]),e._v(" "),a("li",[e._v('Variables from "'),a("em",[e._v("secret.yml")]),e._v('" that are required by playbooks under "infrastructure" directory are listed as follows. These variables are for OneView access, iLO new user account details and privileges, and BIOS security settings.')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# oneview_ip: x.x.x.x \n# oneview_username: username\n# oneview_password: password\n# oneview_api_version: 1200\n# ilo_username: <ilo_new_user>\n# ilo_displayname: <ilo_new_user_display_name>\n# ilo_password: <ilo_new_user_password>\n# ilo_user_userConfigPriv: <boolean_true_or_false>\n# ilo_user_iLOConfigPriv: <boolean_true_or_false>\n# ilo_user_loginPriv: <boolean_true_or_false>\n# ilo_user_remoteConsolePriv: <boolean_true_or_false>\n# ilo_user_virtualMediaPriv: <boolean_true_or_false>\n# ilo_user_virtualPowerAndResetPriv: <boolean_true_or_false>\n# ilo_user_hostBIOSConfigPriv: <boolean_true_or_false>\n# ilo_user_hostNICConfigPriv: <boolean_true_or_false>\n# ilo_user_hostStorageConfigPriv: <boolean_true_or_false>\n# bios_ProcAes: <Enabled_or_Disabled>\n# bios_AssetTagProtection: <Unloacked_or_Locked>\n# bios_SecStartBackupImage: <Enabled_or_Disabled>\n# bios_AdvancedMemProtection: <value>\n# bios_F11BootMenu: <Enabled_or_Disabled>\n# bios_Workload Profile: <workload_profile>\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Input file name: "),a("em",[e._v("fw_version_inputs.yml")])]),e._v(" "),a("ul",[a("li",[e._v("This file contains the version information of the firmware that should be updated on the server hardware.")]),e._v(" "),a("li",[e._v('Variables from "'),a("em",[e._v("fw_version_inputs.yml")]),e._v('" that are required by playbooks under "infrastructure" directory are listed as follows.')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# innovationengine: < INNOVATION_ENGINE_VERSION >\n# systemrombios: < SYSTEM_ROM_VERSION >\n# serverplatformservices: < SERVER_PLATFORM_SERVICES >\n# powermanagementcontroller: < POWER_MANAGEMENT_CONTROLLER >\n# ilo5: < iLO_5_VERSION >\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Execute the following commands on the installer VM to create the Server Profile Template in OneView.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# cd $BASE_DIR/infrastructure\n# ansible-playbook -i hosts playbooks/deploy_server_profile_template.yml --ask-vault-pass\n")])])])]),e._v(" "),a("li",[a("p",[e._v('Expected output on successful creation of Server Profile Template using "'),a("em",[e._v("deploy_server_profile_template.yml")]),e._v('" playbook.')])])]),e._v(" "),a("p",[a("img",{attrs:{src:r(362),alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("In case template is already available, then the expected output on successful updation of Server Profile Template with the Server Profile Facts is specified in the "),a("em",[e._v("server_profile_template_file.yml")]),e._v(".")])]),e._v(" "),a("p",[a("img",{attrs:{src:r(363),alt:""}})]),e._v(" "),a("ul",[a("li",[e._v('Expected output on successful creation or updation of Server Profile Template in OneView using "'),a("em",[e._v("deploy_server_profile_template.yml")]),e._v('" playbook.')])]),e._v(" "),a("p",[a("img",{attrs:{src:r(364),alt:""}})]),e._v(" "),a("h3",{attrs:{id:"create-server-profile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-server-profile"}},[e._v("#")]),e._v(" Create server profile")]),e._v(" "),a("p",[e._v("This section consists of Ansible playbooks developed to automate the task of creating and deploying the Server Profile on the Server Hardware in HPE OneView. It also automates the task of applying the firmware updates, iLO and BIOS settings on the Server hardware. Lastly, it automates the task of validating the firmware updates, iLO, and BIOS settings available on server hardware are matching with firmware details available in the firmware baseline or firmware bundle and iLO and BIOS settings specified by user are matching with iLO and BIOS settings on the server hardware.")]),e._v(" "),a("h3",{attrs:{id:"prerequisites"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),a("p",[e._v('SELINUX: To create server profile using the automation, user should set the value of "SELINUX" to disabled by performing the following steps.')]),e._v(" "),a("ol",[a("li",[e._v('Switch to root user account on the Ansible Installer Machine using command "su root" # su root')]),e._v(" "),a("li",[e._v("Enter the root password to login as root user.")]),e._v(" "),a("li",[e._v("Open the selinux configuration file using the following command:"),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# vi /etc/selinux/config\n")])])])]),e._v(" "),a("li",[e._v('Change the variable "SELINUX" to "disabled" in the "/etc/selinux/config" file as shown : SELINUX=disabled.')]),e._v(" "),a("li",[e._v("Save and exit the config file.")]),e._v(" "),a("li",[e._v('Reboot the system and login as root user and check the status of "SELINUX" using the following command.'),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# getenforce\n")])])])]),e._v(" "),a("li",[e._v('Expected output from "getenforce" command is "Disabled." After setting the "SELINUX" to disabled and rebooting the Ansible Installer Machine, user should exit from "root" account and login as "non root" user and activate the python3 virtual environment as listed.')])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[e._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# cd BASE_DIR/installer")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# source ocp_venv/bin/activate")]),e._v("\n")])])]),a("h4",{attrs:{id:"input-files-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#input-files-3"}},[e._v("#")]),e._v(" Input files")]),e._v(" "),a("p",[e._v("It is mandatory to update all the input files (*inputs.yml, hosts, secret.yml, fw_version_inputs.yml) with appropriate values before running any of the playbooks available in this repository.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[e._v('- Input file name: hosts\n  - This file is an inventory of host details.\n  - Variables from "hosts" that are required by playbooks under "infrastructure" directory are listed as follows.\n  ```   \n  # [server_profile_template]\n  # [server_profile]\n ```\n')])])]),a("ul",[a("li",[e._v("Input file name: "),a("em",[e._v("inputs.yml")]),e._v(" "),a("ul",[a("li",[e._v('Variables from "'),a("em",[e._v("inputs.yml")]),e._v('" that are required by playbooks under "infrastructure" directory are listed as follows.')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# enclosure_group: <Enclosure group name as per OneView> \n# deployment_network_name: <Deployment network name as per OneView>\n# server_profile_template_name: <Custom name for SPT>\n# fw_bundle_path: <Firmware Bundle file path>\n# fw_bundle_file_name: <Firmware file name with extension>\n")])])])]),e._v(" "),a("li",[e._v("Input file name: "),a("em",[e._v("secret.yml")]),e._v(" "),a("ul",[a("li",[e._v("This is an Ansible vault file.")]),e._v(" "),a("li",[e._v('Variables from "'),a("em",[e._v("secret.yml")]),e._v('" that are required by playbooks under "infrastructure" directory are listed as follows. These variables are for OneView access, iLO new user account details and privileges, and BIOS security settings.')])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# oneview_ip: x.x.x.x \n# oneview_username: username\n# oneview_password: password\n# oneview_api_version: 1200\n# ilo_username: <ilo_new_user>\n# ilo_displayname: <ilo_new_user_display_name>\n# ilo_password: <ilo_new_user_password>\n# ilo_user_userConfigPriv: <boolean_true_or_false>\n# ilo_user_iLOConfigPriv: <boolean_true_or_false>\n# ilo_user_loginPriv: <boolean_true_or_false>\n# ilo_user_remoteConsolePriv: <boolean_true_or_false>\n# ilo_user_virtualMediaPriv: <boolean_true_or_false>\n# ilo_user_virtualPowerAndResetPriv: <boolean_true_or_false>\n# ilo_user_hostBIOSConfigPriv: <boolean_true_or_false>\n# ilo_user_hostNICConfigPriv: <boolean_true_or_false>\n# ilo_user_hostStorageConfigPriv: <boolean_true_or_false>\n# bios_ProcAes: <Enabled_or_Disabled>\n# bios_AssetTagProtection: <Unloacked_or_Locked>\n# bios_SecStartBackupImage: <Enabled_or_Disabled>\n# bios_AdvancedMemProtection: <value>\n# bios_F11BootMenu: <Enabled_or_Disabled>\n# bios_Workload Profile: <workload_profile>\n")])])])]),e._v(" "),a("li",[e._v("Input file name: "),a("em",[e._v("fw_version_inputs.yml")]),e._v(" "),a("ul",[a("li",[e._v("This file contains the version information of the firmware that should be updated on the server hardware.")]),e._v(" "),a("li",[e._v('Variables from "'),a("em",[e._v("fw_version_inputs.yml")]),e._v('" that are required by playbooks under "infrastructure" directory are listed as follows.'),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# innovationengine: < INNOVATION_ENGINE_VERSION >\n# systemrombios: < SYSTEM_ROM_VERSION >\n# serverplatformservices: < SERVER_PLATFORM_SERVICES >\n# powermanagementcontroller: < POWER_MANAGEMENT_CONTROLLER >\n# ilo5: < iLO_5_VERSION >\n")])])])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code")])])]),e._v(" "),a("li",[e._v("Execute the following commands on the installer VM to upload the firmware bundle to HPE OneView."),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# cd $BASE_DIR/infrastructure")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ansible-playbook -i hosts playbooks/upload_firmware_bundle.yml --ask-vault-pass")]),e._v("\n")])])])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("ul",[a("li",[e._v('Firmware update and validation tasks will be executed if user has selected "managefw" variable as "true" in "inputs.yml" file while creating the "server profile template".')]),e._v(" "),a("li",[e._v('iLO settings update and validation tasks will be executed if user has selected "manageilo" variable as "true" in "inputs.yml" file while creating the "server profile template".')]),e._v(" "),a("li",[e._v('BIOS settings update and validation tasks will be executed if user has selected "manageBios" variable as "true" in "inputs.yml" file while creating the "server profile template".')])])]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),a("p",[e._v("BASE_DIR is defined and set in "),a("RouterLink",{attrs:{to:"/Preparing the execution environment/Preparing-the-execution-environment.html#installer-machine"}},[e._v("Installer machine")]),e._v(" section.")],1)]),e._v(" "),a("ul",[a("li",[e._v("Expected output on successful creation of Server Profile and updation of firmware based on firmware baseline specified by the user.")])]),e._v(" "),a("p",[a("img",{attrs:{src:r(365),alt:""}})]),e._v(" "),a("ul",[a("li",[e._v('Expected output after successful firmware validation based on firmware baseline specified by the user in "'),a("em",[e._v("fw_versions.yml")]),e._v('".')])]),e._v(" "),a("p",[a("img",{attrs:{src:r(366),alt:""}})]),e._v(" "),a("ul",[a("li",[e._v('Expected output in "firmware" section of OneView server profile is as follows.')])]),e._v(" "),a("p",[a("img",{attrs:{src:r(367),alt:""}})]),e._v(" "),a("ul",[a("li",[e._v('Expected output after successful BIOS security settings validation based on security setting specified in "secret.yml".')])]),e._v(" "),a("p",[a("img",{attrs:{src:r(368),alt:""}})]),e._v(" "),a("ul",[a("li",[e._v('Expected output after successful iLO settings validation based on iLO setting specified in "secret.yml".')])]),e._v(" "),a("p",[a("img",{attrs:{src:r(369),alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Expected output in OneView on successful creation of Server Profile and updation of firmware, BIOS and iLO settings.")])]),e._v(" "),a("p",[a("img",{attrs:{src:r(370),alt:""}})])])}),[],!1,null,null,null);t.default=n.exports}}]);